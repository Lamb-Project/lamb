import{d as Pa,t as d,h as Ua,b as n,s as g,n as na,e as ra,f as lt,g as sa}from"../chunks/DbBWcICI.js";import{p as $a,j as y,k as we,A as ja,ab as Ia,u as Ma,w as Fe,o as a,l as r,t as P,n as Oa,m as e,q as s,$ as Ba,r as t,v as ke}from"../chunks/DMsokd5p.js";import{i as m}from"../chunks/MBI0PpQy.js";import{e as Xe,i as at}from"../chunks/D6e1hy_S.js";import{s as je,r as ue,d as oa,a as dt,c as La}from"../chunks/gPkShxx4.js";import{b as Ie,a as ia}from"../chunks/CFRbuANL.js";import{s as Na,a as Ta}from"../chunks/BsHaMxS4.js";import{p as qa}from"../chunks/CSm_io3U.js";import{g as wt,b as kt}from"../chunks/DSbmFsaz.js";import{a as H}from"../chunks/t--hEgTQ.js";import{u as Da}from"../chunks/CmzVOFLo.js";function Fa(G,v,b,M,de){e(v).selected_models||(e(v).selected_models={}),e(v).selected_models[e(b)]=[...e(M)],e(v).selected_models={...e(v).selected_models},de()}function Ra(G,v,b,M){s(v,[...e(v),...e(b)],!0),s(b,[],!0),s(M,[],!0)}function Va(G,v,b,M){s(v,[...e(v),...e(b)],!0),s(M,e(M).filter(de=>!e(b).includes(de)),!0),s(b,[],!0)}function Ka(G,v,b,M){s(v,[...e(v),...e(b)],!0),s(M,e(M).filter(de=>!e(b).includes(de)),!0),s(b,[],!0)}function Ya(G,v,b,M){s(v,[...e(v),...e(b)],!0),s(b,[],!0),s(M,[],!0)}function Ha(G,v,b){s(v,"dashboard"),wt(`${kt}/org-admin?view=dashboard`,{replaceState:!0}),b()}function Qa(G,v,b){s(v,"users"),wt(`${kt}/org-admin?view=users`,{replaceState:!0}),b()}function Wa(G,v,b){s(v,"settings"),wt(`${kt}/org-admin?view=settings`,{replaceState:!0}),b()}function Ga(G,v,b,M){!e(v)&&!e(b)&&M(),s(v,!e(v))}function Ja(G,v,b,M,de){s(v,{email:"",name:"",password:"",enabled:!0},!0),s(b,null),s(M,!1),s(de,!0)}async function Xa(G,v,b,M,de){var T,Re;try{const C=v();if(!C)throw new Error("Authentication token not found. Please log in again.");await H.put(b("/org-admin/settings/signup"),e(M),{headers:{Authorization:`Bearer ${C}`,"Content-Type":"application/json"}}),await de(),alert("Signup settings updated successfully!")}catch(C){console.error("Error updating signup settings:",C),H.isAxiosError(C)&&((Re=(T=C.response)==null?void 0:T.data)!=null&&Re.detail)?alert(`Error: ${C.response.data.detail}`):alert("Error updating signup settings")}}async function Za(G,v,b,M,de){var T,Re;try{const C=v();if(!C)throw new Error("Authentication token not found. Please log in again.");await H.put(b("/org-admin/settings/api"),e(M),{headers:{Authorization:`Bearer ${C}`,"Content-Type":"application/json"}}),await de(),alert("API settings updated successfully!")}catch(C){console.error("Error updating API settings:",C),H.isAxiosError(C)&&((Re=(T=C.response)==null?void 0:T.data)!=null&&Re.detail)?alert(`Error: ${C.response.data.detail}`):alert("Error updating API settings")}}var er=d('<div class="mb-6 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline"> </span></div>'),tr=d('<div class="text-blue-200 text-xs mb-1"><svg class="inline h-3 w-3 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> System Admin View</div>'),ar=d('<div class="mt-4 bg-blue-800 bg-opacity-50 rounded-md p-4"><div class="flex items-center justify-between"><div><h4 class="text-sm font-medium text-blue-100 mb-1">Organization Signup Key</h4> <div class="font-mono text-white text-lg" id="signup-key-display"> </div></div> <button type="button" class="ml-4 px-3 py-1 bg-blue-600 hover:bg-blue-500 text-white text-sm rounded-md transition-colors"> </button></div> <p class="text-blue-200 text-xs mt-2">Share this key with users to allow them to sign up for your organization</p></div>'),rr=d('<div class="mt-4 bg-yellow-600 bg-opacity-50 rounded-md p-3"><p class="text-yellow-100 text-sm"><svg class="inline h-4 w-4 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg> No signup key configured. Users cannot self-register for this organization.</p></div>'),sr=d('<div class="bg-gradient-to-r from-blue-600 to-blue-700 rounded-lg shadow-lg mb-6"><div class="px-6 py-6 text-white"><div class="flex items-center justify-between"><div><h1 class="text-3xl font-bold mb-2"> </h1> <p class="text-blue-100 text-lg">Organization Administration</p></div> <div class="text-right"><!> <div class="text-blue-100 text-sm mb-1">Organization ID</div> <div class="font-mono text-white"> </div></div></div> <!></div></div>'),or=d('<div class="text-center py-12"><div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div> <p class="mt-2 text-gray-600">Loading dashboard...</p></div>'),ir=d('<span class="text-green-600">✓ APIs Working</span> <div class="text-sm text-gray-500 mt-1"> </div>',1),nr=d('<span class="text-yellow-600">⚠ Partial Setup</span> <div class="text-sm text-gray-500 mt-1"> </div>',1),lr=d('<span class="text-red-600">❌ API Errors</span> <div class="text-sm text-gray-500 mt-1">Check configuration</div>',1),dr=d('<span class="text-gray-600">⚠ Not Configured</span>'),vr=d('<div class="bg-white overflow-hidden shadow rounded-lg mb-6"><div class="px-4 py-5 sm:p-6"><h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">Organization Statistics</h3> <div class="grid grid-cols-1 gap-5 sm:grid-cols-3"><div class="bg-blue-50 overflow-hidden shadow rounded-lg"><div class="p-5"><div class="flex items-center"><div class="flex-shrink-0"><svg class="h-6 w-6 text-blue-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"></path></svg></div> <div class="ml-5 w-0 flex-1"><dl><dt class="text-sm font-medium text-gray-500 truncate">Total Users</dt> <dd class="text-lg font-medium text-gray-900"> </dd></dl></div></div></div></div> <div class="bg-green-50 overflow-hidden shadow rounded-lg"><div class="p-5"><div class="flex items-center"><div class="flex-shrink-0"><svg class="h-6 w-6 text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div> <div class="ml-5 w-0 flex-1"><dl><dt class="text-sm font-medium text-gray-500 truncate">Active Users</dt> <dd class="text-lg font-medium text-gray-900"> </dd></dl></div></div></div></div> <div class="bg-yellow-50 overflow-hidden shadow rounded-lg"><div class="p-5"><div class="flex items-center"><div class="flex-shrink-0"><svg class="h-6 w-6 text-yellow-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg></div> <div class="ml-5 w-0 flex-1"><dl><dt class="text-sm font-medium text-gray-500 truncate">Configuration</dt> <dd class="text-lg font-medium text-gray-900"><!></dd></dl></div></div></div></div></div></div></div> <div class="bg-white overflow-hidden shadow rounded-lg"><div class="px-4 py-5 sm:p-6"><h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">Quick Settings</h3> <div class="space-y-3"><div class="flex items-center justify-between"><span class="text-sm text-gray-600">Signup Enabled</span> <span> </span></div> <div class="flex items-center justify-between"><span class="text-sm text-gray-600">Signup Key Set</span> <span> </span></div> <div class="flex items-center justify-between"><span class="text-sm text-gray-600">API Configured</span> <span> </span></div></div></div></div>',1),ur=d('<div class="mb-6"><!> <!></div>'),cr=d('<div class="text-xs text-blue-600 mb-1"><svg class="inline h-3 w-3 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> System Admin View</div>'),pr=d('<div class="bg-white border-l-4 border-blue-500 shadow-sm rounded-lg mb-4"><div class="px-4 py-3"><div class="flex items-center justify-between"><div><h1 class="text-xl font-semibold text-gray-900"> </h1> <p class="text-sm text-gray-600">User Management</p></div> <div class="text-right text-sm text-gray-500"><!> </div></div></div></div>'),gr=d('<div class="mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline"> </span></div>'),br=d('<div class="text-center py-12"><div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div> <p class="mt-2 text-gray-600">Loading users...</p></div>'),mr=(G,v,b)=>v(e(b)),_r=(G,v,b)=>v(e(b)),xr=na('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"></path></svg>'),fr=na('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>'),hr=d('<tr class="hover:bg-gray-50"><td class="px-6 py-4 whitespace-nowrap align-top"><div class="text-sm font-medium text-gray-900"> </div></td><td class="px-6 py-4 whitespace-nowrap align-top"><div class="text-sm text-gray-800"> </div></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800"><span> </span></td><td class="px-6 py-4 whitespace-nowrap text-sm"><span> </span></td><td class="px-6 py-4 whitespace-nowrap text-sm font-medium"><button class="text-amber-600 hover:text-amber-800 mr-3" title="Change Password" aria-label="Change Password"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"></path></svg></button> <button><!></button></td></tr>'),yr=d('<div class="overflow-x-auto shadow-md sm:rounded-lg mb-6 border border-gray-200 svelte-1i4a06e"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider">Name</th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider">Email</th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider">Role</th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider">Status</th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider">Actions</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table></div>'),wr=d('<div class="mb-6"><!> <div class="flex justify-between items-center mb-4"><h2 class="text-2xl font-semibold text-gray-800">Manage Users</h2> <button class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Create User</button></div> <!> <!></div>'),kr=d('<div class="text-xs text-blue-600 mb-1"><svg class="inline h-3 w-3 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> System Admin View</div>'),Ar=d('<div class="bg-white border-l-4 border-green-500 shadow-sm rounded-lg mb-4"><div class="px-4 py-3"><div class="flex items-center justify-between"><div><h1 class="text-xl font-semibold text-gray-900"> </h1> <p class="text-sm text-gray-600">Organization Settings</p></div> <div class="text-right text-sm text-gray-500"><!> </div></div></div></div>'),zr=d('<div class="mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline"> </span></div>'),Cr=d('<div class="text-center py-12"><div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div> <p class="mt-2 text-gray-600">Loading settings...</p></div>'),Er=d('<div><label for="signup-key" class="block text-sm font-medium text-gray-700">Signup Key</label> <input type="text" id="signup-key" class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="Enter unique signup key"> <p class="mt-1 text-sm text-gray-500">Unique key for users to signup to this organization (8-64 characters)</p></div>'),Sr=d('<div class="py-1"> </div>'),Pr=d('<div class="py-1 font-medium"> </div>'),Ur=d('<div class="text-xs text-gray-500"><div class="max-h-20 overflow-y-auto"><!> <!></div></div>'),$r=d('<div class="text-sm text-gray-600 mb-2"><strong> </strong> models available</div> <!>',1),jr=d('<div class="text-sm text-red-600"> </div>'),Ir=d('<div class="text-xs text-gray-400 mt-2"> </div>'),Mr=d('<div class="border rounded-lg p-4"><div class="flex items-center justify-between mb-2"><h4 class="font-medium text-gray-900 capitalize"> </h4> <span> </span></div> <!> <!></div>'),Or=d('<div class="text-center py-8 text-gray-500"><p>No API providers configured</p> <p class="text-sm mt-1">Configure OpenAI or Ollama below to get started</p></div>'),Br=d('<div class="bg-white overflow-hidden shadow rounded-lg mb-6"><div class="px-4 py-5 sm:p-6"><h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">API Status Overview</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"></div> <!></div></div>'),Lr=(G,v,b,M)=>v(b(),M()),Nr=d('<span class="inline-block px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded"> </span>'),Tr=d('<div class="flex flex-wrap gap-1"></div>'),qr=d('<p class="text-gray-500 text-sm italic">No models enabled</p>'),Dr=d('<div class="mb-6 border rounded-lg p-4"><div class="flex items-center justify-between mb-3"><h4 class="font-medium text-gray-900 capitalize"> </h4> <button type="button" class="px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700">Manage Models</button></div> <div class="text-sm text-gray-600 mb-2"><strong> </strong> </div> <div class="bg-gray-50 rounded p-3 max-h-32 overflow-y-auto"><!></div></div>'),Fr=d('<div class="text-center py-8 text-gray-500"><p>No API providers configured or available.</p></div>'),Rr=d('<div class="bg-white overflow-hidden shadow rounded-lg mb-6"><div class="px-4 py-5 sm:p-6"><h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">Signup Settings</h3> <div class="space-y-4"><div class="flex items-center"><input id="signup-enabled" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"> <label for="signup-enabled" class="ml-2 block text-sm text-gray-900">Enable organization-specific signup</label></div> <!> <button class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Update Signup Settings</button></div></div></div> <!> <div class="bg-white overflow-hidden shadow rounded-lg"><div class="px-4 py-5 sm:p-6"><h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">API Configuration</h3> <div class="space-y-4"><div><label for="openai-key" class="block text-sm font-medium text-gray-700">OpenAI API Key</label> <input type="password" id="openai-key" class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"> <p class="mt-1 text-sm text-gray-500"><!></p></div> <div><label for="openai-base-url" class="block text-sm font-medium text-gray-700">OpenAI Base URL</label> <input type="url" id="openai-base-url" class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="https://api.openai.com/v1"> <p class="mt-1 text-sm text-gray-500">Custom OpenAI API endpoint. Leave empty to use default (https://api.openai.com/v1).</p></div> <div><label for="ollama-base-url" class="block text-sm font-medium text-gray-700">Ollama Server URL</label> <input type="url" id="ollama-base-url" class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="http://localhost:11434"> <p class="mt-1 text-sm text-gray-500">URL of your Ollama server. This can be a local or remote Ollama installation.</p></div> <div><h4 class="block text-sm font-medium text-gray-700 mb-3">Model Selection</h4> <p class="text-sm text-gray-500 mb-4">Configure which models are available to users in your organization</p> <!></div> <button class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Update API Settings</button></div></div></div>',1),Vr=d('<div class="mb-6"><!> <h2 class="text-2xl font-semibold text-gray-800 mb-4">Configuration</h2> <!> <!></div>'),Kr=d('<div class="mt-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline">User created successfully!</span></div>'),Yr=d('<div class="mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline"> </span></div>'),Hr=d('<form class="mt-4"><!> <div class="mb-4 text-left"><label for="email" class="block text-gray-700 text-sm font-bold mb-2">Email *</label> <input type="email" id="email" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required></div> <div class="mb-4 text-left"><label for="name" class="block text-gray-700 text-sm font-bold mb-2">Name *</label> <input type="text" id="name" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required></div> <div class="mb-4 text-left"><label for="password" class="block text-gray-700 text-sm font-bold mb-2">Password *</label> <input type="password" id="password" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required></div> <div class="mb-6 text-left"><div class="flex items-center"><input type="checkbox" id="enabled" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"> <label for="enabled" class="ml-2 block text-sm text-gray-900">User enabled</label></div></div> <div class="flex items-center justify-between"><button type="button" class="bg-gray-300 hover:bg-gray-400 text-gray-800 py-2 px-4 rounded focus:outline-none focus:shadow-outline">Cancel</button> <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline disabled:opacity-50"><!></button></div></form>'),Qr=d('<div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center"><div class="relative mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white"><div class="mt-3 text-center"><h3 class="text-lg leading-6 font-medium text-gray-900">Create New User</h3> <!></div></div></div>'),Wr=d('<div class="mt-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline">Password changed successfully!</span></div>'),Gr=d('<div class="mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline"> </span></div>'),Jr=d('<form class="mt-4"><!> <div class="mb-4 text-left"><label for="new-password" class="block text-gray-700 text-sm font-bold mb-2">New Password *</label> <input type="password" id="new-password" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required autocomplete="new-password" minlength="8"> <p class="text-gray-500 text-xs italic mt-1">At least 8 characters recommended</p></div> <div class="flex items-center justify-between"><button type="button" class="bg-gray-300 hover:bg-gray-400 text-gray-800 py-2 px-4 rounded focus:outline-none focus:shadow-outline">Cancel</button> <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline disabled:opacity-50"> </button></div></form>'),Xr=d('<div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center"><div class="relative mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white"><div class="mt-3 text-center"><h3 class="text-lg leading-6 font-medium text-gray-900">Change Password</h3> <p class="text-sm text-gray-500 mt-1"> </p> <!></div></div></div>'),Zr=(G,v,b)=>{G.target.checked?s(v,[...e(v),e(b)],!0):s(v,e(v).filter(M=>M!==e(b)),!0)},es=d('<label class="flex items-center p-2 hover:bg-gray-50 border-b last:border-b-0"><input type="checkbox" class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"> <span class="text-sm truncate"> </span></label>'),ts=d('<div class="p-4 text-center text-gray-500 text-sm">No models enabled</div>'),as=(G,v,b)=>{G.target.checked?s(v,[...e(v),e(b)],!0):s(v,e(v).filter(M=>M!==e(b)),!0)},rs=d('<label class="flex items-center p-2 hover:bg-gray-50 border-b last:border-b-0"><input type="checkbox" class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"> <span class="text-sm truncate"> </span></label>'),ss=d('<div class="p-4 text-center text-gray-500 text-sm">All models enabled</div>'),os=d('<div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"><div class="relative top-20 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white"><div class="mt-3"><div class="flex items-center justify-between mb-4"><h3 class="text-lg font-medium text-gray-900 capitalize"> </h3> <button type="button" class="text-gray-400 hover:text-gray-600" aria-label="Close modal"><svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="grid grid-cols-1 md:grid-cols-5 gap-4 h-96"><div class="md:col-span-2 border rounded-lg p-4"><div class="flex items-center justify-between mb-3"><h4 class="font-medium text-gray-900">Enabled Models</h4> <span class="text-sm text-gray-500"> </span></div> <input type="text" placeholder="Search enabled models..." class="w-full mb-3 px-3 py-2 border border-gray-300 rounded-md text-sm"> <div class="border rounded max-h-64 overflow-y-auto"><!> <!></div></div> <div class="flex flex-col justify-center items-center space-y-2"><button type="button" class="px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50" title="Move all models to enabled">&lt;&lt;</button> <button type="button" class="px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50" title="Move selected models to enabled">&lt;</button> <button type="button" class="px-3 py-2 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50" title="Move selected models to disabled">&gt;</button> <button type="button" class="px-3 py-2 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50" title="Move all models to disabled">&gt;&gt;</button></div> <div class="md:col-span-2 border rounded-lg p-4"><div class="flex items-center justify-between mb-3"><h4 class="font-medium text-gray-900">Available Models</h4> <span class="text-sm text-gray-500"> </span></div> <input type="text" placeholder="Search available models..." class="w-full mb-3 px-3 py-2 border border-gray-300 rounded-md text-sm"> <div class="border rounded max-h-64 overflow-y-auto"><!> <!></div></div></div> <div class="flex items-center justify-end mt-6 pt-4 border-t space-x-3"><button type="button" class="px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400">Cancel</button> <button type="button" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Save Changes</button></div></div></div></div>'),is=d('<div class="min-h-screen bg-gray-50"><nav class="bg-white shadow-sm border-b border-gray-200"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="flex justify-between h-16"><div class="flex"><div class="flex-shrink-0 flex items-center"><h1 class="text-xl font-semibold text-gray-800">Organization Admin</h1></div> <div class="ml-6 flex space-x-8"><button>Dashboard</button> <button>Users</button> <button>Settings</button></div></div> <div class="flex items-center"><span class="text-sm text-gray-600"> </span></div></div></div></nav> <main class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"><div class="px-4 py-6 sm:px-0"><!> <!> <!> <!></div></main></div> <!> <!> <!>',1);function xs(G,v){$a(v,!0);const[b,M]=Na(),de=()=>Ta(qa,"$page",b);let T=y(null);const Re="/creator/admin";let C=y("dashboard"),Ve=y(null),w=y(null),vt=y(!1),Me=y(we([])),ut=y(!1),Ke=y(null),At=y(!1),ae=y(we({email:"",name:"",password:"",enabled:!0})),ct=y(!1),Ae=y(null),pt=y(!1),zt=y(!1),Pe=y(we({user_id:null,user_name:"",user_email:"",new_password:""})),gt=y(!1),Ne=y(null),bt=y(!1),mt=y(we({signup_enabled:!1,signup_key:"",signup_key_masked:!1})),me=y(we({openai_api_key_set:!1,openai_base_url:"https://api.openai.com/v1",ollama_base_url:"http://localhost:11434",available_models:[],model_limits:{},api_endpoints:{}})),_t=y(!1),Ye=y(null),He=y(we({signup_enabled:!1,signup_key:""})),ce=y(we({openai_api_key:"",openai_base_url:"",ollama_base_url:"",available_models:[],model_limits:{},selected_models:{}})),Ct=y(!1),Et=y(""),la=y(we([])),Ue=y(we([])),Oe=y(we([])),Ze=y(we([])),et=y(we([])),xt=y(""),ft=y(""),ht=y(""),St=y(!1),ve=y(null);function da(i,l){var o;s(Et,i,!0),s(la,[...l],!0);const c=((o=e(ce).selected_models)==null?void 0:o[i])||[];s(Ue,[...c],!0),s(Oe,l.filter(u=>!c.includes(u)),!0),s(Ze,[],!0),s(et,[],!0),s(xt,""),s(ft,""),s(Ct,!0)}function Pt(){s(Ct,!1)}function Be(){return!e(T)||!e(T).isLoggedIn||!e(T).token?(console.error("No authentication token available. User must be logged in."),null):e(T).token}function oe(i){return`${Re}${i}`}async function Ut(){var i,l,c;if(e(vt)){console.log("Already loading dashboard, skipping duplicate request");return}console.log("Fetching organization dashboard..."),s(vt,!0),s(Ve,null);try{const o=Be();if(!o)throw new Error("Authentication token not found. Please log in again.");const u=e(ve)?oe(`/org-admin/dashboard?org=${e(ve)}`):oe("/org-admin/dashboard");console.log(`Fetching dashboard from: ${u}`);const h=await H.get(u,{headers:{Authorization:`Bearer ${o}`}});console.log("Dashboard API Response:",h.data),s(w,h.data,!0)}catch(o){console.error("Error fetching dashboard:",o),H.isAxiosError(o)&&((i=o.response)==null?void 0:i.status)===403?s(Ve,"Access denied. Organization admin privileges required."):H.isAxiosError(o)&&((c=(l=o.response)==null?void 0:l.data)!=null&&c.detail)?s(Ve,o.response.data.detail,!0):o instanceof Error?s(Ve,o.message,!0):s(Ve,"An unknown error occurred while fetching dashboard."),s(w,null)}finally{s(vt,!1)}}async function va(){try{const i=Be();if(!i)throw new Error("Authentication token not found");const l=e(ve)?oe(`/org-admin/settings/signup?org=${e(ve)}`):oe("/org-admin/settings/signup"),c=await H.get(l,{headers:{Authorization:`Bearer ${i}`}});s(ht,c.data.signup_key||"",!0)}catch(i){console.error("Error fetching signup key:",i),s(ht,"")}}async function yt(){var i,l,c;if(e(ut)){console.log("Already loading users, skipping duplicate request");return}console.log("Fetching organization users..."),s(ut,!0),s(Ke,null);try{const o=Be();if(!o)throw new Error("Authentication token not found. Please log in again.");const u=e(ve)?oe(`/org-admin/users?org=${e(ve)}`):oe("/org-admin/users");console.log(`Fetching users from: ${u}`);const h=await H.get(u,{headers:{Authorization:`Bearer ${o}`}});console.log("Users API Response:",h.data),s(Me,h.data||[],!0),console.log(`Fetched ${e(Me).length} users`)}catch(o){console.error("Error fetching users:",o),H.isAxiosError(o)&&((i=o.response)==null?void 0:i.status)===403?s(Ke,"Access denied. Organization admin privileges required."):H.isAxiosError(o)&&((c=(l=o.response)==null?void 0:l.data)!=null&&c.detail)?s(Ke,o.response.data.detail,!0):o instanceof Error?s(Ke,o.message,!0):s(Ke,"An unknown error occurred while fetching users."),s(Me,[],!0)}finally{s(ut,!1)}}async function ua(i){var o,u;const l=!i.enabled,c=l?"enable":"disable";if(e(T)&&e(T).email===i.email&&!l){alert("You cannot disable your own account. Please ask another administrator to disable your account if needed.");return}if(confirm(`Are you sure you want to ${c} ${i.name} (${i.email})?`))try{const h=Be();if(!h)throw new Error("Authentication token not found. Please log in again.");const D=oe(`/org-admin/users/${i.id}`);console.log(`${c==="enable"?"Enabling":"Disabling"} user ${i.email} at: ${D}`);const U=await H.put(D,{enabled:l},{headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json"}});console.log(`User ${c} response:`,U.data);const O=e(Me).findIndex(f=>f.id===i.id);O!==-1&&(e(Me)[O].enabled=l,s(Me,[...e(Me)],!0)),alert(`User ${i.name} has been ${l?"enabled":"disabled"} successfully.`)}catch(h){console.error(`Error ${c}ing user:`,h);let D=`Failed to ${c} user.`;H.isAxiosError(h)&&((u=(o=h.response)==null?void 0:o.data)!=null&&u.detail)?D=h.response.data.detail:h instanceof Error&&(D=h.message),alert(`Error: ${D}`)}}function Tt(){s(At,!1),s(Ae,null),s(pt,!1)}function ca(i){s(Pe,{user_id:i.id,user_name:i.name,user_email:i.email,new_password:""},!0),s(Ne,null),s(bt,!1),s(zt,!0)}function qt(){s(zt,!1),s(Ne,null),s(bt,!1)}async function pa(i){var l,c;if(i.preventDefault(),!e(Pe).new_password){s(Ne,"Please enter a new password.");return}if(e(Pe).new_password.length<8){s(Ne,"Password should be at least 8 characters.");return}s(Ne,null),s(gt,!0);try{const o=Be();if(!o)throw new Error("Authentication token not found. Please log in again.");const u=oe(`/org-admin/users/${e(Pe).user_id}/password`);console.log(`Changing password for user ${e(Pe).user_email} at: ${u}`);const h=await H.post(u,{new_password:e(Pe).new_password},{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}});console.log("Change password response:",h.data),s(bt,!0),setTimeout(()=>{qt()},1500)}catch(o){console.error("Error changing password:",o);let u="Failed to change password.";H.isAxiosError(o)&&((c=(l=o.response)==null?void 0:l.data)!=null&&c.detail)?u=o.response.data.detail:o instanceof Error&&(u=o.message),s(Ne,u,!0)}finally{s(gt,!1)}}async function ga(i){var l,c,o;if(i.preventDefault(),!e(ae).email||!e(ae).name||!e(ae).password){s(Ae,"Please fill in all required fields.");return}if(!e(ae).email.includes("@")){s(Ae,"Please enter a valid email address.");return}s(Ae,null),s(ct,!0);try{const u=Be();if(!u)throw new Error("Authentication token not found. Please log in again.");const h=oe("/org-admin/users");console.log(`Creating user at: ${h}`);const D=await H.post(h,{email:e(ae).email,name:e(ae).name,password:e(ae).password,enabled:e(ae).enabled},{headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"}});console.log("Create user response:",D.data),s(pt,!0),setTimeout(()=>{Tt(),yt()},1500)}catch(u){console.error("Error creating user:",u),H.isAxiosError(u)&&((l=u.response)==null?void 0:l.status)===403?s(Ae,"Access denied. Organization admin privileges required."):H.isAxiosError(u)&&((o=(c=u.response)==null?void 0:c.data)!=null&&o.detail)?s(Ae,u.response.data.detail,!0):u instanceof Error?s(Ae,u.message,!0):s(Ae,"An unknown error occurred while creating user.")}finally{s(ct,!1)}}async function rt(){var i,l,c;if(e(_t)){console.log("Already loading settings, skipping duplicate request");return}console.log("Fetching organization settings..."),s(_t,!0),s(Ye,null);try{const o=Be();if(!o)throw new Error("Authentication token not found. Please log in again.");const u=e(ve)?oe(`/org-admin/settings/signup?org=${e(ve)}`):oe("/org-admin/settings/signup"),h=await H.get(u,{headers:{Authorization:`Bearer ${o}`}}),D=e(ve)?oe(`/org-admin/settings/api?org=${e(ve)}`):oe("/org-admin/settings/api"),U=await H.get(D,{headers:{Authorization:`Bearer ${o}`}});s(mt,h.data,!0),s(me,U.data,!0),s(He,{signup_enabled:e(mt).signup_enabled,signup_key:e(mt).signup_key||""},!0),s(ce,{openai_api_key:"",openai_base_url:e(me).openai_base_url||"https://api.openai.com/v1",ollama_base_url:e(me).ollama_base_url||"http://localhost:11434",available_models:Array.isArray(e(me).available_models)?[...e(me).available_models]:[],model_limits:{...e(me).model_limits||{}},selected_models:{...e(me).selected_models||{}}},!0)}catch(o){console.error("Error fetching settings:",o),H.isAxiosError(o)&&((i=o.response)==null?void 0:i.status)===403?s(Ye,"Access denied. Organization admin privileges required."):H.isAxiosError(o)&&((c=(l=o.response)==null?void 0:l.data)!=null&&c.detail)?s(Ye,o.response.data.detail,!0):o instanceof Error?s(Ye,o.message,!0):s(Ye,"An unknown error occurred while fetching settings.")}finally{s(_t,!1)}}ja(()=>{if(console.log("Organization admin page mounted"),Da.subscribe(l=>{s(T,l,!0)}),!e(T)||!e(T).isLoggedIn){console.log("User not logged in, redirecting to login"),wt(`${kt}/auth`,{replaceState:!0});return}const i=de().url.searchParams.get("view")||"dashboard";s(C,i,!0),s(ve,de().url.searchParams.get("org"),!0),e(C)==="dashboard"?Ut():e(C)==="users"?yt():e(C)==="settings"&&rt()}),Ia(()=>{console.log("Organization admin page unmounting")}),Ma(()=>{e(C)==="dashboard"&&!e(w)?Ut():e(C)==="users"&&e(Me).length===0?yt():e(C)==="settings"&&!e(mt)&&rt()});var Dt=is();Ua(i=>{Ba.title="Organization Admin - LAMB"});var $t=Fe(Dt),jt=a($t),Ft=a(jt),Rt=a(Ft),It=a(Rt),Vt=r(a(It),2),Mt=a(Vt);Mt.__click=[Ha,C,Ut];var Ot=r(Mt,2);Ot.__click=[Qa,C,yt];var Kt=r(Ot,2);Kt.__click=[Wa,C,rt],t(Vt),t(It);var Yt=r(It,2),Ht=a(Yt),ba=a(Ht,!0);t(Ht),t(Yt),t(Rt),t(Ft),t(jt);var Qt=r(jt,2),Wt=a(Qt),Gt=a(Wt);{var ma=i=>{var l=er(),c=a(l),o=a(c,!0);t(c),t(l),P(()=>g(o,e(Ve))),n(i,l)};m(Gt,i=>{e(Ve)&&i(ma)})}var Jt=r(Gt,2);{var _a=i=>{var l=ur(),c=a(l);{var o=U=>{var O=sr(),f=a(O),k=a(f),_=a(k),A=a(_),E=a(A,!0);t(A),ke(2),t(_);var $=r(_,2),j=a($);{var x=S=>{var q=tr();n(S,q)};m(j,S=>{e(ve)&&S(x)})}var F=r(j,4),Q=a(F,!0);t(F),t($),t(k);var I=r(k,2);{var B=S=>{var q=ar(),X=a(q),Z=a(X),z=r(a(Z),2),K=a(z,!0);t(z),t(Z);var ie=r(Z,2);ie.__click=[Ga,St,ht,va];var ne=a(ie,!0);t(ie),t(X),ke(2),t(q),P(()=>{g(K,e(St)?e(ht):"••••••••••••••••"),g(ne,e(St)?"Hide":"Show")}),n(S,q)},R=S=>{var q=rr();n(S,q)};m(I,S=>{e(w).settings.signup_key_set?S(B):S(R,!1)})}t(f),t(O),P(()=>{g(E,e(w).organization.name),g(Q,e(w).organization.slug)}),n(U,O)};m(c,U=>{e(w)&&U(o)})}var u=r(c,2);{var h=U=>{var O=or();n(U,O)},D=(U,O)=>{{var f=k=>{var _=vr(),A=Fe(_),E=a(A),$=r(a(E),2),j=a($),x=a(j),F=a(x),Q=r(a(F),2),I=a(Q),B=r(a(I),2),R=a(B,!0);t(B),t(I),t(Q),t(F),t(x),t(j);var S=r(j,2),q=a(S),X=a(q),Z=r(a(X),2),z=a(Z),K=r(a(z),2),ie=a(K,!0);t(K),t(z),t(Z),t(X),t(q),t(S);var ne=r(S,2),_e=a(ne),Le=a(_e),xe=r(a(Le),2),ze=a(xe),se=r(a(ze),2),N=a(se);{var J=he=>{var ge=sa(),We=Fe(ge);{var Ge=ye=>{var qe=ir(),De=r(Fe(qe),2),Je=a(De);t(De),P(()=>g(Je,`${e(w).api_status.summary.total_models??""} models available`)),n(ye,qe)},st=(ye,qe)=>{{var De=ee=>{var L=nr(),te=r(Fe(L),2),be=a(te);t(te),P(()=>g(be,`${e(w).api_status.summary.working_count??""}/${e(w).api_status.summary.configured_count??""} providers working`)),n(ee,L)},Je=(ee,L)=>{{var te=re=>{var Se=lr();ke(2),n(re,Se)},be=re=>{var Se=dr();n(re,Se)};m(ee,re=>{e(w).api_status.overall_status==="error"?re(te):re(be,!1)},L)}};m(ye,ee=>{e(w).api_status.overall_status==="partial"?ee(De):ee(Je,!1)},qe)}};m(We,ye=>{e(w).api_status.overall_status==="working"?ye(Ge):ye(st,!1)})}n(he,ge)},pe=he=>{var ge=lt();P(()=>g(ge,`${e(w).settings.api_configured?"✓":"⚠"} API Setup`)),n(he,ge)};m(N,he=>{e(w).api_status?he(J):he(pe,!1)})}t(se),t(ze),t(xe),t(Le),t(_e),t(ne),t($),t(E),t(A);var W=r(A,2),p=a(W),V=r(a(p),2),le=a(V),Ce=r(a(le),2),tt=a(Ce,!0);t(Ce),t(le);var Ee=r(le,2),fe=r(a(Ee),2),$e=a(fe,!0);t(fe),t(Ee);var Te=r(Ee,2),Y=r(a(Te),2),Qe=a(Y,!0);t(Y),t(Te),t(V),t(p),t(W),P(()=>{g(R,e(w).stats.total_users),g(ie,e(w).stats.active_users),je(Ce,1,`text-sm font-medium ${e(w).settings.signup_enabled?"text-green-600":"text-gray-400"}`),g(tt,e(w).settings.signup_enabled?"Yes":"No"),je(fe,1,`text-sm font-medium ${e(w).settings.signup_key_set?"text-green-600":"text-gray-400"}`),g($e,e(w).settings.signup_key_set?"Yes":"No"),je(Y,1,`text-sm font-medium ${e(w).settings.api_configured?"text-green-600":"text-gray-400"}`),g(Qe,e(w).settings.api_configured?"Yes":"No")}),n(k,_)};m(U,k=>{e(w)&&k(f)},O)}};m(u,U=>{e(vt)?U(h):U(D,!1)})}t(l),n(i,l)};m(Jt,i=>{e(C)==="dashboard"&&i(_a)})}var Xt=r(Jt,2);{var xa=i=>{var l=wr(),c=a(l);{var o=_=>{var A=pr(),E=a(A),$=a(E),j=a($),x=a(j),F=a(x,!0);t(x),ke(2),t(j);var Q=r(j,2),I=a(Q);{var B=S=>{var q=cr();n(S,q)};m(I,S=>{e(ve)&&S(B)})}var R=r(I);t(Q),t($),t(E),t(A),P(()=>{g(F,e(w).organization.name),g(R,` ${e(w).stats.total_users??""} users • ${e(w).stats.active_users??""} active`)}),n(_,A)};m(c,_=>{e(w)&&_(o)})}var u=r(c,2),h=r(a(u),2);h.__click=[Ja,ae,Ae,pt,At],t(u);var D=r(u,2);{var U=_=>{var A=gr(),E=a(A),$=a(E,!0);t(E),t(A),P(()=>g($,e(Ke))),n(_,A)};m(D,_=>{e(Ke)&&_(U)})}var O=r(D,2);{var f=_=>{var A=br();n(_,A)},k=_=>{var A=yr(),E=a(A),$=r(a(E));Xe($,21,()=>e(Me),j=>j.id,(j,x,F,Q)=>{var I=hr(),B=a(I),R=a(B),S=a(R,!0);t(R),t(B);var q=r(B),X=a(q),Z=a(X,!0);t(X),t(q);var z=r(q),K=a(z),ie=a(K,!0);t(K),t(z);var ne=r(z),_e=a(ne),Le=a(_e,!0);t(_e),t(ne);var xe=r(ne),ze=a(xe);ze.__click=[mr,ca,x];var se=r(ze,2);se.__click=[_r,ua,x];var N=a(se);{var J=W=>{var p=xr();n(W,p)},pe=W=>{var p=fr();n(W,p)};m(N,W=>{e(x).enabled?W(J):W(pe,!1)})}t(se),t(xe),t(I),P(()=>{g(S,e(x).name||"-"),g(Z,e(x).email),je(K,1,`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${e(x).role==="admin"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`),g(ie,e(x).role),je(_e,1,`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${e(x).enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`),g(Le,e(x).enabled?"Active":"Disabled"),je(se,1,La(e(T)&&e(T).email===e(x).email&&e(x).enabled?"text-gray-400 cursor-not-allowed":"text-blue-600 hover:text-blue-800")),dt(se,"title",e(T)&&e(T).email===e(x).email&&e(x).enabled?"You cannot disable your own account":e(x).enabled?"Disable User":"Enable User"),dt(se,"aria-label",e(T)&&e(T).email===e(x).email&&e(x).enabled?"You cannot disable your own account":e(x).enabled?"Disable User":"Enable User"),se.disabled=e(T)&&e(T).email===e(x).email&&e(x).enabled}),n(j,I)}),t($),t(E),t(A),n(_,A)};m(O,_=>{e(ut)?_(f):_(k,!1)})}t(l),n(i,l)};m(Xt,i=>{e(C)==="users"&&i(xa)})}var fa=r(Xt,2);{var ha=i=>{var l=Vr(),c=a(l);{var o=f=>{var k=Ar(),_=a(k),A=a(_),E=a(A),$=a(E),j=a($,!0);t($),ke(2),t(E);var x=r(E,2),F=a(x);{var Q=B=>{var R=kr();n(B,R)};m(F,B=>{e(ve)&&B(Q)})}var I=r(F);t(x),t(A),t(_),t(k),P(()=>{g(j,e(w).organization.name),g(I,` ID: ${e(w).organization.slug??""}`)}),n(f,k)};m(c,f=>{e(w)&&f(o)})}var u=r(c,4);{var h=f=>{var k=zr(),_=a(k),A=a(_,!0);t(_),t(k),P(()=>g(A,e(Ye))),n(f,k)};m(u,f=>{e(Ye)&&f(h)})}var D=r(u,2);{var U=f=>{var k=Cr();n(f,k)},O=f=>{var k=Rr(),_=Fe(k),A=a(_),E=r(a(A),2),$=a(E),j=a($);ue(j),ke(2),t($);var x=r($,2);{var F=p=>{var V=Er(),le=r(a(V),2);ue(le),ke(2),t(V),Ie(le,()=>e(He).signup_key,Ce=>e(He).signup_key=Ce),n(p,V)};m(x,p=>{e(He).signup_enabled&&p(F)})}var Q=r(x,2);Q.__click=[Xa,Be,oe,He,rt],t(E),t(A),t(_);var I=r(_,2);{var B=p=>{var V=Br(),le=a(V),Ce=r(a(le),2);Xe(Ce,21,()=>Object.entries(e(w).api_status.providers),at,(fe,$e)=>{let Te=()=>e($e)[0],Y=()=>e($e)[1];var Qe=Mr(),he=a(Qe),ge=a(he),We=a(ge,!0);t(ge);var Ge=r(ge,2),st=a(Ge,!0);t(Ge),t(he);var ye=r(he,2);{var qe=L=>{var te=$r(),be=Fe(te),re=a(be),Se=a(re,!0);t(re),ke(),t(be);var Bt=r(be,2);{var za=Lt=>{var Nt=Ur(),ta=a(Nt),aa=a(ta);Xe(aa,17,()=>Y().models.slice(0,10),at,(ot,it)=>{var nt=Sr(),Sa=a(nt,!0);t(nt),P(()=>g(Sa,e(it))),n(ot,nt)});var Ca=r(aa,2);{var Ea=ot=>{var it=Pr(),nt=a(it);t(it),P(()=>g(nt,`...and ${Y().models.length-10} more`)),n(ot,it)};m(Ca,ot=>{Y().models.length>10&&ot(Ea)})}t(ta),t(Nt),n(Lt,Nt)};m(Bt,Lt=>{Y().models&&Y().models.length>0&&Lt(za)})}P(()=>g(Se,Y().model_count)),n(L,te)},De=(L,te)=>{{var be=re=>{var Se=jr(),Bt=a(Se,!0);t(Se),P(()=>g(Bt,Y().error)),n(re,Se)};m(L,re=>{Y().error&&re(be)},te)}};m(ye,L=>{Y().status==="working"?L(qe):L(De,!1)})}var Je=r(ye,2);{var ee=L=>{var te=Ir(),be=a(te,!0);t(te),P(()=>g(be,Y().api_base)),n(L,te)};m(Je,L=>{Y().api_base&&L(ee)})}t(Qe),P(()=>{g(We,Te()),je(Ge,1,`px-2 py-1 text-xs rounded-full ${Y().status==="working"?"bg-green-100 text-green-800":Y().status==="error"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`),g(st,Y().status)}),n(fe,Qe)}),t(Ce);var tt=r(Ce,2);{var Ee=fe=>{var $e=Or();n(fe,$e)};m(tt,fe=>{Object.keys(e(w).api_status.providers).length===0&&fe(Ee)})}t(le),t(V),n(p,V)};m(I,p=>{e(w)&&e(w).api_status&&p(B)})}var R=r(I,2),S=a(R),q=r(a(S),2),X=a(q),Z=r(a(X),2);ue(Z);var z=r(Z,2),K=a(z);{var ie=p=>{var V=lt("API key is currently set. Enter a new key to replace it.");n(p,V)},ne=p=>{var V=lt("Enter your OpenAI API key to enable AI features.");n(p,V)};m(K,p=>{e(me).openai_api_key_set?p(ie):p(ne,!1)})}t(z),t(X);var _e=r(X,2),Le=r(a(_e),2);ue(Le),ke(2),t(_e);var xe=r(_e,2),ze=r(a(xe),2);ue(ze),ke(2),t(xe);var se=r(xe,2),N=r(a(se),4);{var J=p=>{var V=sa(),le=Fe(V);Xe(le,17,()=>Object.entries(e(me).available_models),at,(Ce,tt)=>{let Ee=()=>e(tt)[0],fe=()=>e(tt)[1];var $e=Dr(),Te=a($e),Y=a(Te),Qe=a(Y,!0);t(Y);var he=r(Y,2);he.__click=[Lr,da,Ee,fe],t(Te);var ge=r(Te,2),We=a(ge),Ge=a(We,!0);t(We);var st=r(We);t(ge);var ye=r(ge,2),qe=a(ye);{var De=ee=>{var L=Tr();Xe(L,21,()=>e(ce).selected_models[Ee()],at,(te,be)=>{var re=Nr(),Se=a(re,!0);t(re),P(()=>g(Se,e(be))),n(te,re)}),t(L),n(ee,L)},Je=ee=>{var L=qr();n(ee,L)};m(qe,ee=>{var L,te;((te=(L=e(ce).selected_models)==null?void 0:L[Ee()])==null?void 0:te.length)>0?ee(De):ee(Je,!1)})}t(ye),t($e),P(()=>{var ee,L;g(Qe,Ee()),g(Ge,((L=(ee=e(ce).selected_models)==null?void 0:ee[Ee()])==null?void 0:L.length)||0),g(st,` of ${fe().length??""} models enabled`)}),n(Ce,$e)}),n(p,V)},pe=p=>{var V=Fr();n(p,V)};m(N,p=>{e(me).available_models&&Object.keys(e(me).available_models).length>0?p(J):p(pe,!1)})}t(se);var W=r(se,2);W.__click=[Za,Be,oe,ce,rt],t(q),t(S),t(R),P(()=>dt(Z,"placeholder",e(me).openai_api_key_set?"••••••••••••••••":"Enter OpenAI API key")),ia(j,()=>e(He).signup_enabled,p=>e(He).signup_enabled=p),Ie(Z,()=>e(ce).openai_api_key,p=>e(ce).openai_api_key=p),Ie(Le,()=>e(ce).openai_base_url,p=>e(ce).openai_base_url=p),Ie(ze,()=>e(ce).ollama_base_url,p=>e(ce).ollama_base_url=p),n(f,k)};m(D,f=>{e(_t)?f(U):f(O,!1)})}t(l),n(i,l)};m(fa,i=>{e(C)==="settings"&&i(ha)})}t(Wt),t(Qt),t($t);var Zt=r($t,2);{var ya=i=>{var l=Qr(),c=a(l),o=a(c),u=r(a(o),2);{var h=U=>{var O=Kr();n(U,O)},D=U=>{var O=Hr(),f=a(O);{var k=z=>{var K=Yr(),ie=a(K),ne=a(ie,!0);t(ie),t(K),P(()=>g(ne,e(Ae))),n(z,K)};m(f,z=>{e(Ae)&&z(k)})}var _=r(f,2),A=r(a(_),2);ue(A),t(_);var E=r(_,2),$=r(a(E),2);ue($),t(E);var j=r(E,2),x=r(a(j),2);ue(x),t(j);var F=r(j,2),Q=a(F),I=a(Q);ue(I),ke(2),t(Q),t(F);var B=r(F,2),R=a(B);R.__click=Tt;var S=r(R,2),q=a(S);{var X=z=>{var K=lt("Creating...");n(z,K)},Z=z=>{var K=lt("Create User");n(z,K)};m(q,z=>{e(ct)?z(X):z(Z,!1)})}t(S),t(B),t(O),P(()=>S.disabled=e(ct)),ra("submit",O,ga),Ie(A,()=>e(ae).email,z=>e(ae).email=z),Ie($,()=>e(ae).name,z=>e(ae).name=z),Ie(x,()=>e(ae).password,z=>e(ae).password=z),ia(I,()=>e(ae).enabled,z=>e(ae).enabled=z),n(U,O)};m(u,U=>{e(pt)?U(h):U(D,!1)})}t(o),t(c),t(l),n(i,l)};m(Zt,i=>{e(At)&&i(ya)})}var ea=r(Zt,2);{var wa=i=>{var l=Xr(),c=a(l),o=a(c),u=r(a(o),2),h=a(u);t(u);var D=r(u,2);{var U=f=>{var k=Wr();n(f,k)},O=f=>{var k=Jr(),_=a(k);{var A=I=>{var B=Gr(),R=a(B),S=a(R,!0);t(R),t(B),P(()=>g(S,e(Ne))),n(I,B)};m(_,I=>{e(Ne)&&I(A)})}var E=r(_,2),$=r(a(E),2);ue($),ke(2),t(E);var j=r(E,2),x=a(j);x.__click=qt;var F=r(x,2),Q=a(F,!0);t(F),t(j),t(k),P(()=>{F.disabled=e(gt),g(Q,e(gt)?"Changing...":"Change Password")}),ra("submit",k,pa),Ie($,()=>e(Pe).new_password,I=>e(Pe).new_password=I),n(f,k)};m(D,f=>{e(bt)?f(U):f(O,!1)})}t(o),t(c),t(l),P(()=>g(h,`Set a new password for ${e(Pe).user_name??""} (${e(Pe).user_email??""})`)),n(i,l)};m(ea,i=>{e(zt)&&i(wa)})}var ka=r(ea,2);{var Aa=i=>{var l=os(),c=a(l),o=a(c),u=a(o),h=a(u),D=a(h);t(h);var U=r(h,2);U.__click=Pt,t(u);var O=r(u,2),f=a(O),k=a(f),_=r(a(k),2),A=a(_);t(_),t(k);var E=r(k,2);ue(E);var $=r(E,2),j=a($);Xe(j,17,()=>e(Ue).filter(N=>N.toLowerCase().includes(e(xt).toLowerCase())),at,(N,J)=>{var pe=es(),W=a(pe);ue(W),W.__change=[Zr,Ze,J];var p=r(W,2),V=a(p,!0);t(p),t(pe),P(le=>{oa(W,le),dt(p,"title",e(J)),g(V,e(J))},[()=>e(Ze).includes(e(J))]),n(N,pe)});var x=r(j,2);{var F=N=>{var J=ts();n(N,J)};m(x,N=>{e(Ue).length===0&&N(F)})}t($),t(f);var Q=r(f,2),I=a(Q);I.__click=[Ra,Ue,Oe,et];var B=r(I,2);B.__click=[Va,Ue,et,Oe];var R=r(B,2);R.__click=[Ka,Oe,Ze,Ue];var S=r(R,2);S.__click=[Ya,Oe,Ue,Ze],t(Q);var q=r(Q,2),X=a(q),Z=r(a(X),2),z=a(Z);t(Z),t(X);var K=r(X,2);ue(K);var ie=r(K,2),ne=a(ie);Xe(ne,17,()=>e(Oe).filter(N=>N.toLowerCase().includes(e(ft).toLowerCase())),at,(N,J)=>{var pe=rs(),W=a(pe);ue(W),W.__change=[as,et,J];var p=r(W,2),V=a(p,!0);t(p),t(pe),P(le=>{oa(W,le),dt(p,"title",e(J)),g(V,e(J))},[()=>e(et).includes(e(J))]),n(N,pe)});var _e=r(ne,2);{var Le=N=>{var J=ss();n(N,J)};m(_e,N=>{e(Oe).length===0&&N(Le)})}t(ie),t(q),t(O);var xe=r(O,2),ze=a(xe);ze.__click=Pt;var se=r(ze,2);se.__click=[Fa,ce,Et,Ue,Pt],t(xe),t(o),t(c),t(l),P(()=>{g(D,`Manage ${e(Et)??""} Models`),g(A,`(${e(Ue).length??""})`),I.disabled=e(Oe).length===0,B.disabled=e(et).length===0,R.disabled=e(Ze).length===0,S.disabled=e(Ue).length===0,g(z,`(${e(Oe).length??""})`)}),Ie(E,()=>e(xt),N=>s(xt,N)),Ie(K,()=>e(ft),N=>s(ft,N)),n(i,l)};m(ka,i=>{e(Ct)&&i(Aa)})}P(()=>{var i;je(Mt,1,`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors duration-200 ${e(C)==="dashboard"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`),je(Ot,1,`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors duration-200 ${e(C)==="users"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`),je(Kt,1,`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors duration-200 ${e(C)==="settings"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`),g(ba,((i=e(T))==null?void 0:i.email)||"Organization Admin")}),n(G,Dt),Oa(),M()}Pa(["click","change"]);export{xs as component};
