import"../chunks/Bzak7iHL.js";import{d as Vt,p as Gt,aY as dr,s as L,a as rr,M as cr,f as w,j as t,r as e,b as o,g as r,t as x,m as i,c,h as Ft,i as s,k as at,l as he,Q as ur,aZ as vr,u as Wt,o as yr,aP as Ht,e as kr,n as br,q as pr,aO as $r,N as Rr,$ as Sr}from"../chunks/D10uF6KO.js";import{i as N}from"../chunks/B5RjaZpx.js";import{s as _t,a as F,r as Rt}from"../chunks/gDFrtnMu.js";import{s as ir}from"../chunks/BPb77SYP.js";import{a as ot,s as qt}from"../chunks/CAofB27F.js";import{g as St}from"../chunks/5D1vQkJ2.js";import{b as Qt}from"../chunks/CjgJlaKl.js";import{p as Cr}from"../chunks/-YgP7Ysb.js";import{u as Mr}from"../chunks/DSpOhgIp.js";import{a as zt,$ as Zt}from"../chunks/Cct3hKQg.js";import{e as ar,i as sr}from"../chunks/BY88_K0J.js";import{h as nt}from"../chunks/ClvIeoc1.js";import{g as lr}from"../chunks/BVlmaXU-.js";import{f as Lr,a as Er,t as Ar,d as jr,c as mr,u as Nr,b as Pr}from"../chunks/DUGLaF72.js";import{b as Ke}from"../chunks/CF2p2rhS.js";import{b as nr}from"../chunks/DRu2A6f6.js";import{p as Ne}from"../chunks/Dpgw__wX.js";function Dr(k,l,m){r(l)>1&&(vr(l,-1),m())}function Ir(k,l,m,a){r(l)<r(m)&&(vr(l),a())}function Tr(k,l){l()}var Or=(k,l)=>l("my-rubrics"),Jr=(k,l)=>l("templates"),Ur=w('<p class="text-center text-gray-500 py-4"> </p>'),Br=w('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><strong class="font-bold"> </strong> <span class="block sm:inline"> </span></div>'),Hr=w('<p class="text-center text-gray-500 py-4"> </p>'),Vr=(k,l,m)=>l(r(m)),Gr=w('<span class="inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800 px-2 py-0.5"> </span>'),Fr=w('<span class="inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 px-2 py-0.5"> </span>'),qr=w('<span class="inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800 px-2 py-0.5"> </span>'),zr=(k,l,m)=>l(r(m)),Zr=(k,l,m)=>l(r(m)),Kr=(k,l,m)=>l(r(m)),Wr=(k,l,m)=>l(r(m)),Qr=(k,l,m)=>l(r(m)),Yr=w('<button class="text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-100 transition-colors duration-150"><!></button> <button class="text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-100 transition-colors duration-150"><!></button> <button class="text-yellow-600 hover:text-yellow-900 p-1 rounded hover:bg-yellow-100 transition-colors duration-150"><!></button> <button class="text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-100 transition-colors duration-150"><!></button>',1),Xr=(k,l,m)=>l(r(m)),ea=(k,l,m)=>l(r(m)),ta=w('<button class="text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-100 transition-colors duration-150"><!></button> <button class="text-purple-600 hover:text-purple-900 p-1 rounded hover:bg-purple-100 transition-colors duration-150"><!></button>',1),ra=w('<tr class="hover:bg-gray-50"><td class="px-6 py-4 whitespace-normal align-top"><button class="text-sm font-medium text-brand hover:underline break-words text-left"> </button> <div class="mt-1"><!></div></td><td class="px-6 py-4 align-top"><div class="text-sm text-gray-500 break-words max-w-md"> </div></td><td class="px-6 py-4 align-top"><div class="text-sm text-gray-500"> </div></td><td class="px-6 py-4 align-top"><div class="text-sm text-gray-500"> </div></td><td class="px-6 py-4 whitespace-nowrap text-sm font-medium align-top"><div class="flex items-center space-x-1 sm:space-x-2"><button class="text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-100 transition-colors duration-150"><!></button> <!></div> <div class="text-xs text-gray-400 mt-2"> </div> <div class="text-xs text-gray-400"> </div></td></tr>'),aa=w('<div class="flex justify-center items-center mt-4 space-x-4 text-sm text-gray-700"><button class="p-1.5 font-medium bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"><span><!></span></button> <span> <span class="mx-2">|</span> <span class="font-medium text-brand"> </span> <span class="font-medium text-brand"> </span> <span class="font-medium text-brand"> </span></span> <button class="px-3 py-1 font-medium bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"> </button> <button class="px-3 py-1 font-medium bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"> </button></div>'),oa=w('<div class="overflow-x-auto shadow-md sm:rounded-lg mb-6 border border-gray-200"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-brand uppercase tracking-wider"> </th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-brand uppercase tracking-wider"> </th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-brand uppercase tracking-wider"> </th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-brand uppercase tracking-wider"> </th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-brand uppercase tracking-wider"> </th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table></div> <!>',1),ia=w('<div class="container mx-auto px-4 py-8"><div class="border-b border-gray-200 mb-6"><nav class="-mb-px flex space-x-8" aria-label="Tabs"><button> </button> <button> </button></nav></div> <!></div>');function sa(k,l){Gt(l,!0);const m=()=>ot(zt,"$locale",K),a=()=>ot(Zt,"$_",K),[K,we]=qt();let v=!!m();const d=dr();let E=L(rr([])),_=L(!0),G=L(null),T=L(1),q=L(0),U=10,$=L("my-rubrics"),fe=ur(()=>Math.ceil(r(q)/U));async function R(){s(_,!0),s(G,null);try{const u=(r(T)-1)*U;let p;r($)==="my-rubrics"?p=await Lr(U,u,{}):p=await Er(U,u,{}),s(E,p.rubrics,!0),s(q,p.total,!0)}catch(u){s(G,u.message||`Failed to load ${r($)==="my-rubrics"?"rubrics":"templates"}`,!0),console.error(`Error loading ${r($)}:`,u)}finally{s(_,!1)}}function A(u){St(`/evaluaitor/${u.rubric_id}`)}function O(u){St(`/evaluaitor/${u.rubric_id}?edit=true`)}function j(u){d("delete",{id:u.rubric_id,title:u.title})}async function be(u){try{await Ge(u),await ye(u)}catch(p){console.error("Export failed:",p)}}async function Ge(u){var p;try{const J=localStorage.getItem("userToken");if(!J)throw new Error("Not authenticated");const de=lr(`/rubrics/${u.rubric_id}/export/json`),te=await fetch(de,{headers:{Authorization:`Bearer ${J}`}});if(!te.ok)throw new Error("Failed to export rubric as JSON");const W=await te.blob(),z=URL.createObjectURL(W),g=te.headers.get("Content-Disposition"),y=g?(p=g.split("filename=")[1])==null?void 0:p.replace(/"/g,""):`rubric-${u.rubric_id}.json`,f=document.createElement("a");f.href=z,f.download=y,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(z)}catch(J){throw console.error("JSON export failed:",J),J}}async function ye(u){var p;try{const J=localStorage.getItem("userToken");if(!J)throw new Error("Not authenticated");const de=lr(`/rubrics/${u.rubric_id}/export/markdown`),te=await fetch(de,{headers:{Authorization:`Bearer ${J}`}});if(!te.ok)throw new Error("Failed to export rubric as Markdown");const W=await te.blob(),z=URL.createObjectURL(W),g=te.headers.get("Content-Disposition"),y=g?(p=g.split("filename=")[1])==null?void 0:p.replace(/"/g,""):`rubric-${u.rubric_id}.md`,f=document.createElement("a");f.href=z,f.download=y,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(z)}catch(J){throw console.error("Markdown export failed:",J),J}}async function We(u){try{const p=!u.is_public;console.log(`Toggling rubric ${u.rubric_id} visibility to ${p?"public":"private"}`),await Ar(u.rubric_id,p),u.is_public=p,console.log(`Rubric visibility updated successfully to ${p?"public":"private"}`),R()}catch(p){console.error("Error toggling visibility:",p)}}async function Qe(u){try{const p=await jr(u.rubric_id);St(`/evaluaitor/${p.rubric.rubricId}?edit=true`)}catch(p){console.error("Error creating copy:",p)}}function Ce(u){u!==r($)&&(s($,u,!0),s(T,1),R())}cr(()=>{R()});const Ye='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" /></svg>',Pe='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10" /></svg>',P='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75c-.621 0-1.125-.504-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75" /></svg>',D='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" /></svg>',ne='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3" /></svg>',pe='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99" /></svg>',ee='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3s-4.5 4.03-4.5 9 2.015 9 4.5 9Z" /></svg>',ge='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z" /></svg>';var dt=ia(),De=t(dt),ke=t(De),_e=t(ke);_e.__click=[Or,Ce];var Ie=t(_e,!0);e(_e);var Ae=o(_e,2);Ae.__click=[Jr,Ce];var Te=t(Ae,!0);e(Ae),e(ke),e(De);var $e=o(De,2);{var Oe=u=>{var p=Ur(),J=t(p,!0);e(p),x(de=>i(J,de),[()=>v?a()("rubrics.loading",{default:"Loading rubrics..."}):"Loading rubrics..."]),c(u,p)},it=u=>{var p=at(),J=he(p);{var de=W=>{var z=Br(),g=t(z),y=t(g,!0);e(g);var f=o(g,2),S=t(f,!0);e(f),e(z),x(I=>{i(y,I),i(S,r(G))},[()=>v?a()("rubrics.errorTitle",{default:"Error:"}):"Error:"]),c(W,z)},te=W=>{var z=at(),g=he(z);{var y=S=>{var I=Hr(),B=t(I,!0);e(I),x(H=>i(B,H),[()=>v?a()("rubrics.noRubrics",{default:"No rubrics found."}):"No rubrics found."]),c(S,I)},f=S=>{var I=oa(),B=he(I),H=t(B),ie=t(H),se=t(ie),re=t(se),le=t(re,!0);e(re);var Q=o(re),ae=t(Q,!0);e(Q);var Me=o(Q),Re=t(Me,!0);e(Me);var je=o(Me),Je=t(je,!0);e(je);var Fe=o(je),Y=t(Fe,!0);e(Fe),e(se),e(ie);var Z=o(ie);ar(Z,21,()=>r(E),ue=>ue.id,(ue,M)=>{var me=ra(),Le=t(me),Ue=t(Le);Ue.__click=[Vr,A,M];var xt=t(Ue,!0);e(Ue);var st=o(Ue,2),Ct=t(st);{var mt=C=>{var X=Gr(),oe=t(X,!0);e(X),x(Be=>i(oe,Be),[()=>v?a()("rubrics.status.showcase",{default:"Showcase"}):"Showcase"]),c(C,X)},ct=C=>{var X=at(),oe=he(X);{var Be=Se=>{var ve=Fr(),He=t(ve,!0);e(ve),x(ze=>i(He,ze),[()=>v?a()("rubrics.status.public",{default:"Public"}):"Public"]),c(Se,ve)},xe=Se=>{var ve=qr(),He=t(ve,!0);e(ve),x(ze=>i(He,ze),[()=>v?a()("rubrics.status.private",{default:"Private"}):"Private"]),c(Se,ve)};N(oe,Se=>{r(M).is_public?Se(Be):Se(xe,!1)},!0)}c(C,X)};N(Ct,C=>{r(M).is_showcase?C(mt):C(ct,!1)})}e(st),e(Le);var ut=o(Le),vt=t(ut),ht=t(vt,!0);e(vt),e(ut);var bt=o(ut),wt=t(bt),Mt=t(wt,!0);e(wt),e(bt);var ft=o(bt),lt=t(ft),Lt=t(lt,!0);e(lt),e(ft);var pt=o(ft),gt=t(pt),qe=t(gt);qe.__click=[zr,A,M];var Pt=t(qe);nt(Pt,()=>Ye),e(qe);var yt=o(qe,2);{var Dt=C=>{var X=Yr(),oe=he(X);oe.__click=[Zr,O,M];var Be=t(oe);nt(Be,()=>Pe),e(oe);var xe=o(oe,2);xe.__click=[Kr,be,M];var Se=t(xe);nt(Se,()=>ne),e(xe);var ve=o(xe,2);ve.__click=[Wr,We,M];var He=t(ve);{var ze=Ee=>{var et=at(),tt=he(et);nt(tt,()=>ge),c(Ee,et)},Tt=Ee=>{var et=at(),tt=he(et);nt(tt,()=>ee),c(Ee,et)};N(He,Ee=>{r(M).is_public?Ee(ze):Ee(Tt,!1)})}e(ve);var Xe=o(ve,2);Xe.__click=[Qr,j,M];var Et=t(Xe);nt(Et,()=>D),e(Xe),x((Ee,et,tt,$t)=>{F(oe,"title",Ee),F(xe,"title",et),F(ve,"title",tt),F(Xe,"title",$t)},[()=>v?a()("rubrics.actions.edit",{default:"Edit"}):"Edit",()=>v?a()("rubrics.actions.export",{default:"Export (JSON & Markdown)"}):"Export (JSON & Markdown)",()=>r(M).is_public?v?a()("rubrics.actions.makePrivate",{default:"Make Private"}):"Make Private":v?a()("rubrics.actions.makePublic",{default:"Make Public"}):"Make Public",()=>v?a()("rubrics.actions.delete",{default:"Delete"}):"Delete"]),c(C,X)},It=C=>{var X=ta(),oe=he(X);oe.__click=[Xr,be,M];var Be=t(oe);nt(Be,()=>ne),e(oe);var xe=o(oe,2);xe.__click=[ea,Qe,M];var Se=t(xe);nt(Se,()=>P),e(xe),x((ve,He)=>{F(oe,"title",ve),F(xe,"title",He)},[()=>v?a()("rubrics.actions.export",{default:"Export (JSON & Markdown)"}):"Export (JSON & Markdown)",()=>v?a()("rubrics.actions.createCopy",{default:"Create Copy"}):"Create Copy"]),c(C,X)};N(yt,C=>{r($)==="my-rubrics"?C(Dt):C(It,!1)})}e(gt);var kt=o(gt,2),n=t(kt);e(kt);var b=o(kt,2),h=t(b);e(b),e(pt),e(me),x((C,X,oe,Be,xe,Se)=>{i(xt,r(M).title),i(ht,C),i(Mt,X),i(Lt,oe),F(qe,"title",Be),i(n,`${xe??""}: ${Se??""}`),i(h,`ID: ${r(M).rubric_id??""}`)},[()=>r(M).description||(v?a()("rubrics.noDescription",{default:"No description provided"}):"No description provided"),()=>r(M).subject||(v?a()("common.notSpecified",{default:"Not specified"}):"Not specified"),()=>r(M).gradeLevel||(v?a()("common.notSpecified",{default:"Not specified"}):"Not specified"),()=>v?a()("rubrics.actions.view",{default:"View"}):"View",()=>v?a()("rubrics.lastModified",{default:"Modified"}):"Modified",()=>new Date(r(M).updated_at*1e3).toLocaleDateString()]),c(ue,me)}),e(Z),e(H),e(B);var V=o(B,2);{var ce=ue=>{var M=aa(),me=t(M);me.__click=[Tr,R];var Le=t(me);let Ue;var xt=t(Le);nt(xt,()=>pe),e(Le),e(me);var st=o(me,2),Ct=t(st),mt=o(Ct,2),ct=o(mt),ut=t(ct,!0);e(ct);var vt=o(ct),ht=o(vt),bt=t(ht,!0);e(ht);var wt=o(ht),Mt=o(wt),ft=t(Mt,!0);e(Mt),e(st);var lt=o(st,2);lt.__click=[Dr,T,R];var Lt=t(lt,!0);e(lt);var pt=o(lt,2);pt.__click=[Ir,T,fe,R];var gt=t(pt,!0);e(pt),e(M),x((qe,Pt,yt,Dt,It,kt,n,b,h,C)=>{me.disabled=r(_),F(me,"title",qe),Ue=_t(Le,1,"",null,Ue,Pt),i(Ct,`${yt??""} ${r(T)??""} ${Dt??""} ${r(fe)??""} `),i(mt,` ${It??""} `),i(ut,(r(T)-1)*U+1),i(vt,` ${kt??""} `),i(bt,n),i(wt,` ${b??""} `),i(ft,r(q)),lt.disabled=r(T)===1||r(_),i(Lt,h),pt.disabled=r(T)===r(fe)||r(_),i(gt,C)},[()=>v?a()("common.refresh",{default:"Refresh"}):"Refresh",()=>({"animate-spin":r(_)}),()=>v?a()("pagination.page",{default:"Page"}):"Page",()=>v?a()("pagination.of",{default:"of"}):"of",()=>v?a()("pagination.resultsSimple",{default:"Results"}):"Results",()=>v?a()("pagination.to",{default:"to"}):"to",()=>Math.min(r(T)*U,r(q)),()=>v?a()("pagination.of",{default:"of"}):"of",()=>v?a()("pagination.previousShort",{default:"<"}):"<",()=>v?a()("pagination.nextShort",{default:">"}):">"]),c(ue,M)};N(V,ue=>{r(fe)>1&&ue(ce)})}x((ue,M,me,Le,Ue)=>{i(le,ue),i(ae,M),i(Re,me),i(Je,Le),i(Y,Ue)},[()=>v?a()("rubrics.table.name",{default:"Rubric Name"}):"Rubric Name",()=>v?a()("rubrics.table.description",{default:"Description"}):"Description",()=>v?a()("rubrics.table.subject",{default:"Subject"}):"Subject",()=>v?a()("rubrics.table.gradeLevel",{default:"Grade Level"}):"Grade Level",()=>v?a()("rubrics.table.actions",{default:"Actions"}):"Actions"]),c(S,I)};N(g,S=>{r(E).length===0&&r(q)===0?S(y):S(f,!1)},!0)}c(W,z)};N(J,W=>{r(G)?W(de):W(te,!1)},!0)}c(u,p)};N($e,u=>{r(_)?u(Oe):u(it,!1)})}e(dt),x((u,p)=>{_t(_e,1,`py-2 px-1 border-b-2 font-medium text-sm ${r($)==="my-rubrics"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`),i(Ie,u),_t(Ae,1,`py-2 px-1 border-b-2 font-medium text-sm ${r($)==="templates"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`),i(Te,p)},[()=>v?a()("rubrics.tabs.myRubrics",{default:"My Rubrics"}):"My Rubrics",()=>v?a()("rubrics.tabs.templates",{default:"Templates"}):"Templates"]),c(k,dt),Ft(),we()}Vt(["click"]);function la(k,l){const m=`criterion-${r(l).length+1}`;s(l,[...r(l),{id:m,name:"",description:"",weight:25,levels:[{id:`${m}-1`,score:4,label:"Exemplary",description:""},{id:`${m}-2`,score:3,label:"Proficient",description:""},{id:`${m}-3`,score:2,label:"Developing",description:""},{id:`${m}-4`,score:1,label:"Beginning",description:""}]}],!0)}var na=(k,l)=>l("openAIModal"),da=w('<div class="mb-6"><button type="button" class="inline-flex items-center px-4 py-2 border border-blue-300 text-sm font-medium rounded-md text-blue-700 bg-blue-50 hover:bg-blue-100"><svg class="-ml-1 mr-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg> </button></div>'),ca=w('<button type="button" class="text-red-600 hover:text-red-800 p-1"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>'),ua=w('<button type="button" class="text-red-600 hover:text-red-800 p-1 mt-1"><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>'),va=w('<div class="flex items-start space-x-2 mb-3"><input type="number" class="w-16 border border-gray-300 rounded px-2 py-1 text-sm" min="0"/> <input type="text" class="w-32 border border-gray-300 rounded px-2 py-1 text-sm"/> <textarea rows="3" class="flex-1 border border-gray-300 rounded px-3 py-2 text-sm focus:ring-blue-500 focus:border-blue-500"></textarea> <!></div>'),ba=w('<div class="border border-gray-200 rounded-md p-4 mb-4"><div class="flex justify-between items-start mb-3"><h4 class="text-md font-medium text-gray-900"> </h4> <!></div> <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-3"><div class="md:col-span-2"><label class="block text-sm font-medium text-gray-700"> </label> <input type="text" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"/></div> <div><label class="block text-sm font-medium text-gray-700"> </label> <input type="number" min="0" max="100" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"/></div></div> <div class="mb-3"><label class="block text-sm font-medium text-gray-700"> </label> <textarea rows="2" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"></textarea></div> <div class="mb-3"><div class="flex justify-between items-center mb-2"><h5 class="text-sm font-medium text-gray-700"> </h5> <button type="button" class="inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded text-blue-600 bg-blue-100 hover:bg-blue-200"><svg class="-ml-1 mr-1 h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg> </button></div> <!></div></div>'),pa=w('<div class="mb-4 bg-red-50 border border-red-200 rounded-md p-4"><div class="text-sm text-red-700"> </div></div>'),ma=w('<div class="mb-4 bg-green-50 border border-green-200 rounded-md p-4"><div class="text-sm text-green-700"> </div></div>'),fa=()=>history.back(),ga=br('<svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> ',1),_a=w('<div class="max-w-6xl mx-auto"><div class="bg-white shadow rounded-lg p-6"><div class="mb-6"><h2 class="text-2xl font-bold text-gray-900"> </h2> <p class="mt-1 text-sm text-gray-600"> </p></div> <!> <form><div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"><div><label for="title" class="block text-sm font-medium text-gray-700"> <span class="text-red-500">*</span></label> <input type="text" id="title" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"/></div> <div><label for="subject" class="block text-sm font-medium text-gray-700"> </label> <input type="text" id="subject" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"/></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"><div><label for="gradeLevel" class="block text-sm font-medium text-gray-700"> </label> <select id="gradeLevel" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"><option> </option><option>K-2</option><option>3-5</option><option>6-8</option><option>9-12</option><option>Higher Education</option></select></div> <div><label for="scoringType" class="block text-sm font-medium text-gray-700"> </label> <select id="scoringType" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"><option>Points</option><option>Percentage</option><option>Holistic</option><option>Single Point</option><option>Checklist</option></select></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"><div><label for="maxScore" class="block text-sm font-medium text-gray-700"> </label> <input type="number" id="maxScore" min="1" max="1000" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"/> <p class="mt-1 text-xs text-gray-500"> </p></div> <div class="flex items-end"><div class="text-sm text-gray-600 bg-gray-50 p-3 rounded border"><strong> </strong><br/> </div></div></div> <div class="mb-6"><label for="description" class="block text-sm font-medium text-gray-700"> </label> <textarea id="description" rows="3" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"></textarea></div> <div class="mb-6"><div class="flex justify-between items-center mb-4"><h3 class="text-lg font-medium text-gray-900"> </h3> <button type="button" class="inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded text-blue-600 bg-blue-100 hover:bg-blue-200"><svg class="-ml-1 mr-1 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg> </button></div> <!></div> <!> <!> <div class="flex justify-end space-x-3"><button type="button" class="px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"> </button> <button type="submit" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50"><!></button></div></form></div></div>');function xa(k,l){Gt(l,!0);const m=()=>ot(zt,"$locale",K),a=()=>ot(Zt,"$_",K),[K,we]=qt(),v=dr();let d=!!m(),E=Ne(l,"rubric",3,null),_=rr(E()?"edit":"create"),G=L(!1),T=L(""),q=L(""),U=L(""),$=L(""),fe=L(""),R=L("undefined"),A=L("points"),O=L(10),j=L(rr([{id:"criterion-1",name:"Content Knowledge",description:"Understanding of subject matter",weight:40,levels:[{id:"level-1-1",score:4,label:"Exemplary",description:"Demonstrates comprehensive understanding"},{id:"level-1-2",score:3,label:"Proficient",description:"Demonstrates adequate understanding"},{id:"level-1-3",score:2,label:"Developing",description:"Demonstrates partial understanding"},{id:"level-1-4",score:1,label:"Beginning",description:"Demonstrates limited understanding"}]}]));Wt(()=>{if(E()&&E().rubricData){const n=E().rubricData;s(U,n.title||"",!0),s($,n.description||"",!0);const b=n.metadata||{};s(fe,b.subject||"",!0),s(R,b.gradeLevel||"",!0),s(A,n.scoringType||"points",!0),s(O,n.maxScore||100,!0),s(j,n.criteria||r(j),!0)}});async function be(){if(!r(G)){s(G,!0),s(T,""),s(q,"");try{const n={title:r(U),description:r($),metadata:{subject:r(fe),gradeLevel:r(R),createdAt:new Date().toISOString(),modifiedAt:new Date().toISOString()},criteria:r(j),scoringType:r(A),maxScore:r(O)};let b;_==="create"?b=await mr(n):(n.rubricId=E().rubricId,b=await Nr(E().rubricId,n,E().owner_email)),s(q,d?a()("rubrics.form.successMessage",{default:"Rubric saved successfully!"}):"Rubric saved successfully!",!0),v("formSuccess",{rubricId:b.rubricId||b.id})}catch(n){s(T,n.message||(d?a()("rubrics.form.errorMessage",{default:"Failed to save rubric"}):"Failed to save rubric"),!0)}finally{s(G,!1)}}}function Ge(n){r(j).length>1&&s(j,r(j).filter((b,h)=>h!==n),!0)}function ye(n){const b=r(j)[n],h=`${b.id}-${b.levels.length+1}`;b.levels=[...b.levels,{id:h,score:Math.max(1,Math.min(...b.levels.map(C=>C.score))-1),label:"New Level",description:""}],s(j,[...r(j)],!0)}function We(n,b){const h=r(j)[n];h.levels.length>2&&(h.levels=h.levels.filter((C,X)=>X!==b),s(j,[...r(j)],!0))}function Qe(n){switch(n){case"points":return d?a()("rubrics.form.pointsHint",{default:"Total possible points (e.g., 10, 20, 100)"}):"Total possible points (e.g., 10, 20, 100)";case"percentage":return d?a()("rubrics.form.percentageHint",{default:"Always 100 for percentage scoring"}):"Always 100 for percentage scoring";case"holistic":return d?a()("rubrics.form.holisticHint",{default:"Highest performance level (e.g., 4, 5, 6)"}):"Highest performance level (e.g., 4, 5, 6)";case"single-point":return d?a()("rubrics.form.singlePointHint",{default:"Number of criteria (typically 3-6)"}):"Number of criteria (typically 3-6)";case"checklist":return d?a()("rubrics.form.checklistHint",{default:"Number of checklist items"}):"Number of checklist items";default:return"10"}}function Ce(n){switch(n){case"points":return d?a()("rubrics.form.pointsExplanation",{default:"Analytic scoring with points for each criterion"}):"Analytic scoring with points for each criterion";case"percentage":return d?a()("rubrics.form.percentageExplanation",{default:"Scores expressed as percentages (0-100%)"}):"Scores expressed as percentages (0-100%)";case"holistic":return d?a()("rubrics.form.holisticExplanation",{default:"Single overall score (e.g., 1-4 scale)"}):"Single overall score (e.g., 1-4 scale)";case"single-point":return d?a()("rubrics.form.singlePointExplanation",{default:"Focus on meeting/not meeting expectations"}):"Focus on meeting/not meeting expectations";case"checklist":return d?a()("rubrics.form.checklistExplanation",{default:"Simple present/absent or yes/no format"}):"Simple present/absent or yes/no format";default:return""}}Wt(()=>{r(A)==="percentage"?s(O,100):r(A)==="holistic"?s(O,4):r(A)==="single-point"?s(O,r(j).length||3,!0):r(A)==="checklist"?s(O,r(j).length||5,!0):r(A)==="points"&&(r(O)===100||r(O)===4)&&s(O,10)});var Ye=_a(),Pe=t(Ye),P=t(Pe),D=t(P),ne=t(D,!0);e(D);var pe=o(D,2),ee=t(pe,!0);e(pe),e(P);var ge=o(P,2);{var dt=n=>{var b=da(),h=t(b);h.__click=[na,v];var C=o(t(h));e(h),e(b),x(X=>i(C,` âš¡ ${X??""}`),[()=>d?a()("rubrics.ai.generateButton",{default:"Generate with AI"}):"Generate with AI"]),c(n,b)};N(ge,n=>{_==="create"&&n(dt)})}var De=o(ge,2),ke=t(De),_e=t(ke),Ie=t(_e),Ae=t(Ie);yr(),e(Ie);var Te=o(Ie,2);Rt(Te),e(_e);var $e=o(_e,2),Oe=t($e),it=t(Oe,!0);e(Oe);var u=o(Oe,2);Rt(u),e($e),e(ke);var p=o(ke,2),J=t(p),de=t(J),te=t(de,!0);e(de);var W=o(de,2),z=t(W),g=t(z,!0);e(z),z.value=z.__value="undefined";var y=o(z);y.value=y.__value="K-2";var f=o(y);f.value=f.__value="3-5";var S=o(f);S.value=S.__value="6-8";var I=o(S);I.value=I.__value="9-12";var B=o(I);B.value=B.__value="Higher Education",e(W),e(J);var H=o(J,2),ie=t(H),se=t(ie,!0);e(ie);var re=o(ie,2),le=t(re);le.value=le.__value="points";var Q=o(le);Q.value=Q.__value="percentage";var ae=o(Q);ae.value=ae.__value="holistic";var Me=o(ae);Me.value=Me.__value="single-point";var Re=o(Me);Re.value=Re.__value="checklist",e(re),e(H),e(p);var je=o(p,2),Je=t(je),Fe=t(Je),Y=t(Fe,!0);e(Fe);var Z=o(Fe,2);Rt(Z);var V=o(Z,2),ce=t(V,!0);e(V),e(Je);var ue=o(Je,2),M=t(ue),me=t(M),Le=t(me,!0);e(me);var Ue=o(me,2);e(M),e(ue),e(je);var xt=o(je,2),st=t(xt),Ct=t(st,!0);e(st);var mt=o(st,2);Ht(mt),e(xt);var ct=o(xt,2),ut=t(ct),vt=t(ut),ht=t(vt,!0);e(vt);var bt=o(vt,2);bt.__click=[la,j];var wt=o(t(bt));e(bt),e(ut);var Mt=o(ut,2);ar(Mt,17,()=>r(j),sr,(n,b,h)=>{var C=ba(),X=t(C),oe=t(X),Be=t(oe);e(oe);var xe=o(oe,2);{var Se=Ve=>{var Ze=ca();Ze.__click=()=>Ge(h),x(Ot=>F(Ze,"title",Ot),[()=>d?a()("common.remove",{default:"Remove"}):"Remove"]),c(Ve,Ze)};N(xe,Ve=>{r(j).length>1&&Ve(Se)})}e(X);var ve=o(X,2),He=t(ve),ze=t(He);F(ze,"for",`criterion-name-${h}`);var Tt=t(ze,!0);e(ze);var Xe=o(ze,2);Rt(Xe),F(Xe,"id",`criterion-name-${h}`),e(He);var Et=o(He,2),Ee=t(Et);F(Ee,"for",`criterion-weight-${h}`);var et=t(Ee,!0);e(Ee);var tt=o(Ee,2);Rt(tt),F(tt,"id",`criterion-weight-${h}`),e(Et),e(ve);var $t=o(ve,2),At=t($t);F(At,"for",`criterion-description-${h}`);var fr=t(At,!0);e(At);var Kt=o(At,2);Ht(Kt),F(Kt,"id",`criterion-description-${h}`),e($t);var or=o($t,2),Yt=t(or),Xt=t(Yt),gr=t(Xt,!0);e(Xt);var er=o(Xt,2);er.__click=()=>ye(h);var _r=o(t(er));e(er),e(Yt);var xr=o(Yt,2);ar(xr,17,()=>r(b).levels,sr,(Ve,Ze,Ot)=>{var Jt=va(),Ut=t(Jt);Rt(Ut);var jt=o(Ut,2);Rt(jt);var Nt=o(jt,2);Ht(Nt);var tr=o(Nt,2);{var hr=rt=>{var Bt=ua();Bt.__click=()=>We(h,Ot),x(wr=>F(Bt,"title",wr),[()=>d?a()("common.remove",{default:"Remove"}):"Remove"]),c(rt,Bt)};N(tr,rt=>{r(b).levels.length>2&&rt(hr)})}e(Jt),x((rt,Bt)=>{F(jt,"placeholder",rt),F(Nt,"placeholder",Bt)},[()=>d?a()("rubrics.form.levelLabel",{default:"Label"}):"Label",()=>d?a()("rubrics.form.levelDescription",{default:"Description"}):"Description"]),Ke(Ut,()=>r(Ze).score,rt=>r(Ze).score=rt),Ke(jt,()=>r(Ze).label,rt=>r(Ze).label=rt),Ke(Nt,()=>r(Ze).description,rt=>r(Ze).description=rt),c(Ve,Jt)}),e(or),e(C),x((Ve,Ze,Ot,Jt,Ut,jt,Nt,tr)=>{i(Be,`${Ve??""} ${h+1}`),i(Tt,Ze),F(Xe,"placeholder",Ot),i(et,Jt),i(fr,Ut),F(Kt,"placeholder",jt),i(gr,Nt),i(_r,` ${tr??""}`)},[()=>d?a()("rubrics.form.criterion",{default:"Criterion"}):"Criterion",()=>d?a()("rubrics.form.criterionName",{default:"Name"}):"Name",()=>d?a()("rubrics.form.criterionNamePlaceholder",{default:"e.g., Content Knowledge"}):"e.g., Content Knowledge",()=>d?a()("rubrics.form.weight",{default:"Weight (%)"}):"Weight (%)",()=>d?a()("rubrics.form.criterionDescription",{default:"Description"}):"Description",()=>d?a()("rubrics.form.criterionDescriptionPlaceholder",{default:"Describe what this criterion assesses..."}):"Describe what this criterion assesses...",()=>d?a()("rubrics.form.performanceLevels",{default:"Performance Levels"}):"Performance Levels",()=>d?a()("rubrics.form.addLevel",{default:"Add Level"}):"Add Level"]),Ke(Xe,()=>r(b).name,Ve=>r(b).name=Ve),Ke(tt,()=>r(b).weight,Ve=>r(b).weight=Ve),Ke(Kt,()=>r(b).description,Ve=>r(b).description=Ve),c(n,C)}),e(ct);var ft=o(ct,2);{var lt=n=>{var b=pa(),h=t(b),C=t(h,!0);e(h),e(b),x(()=>i(C,r(T))),c(n,b)};N(ft,n=>{r(T)&&n(lt)})}var Lt=o(ft,2);{var pt=n=>{var b=ma(),h=t(b),C=t(h,!0);e(h),e(b),x(()=>i(C,r(q))),c(n,b)};N(Lt,n=>{r(q)&&n(pt)})}var gt=o(Lt,2),qe=t(gt);qe.__click=[fa];var Pt=t(qe,!0);e(qe);var yt=o(qe,2),Dt=t(yt);{var It=n=>{var b=ga(),h=o(he(b),1,!0);x(C=>i(h,C),[()=>d?a()("common.saving",{default:"Saving..."}):"Saving..."]),c(n,b)},kt=n=>{var b=pr();x(h=>i(b,h),[()=>_==="create"?d?a()("common.create",{default:"Create Rubric"}):"Create Rubric":d?a()("common.save",{default:"Save Changes"}):"Save Changes"]),c(n,b)};N(Dt,n=>{r(G)?n(It):n(kt,!1)})}e(yt),e(gt),e(De),e(Pe),e(Ye),x((n,b,h,C,X,oe,Be,xe,Se,ve,He,ze,Tt,Xe,Et,Ee,et,tt,$t,At)=>{i(ne,n),i(ee,b),i(Ae,`${h??""} `),F(Te,"placeholder",C),i(it,X),F(u,"placeholder",oe),i(te,Be),i(g,xe),i(se,Se),i(Y,ve),F(Z,"placeholder",He),i(ce,ze),i(Le,Tt),i(Ue,` ${Xe??""}`),i(Ct,Et),F(mt,"placeholder",Ee),i(ht,et),i(wt,` ${tt??""}`),i(Pt,$t),yt.disabled=At},[()=>_==="create"?d?a()("rubrics.form.createTitle",{default:"Create New Rubric"}):"Create New Rubric":d?a()("rubrics.form.editTitle",{default:"Edit Rubric"}):"Edit Rubric",()=>d?a()("rubrics.form.description",{default:"Define your assessment criteria and performance levels"}):"Define your assessment criteria and performance levels",()=>d?a()("rubrics.form.title",{default:"Title"}):"Title",()=>d?a()("rubrics.form.titlePlaceholder",{default:"e.g., Essay Writing Rubric"}):"e.g., Essay Writing Rubric",()=>d?a()("rubrics.form.subject",{default:"Subject"}):"Subject",()=>d?a()("rubrics.form.subjectPlaceholder",{default:"e.g., Mathematics, English, Science"}):"e.g., Mathematics, English, Science",()=>d?a()("rubrics.form.gradeLevel",{default:"Grade Level"}):"Grade Level",()=>d?a()("rubrics.form.gradeUndefined",{default:"Undefined"}):"Undefined",()=>d?a()("rubrics.form.scoringType",{default:"Scoring Type"}):"Scoring Type",()=>d?a()("rubrics.form.maxScore",{default:"Maximum Score"}):"Maximum Score",()=>Qe(r(A)),()=>Qe(r(A)),()=>d?a()("rubrics.form.scoringExplanation",{default:"About Scoring Types:"}):"About Scoring Types:",()=>Ce(r(A)),()=>d?a()("rubrics.form.description",{default:"Description"}):"Description",()=>d?a()("rubrics.form.descriptionPlaceholder",{default:"Describe what this rubric assesses..."}):"Describe what this rubric assesses...",()=>d?a()("rubrics.form.criteria",{default:"Assessment Criteria"}):"Assessment Criteria",()=>d?a()("rubrics.form.addCriterion",{default:"Add Criterion"}):"Add Criterion",()=>d?a()("common.cancel",{default:"Cancel"}):"Cancel",()=>r(G)||!r(U).trim()]),kr("submit",De,be),Ke(Te,()=>r(U),n=>s(U,n)),Ke(u,()=>r(fe),n=>s(fe,n)),nr(W,()=>r(R),n=>s(R,n)),nr(re,()=>r(A),n=>s(A,n)),Ke(Z,()=>r(O),n=>s(O,n)),Ke(mt,()=>r($),n=>s($,n)),c(k,Ye),Ft(),we()}Vt(["click"]);function ha(k,l,m,a){try{const K=JSON.parse(r(l));s(m,""),a()({detail:{rubric:K}})}catch(K){s(m,`Invalid JSON: ${K.message}`)}}function wa(k,l,m,a,K,we){if(r(l)==="json")try{const v=JSON.parse(r(m));a()({detail:{rubric:v}})}catch(v){s(K,`Cannot accept: Invalid JSON - ${v.message}`);return}else a()({detail:{rubric:we()}})}function ya(k,l){l()()}function ka(k,l){l()()}var $a=w('<p class="mt-2 text-sm text-gray-600"><strong> </strong> </p>'),Ra=(k,l)=>s(l,"markdown"),Sa=(k,l)=>s(l,"raw"),Ca=(k,l)=>s(l,"json"),Ma=w('<div class="prose max-w-none"><div class="bg-gray-50 p-6 rounded border"><!></div></div>'),La=w('<div class="bg-gray-900 text-gray-100 p-4 rounded font-mono text-sm overflow-x-auto"><pre> </pre></div>'),Ea=w('<div class="mt-2 text-sm text-red-600 bg-red-50 p-3 rounded"> </div>'),Aa=w('<div class="mt-2 text-sm text-green-600"> </div>'),ja=w('<div><div class="flex items-center justify-between mb-3"><label for="json-editor" class="block text-sm font-medium text-gray-700"> </label> <button type="button" class="text-sm px-3 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200"> </button></div> <textarea id="json-editor" class="w-full h-96 font-mono text-sm border border-gray-300 rounded p-3 focus:ring-blue-500 focus:border-blue-500" spellcheck="false"></textarea> <!></div>'),Na=w('<div class="mt-6 bg-yellow-50 border border-yellow-200 rounded p-4"><h3 class="text-lg font-medium text-yellow-900 mb-2"> </h3> <p class="text-sm text-yellow-700 mb-3"> </p> <details class="text-sm"><summary class="cursor-pointer text-yellow-800 font-medium"> </summary> <pre class="mt-2 bg-white p-3 rounded border text-xs overflow-x-auto"> </pre></details></div>'),Pa=(k,l)=>s(l,!r(l)),Da=w('<div class="mt-3 bg-white border rounded p-3"><pre class="text-xs text-gray-700 whitespace-pre-wrap"> </pre></div>'),Ia=w('<div class="border-t px-6 py-3 bg-gray-50"><button type="button" class="text-sm text-gray-600 hover:text-gray-900 flex items-center"><svg class="h-4 w-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg> </button> <!></div>'),Ta=w('<div class="bg-white rounded-lg shadow-lg max-w-6xl mx-auto"><div class="border-b px-6 py-4"><h2 class="text-2xl font-bold text-gray-900"> </h2> <!></div> <div class="border-b"><nav class="flex -mb-px px-6" aria-label="Tabs"><button type="button"> </button> <button type="button"> </button> <button type="button"> </button></nav></div> <div class="p-6"><!> <!></div> <!> <div class="border-t px-6 py-4 bg-gray-50 flex justify-between items-center"><div class="flex space-x-3"><button type="button" class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50"> </button> <button type="button" class="px-4 py-2 border border-blue-300 rounded-md text-sm font-medium text-blue-700 bg-blue-50 hover:bg-blue-100"> </button></div> <button type="button" class="px-6 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed"> </button></div></div>');function Oa(k,l){Gt(l,!0);const m=()=>ot(zt,"$locale",K),a=()=>ot(Zt,"$_",K),[K,we]=qt();let v=Ne(l,"rubricData",3,null),d=Ne(l,"markdown",3,""),E=Ne(l,"explanation",3,""),_=Ne(l,"promptUsed",3,""),G=Ne(l,"rawResponse",3,""),T=Ne(l,"allowManualEdit",3,!1),q=Ne(l,"onaccept",3,()=>{}),U=Ne(l,"onregenerate",3,()=>{}),$=Ne(l,"oncancel",3,()=>{}),fe=Ne(l,"onjsonUpdated",3,()=>{}),R=!!m(),A=L("markdown"),O=L(""),j=L(""),be=L(!1);Wt(()=>{v()&&(s(O,JSON.stringify(v(),null,2),!0),s(j,""))});var Ge=Ta(),ye=t(Ge),We=t(ye),Qe=t(We,!0);e(We);var Ce=o(We,2);{var Ye=g=>{var y=$a(),f=t(y),S=t(f,!0);e(f);var I=o(f);e(y),x(B=>{i(S,B),i(I,` ${E()??""}`)},[()=>R?a()("rubrics.ai.explanation",{default:"AI Explanation:"}):"AI Explanation:"]),c(g,y)};N(Ce,g=>{E()&&g(Ye)})}e(ye);var Pe=o(ye,2),P=t(Pe),D=t(P);D.__click=[Ra,A];var ne=t(D);e(D);var pe=o(D,2);pe.__click=[Sa,A];var ee=t(pe);e(pe);var ge=o(pe,2);ge.__click=[Ca,A];var dt=t(ge);e(ge),e(P),e(Pe);var De=o(Pe,2),ke=t(De);{var _e=g=>{var y=Ma(),f=t(y),S=t(f);nt(S,()=>d().replace(/\n/g,"<br>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>")),e(f),e(y),c(g,y)},Ie=g=>{var y=at(),f=he(y);{var S=B=>{var H=La(),ie=t(H),se=t(ie,!0);e(ie),e(H),x(()=>i(se,d())),c(B,H)},I=B=>{var H=at(),ie=he(H);{var se=re=>{var le=ja(),Q=t(le),ae=t(Q),Me=t(ae,!0);e(ae);var Re=o(ae,2);Re.__click=[ha,O,j,fe];var je=t(Re,!0);e(Re),e(Q);var Je=o(Q,2);Ht(Je);var Fe=o(Je,2);{var Y=V=>{var ce=Ea(),ue=t(ce,!0);e(ce),x(()=>i(ue,r(j))),c(V,ce)},Z=V=>{var ce=Aa(),ue=t(ce);e(ce),x(M=>i(ue,`âœ“ ${M??""}`),[()=>R?a()("rubrics.ai.jsonValid",{default:"JSON is valid"}):"JSON is valid"]),c(V,ce)};N(Fe,V=>{r(j)?V(Y):V(Z,!1)})}e(le),x((V,ce)=>{i(Me,V),i(je,ce)},[()=>R?a()("rubrics.ai.editJsonLabel",{default:"Edit JSON (changes will be used when you accept)"}):"Edit JSON (changes will be used when you accept)",()=>R?a()("rubrics.ai.validateJson",{default:"Validate JSON"}):"Validate JSON"]),Ke(Je,()=>r(O),V=>s(O,V)),c(re,le)};N(ie,re=>{r(A)==="json"&&re(se)},!0)}c(B,H)};N(f,B=>{r(A)==="raw"?B(S):B(I,!1)},!0)}c(g,y)};N(ke,g=>{r(A)==="markdown"?g(_e):g(Ie,!1)})}var Ae=o(ke,2);{var Te=g=>{var y=Na(),f=t(y),S=t(f);e(f);var I=o(f,2),B=t(I,!0);e(I);var H=o(I,2),ie=t(H),se=t(ie,!0);e(ie);var re=o(ie,2),le=t(re,!0);e(re),e(H),e(y),x((Q,ae,Me)=>{i(S,`âš ï¸ ${Q??""}`),i(B,ae),i(se,Me),i(le,G())},[()=>R?a()("rubrics.ai.manualEditRequired",{default:"Manual Edit Required"}):"Manual Edit Required",()=>R?a()("rubrics.ai.manualEditHelp",{default:"The AI response could not be automatically parsed. Please review and edit the JSON in the JSON tab."}):"The AI response could not be automatically parsed. Please review and edit the JSON in the JSON tab.",()=>R?a()("rubrics.ai.showRawResponse",{default:"Show Raw AI Response"}):"Show Raw AI Response"]),c(g,y)};N(Ae,g=>{T()&&G()&&g(Te)})}e(De);var $e=o(De,2);{var Oe=g=>{var y=Ia(),f=t(y);f.__click=[Pa,be];var S=t(f),I=t(S);e(S);var B=o(S);e(f);var H=o(f,2);{var ie=se=>{var re=Da(),le=t(re),Q=t(le,!0);e(le),e(re),x(()=>i(Q,_())),c(se,re)};N(H,se=>{r(be)&&se(ie)})}e(y),x(se=>{F(I,"d",r(be)?"M19 9l-7 7-7-7":"M9 5l7 7-7 7"),i(B,` ${se??""}`)},[()=>R?a()("rubrics.ai.showPrompt",{default:"Show Prompt Sent to LLM (Advanced)"}):"Show Prompt Sent to LLM (Advanced)"]),c(g,y)};N($e,g=>{_()&&g(Oe)})}var it=o($e,2),u=t(it),p=t(u);p.__click=[ka,$];var J=t(p,!0);e(p);var de=o(p,2);de.__click=[ya,U];var te=t(de);e(de),e(u);var W=o(u,2);W.__click=[wa,A,O,q,j,v];var z=t(W);e(W),e(it),e(Ge),x((g,y,f,S,I,B,H)=>{i(Qe,g),_t(D,1,`py-4 px-6 border-b-2 font-medium text-sm ${r(A)==="markdown"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`),i(ne,`ðŸ“„ ${y??""}`),_t(pe,1,`py-4 px-6 border-b-2 font-medium text-sm ${r(A)==="raw"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`),i(ee,`ðŸ“ ${f??""}`),_t(ge,1,`py-4 px-6 border-b-2 font-medium text-sm ${r(A)==="json"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`),i(dt,`ðŸ”§ ${S??""}`),i(J,I),i(te,`ðŸ”„ ${B??""}`),W.disabled=!v()||r(A)==="json"&&r(j),i(z,`âœ“ ${H??""}`)},[()=>R?a()("rubrics.ai.previewTitle",{default:"AI Generated Rubric Preview"}):"AI Generated Rubric Preview",()=>R?a()("rubrics.ai.markdownTab",{default:"Markdown Preview"}):"Markdown Preview",()=>R?a()("rubrics.ai.rawMarkdownTab",{default:"Raw Markdown"}):"Raw Markdown",()=>R?a()("rubrics.ai.jsonTab",{default:"JSON (Editable)"}):"JSON (Editable)",()=>R?a()("common.cancel",{default:"Cancel"}):"Cancel",()=>R?a()("rubrics.ai.regenerate",{default:"Regenerate"}):"Regenerate",()=>R?a()("rubrics.ai.acceptAndSave",{default:"Accept and Save Rubric"}):"Accept and Save Rubric"]),c(k,Ge),Ft(),we()}Vt(["click"]);async function Ja(k,l,m,a,K,we,v,d,E,_,G,T,q,U){if(!r(l).trim()){s(m,a?K()("rubrics.ai.promptRequired",{default:"Please enter a prompt"}):"Please enter a prompt",!0);return}s(we,!0),s(m,"");try{const $=await Pr(r(l),r(v));$.success?(s(d,$.rubric,!0),s(E,$.markdown||"",!0),s(_,$.explanation||"",!0),s(G,$.prompt_used||"",!0),s(T,"preview")):(s(m,$.error||"Unknown error",!0),s(q,$.raw_response||"",!0),s(U,$.allow_manual_edit||!1,!0),r(U)?(s(d,$.rubric||{},!0),s(E,$.markdown||"",!0),s(T,"preview")):s(T,"error"))}catch($){s(m,$.message||(a?K()("rubrics.ai.generationError",{default:"Failed to generate rubric"}):"Failed to generate rubric"),!0),s(T,"error")}finally{s(we,!1)}}var Ua=(k,l)=>s(l,!r(l)),Ba=w('<div class="mt-3 p-4 bg-gray-50 rounded border"><p class="text-sm text-gray-600 mb-2"> </p> <p class="text-xs text-gray-500 italic"> </p></div>'),Ha=w('<div class="mb-4 bg-red-50 border border-red-200 rounded-md p-4"><div class="text-sm text-red-700"> </div></div>'),Va=br('<svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> ',1),Ga=w('<div class="p-6"><div class="flex justify-between items-start mb-4"><div><h2 class="text-2xl font-bold text-gray-900"> </h2> <p class="mt-1 text-sm text-gray-600"> </p></div> <button type="button" class="text-gray-400 hover:text-gray-600" aria-label="Close"><svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="mb-4"><label for="ai-prompt" class="block text-sm font-medium text-gray-700 mb-2"> </label> <textarea id="ai-prompt" rows="6" class="w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 p-3"></textarea> <p class="mt-1 text-xs text-gray-500"> <strong> </strong></p></div> <div class="mb-4"><button type="button" class="text-sm text-blue-600 hover:text-blue-800 flex items-center"><svg class="h-4 w-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg> </button> <!></div> <!> <div class="flex justify-end space-x-3"><button type="button" class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50"> </button> <button type="button" class="inline-flex items-center px-6 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50"><!></button></div></div>'),Fa=w('<details class="mb-4"><summary class="cursor-pointer text-sm font-medium text-gray-700 mb-2"> </summary> <div class="mt-2 bg-gray-900 text-gray-100 p-4 rounded font-mono text-xs overflow-x-auto"><pre> </pre></div></details>'),qa=w('<div class="p-6"><div class="flex justify-between items-start mb-4"><h2 class="text-2xl font-bold text-red-900"> </h2> <button type="button" class="text-gray-400 hover:text-gray-600" aria-label="Close"><svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="bg-red-50 border border-red-200 rounded-md p-4 mb-4"><p class="text-sm text-red-700"> </p></div> <!> <div class="flex justify-end space-x-3"><button type="button" class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50"> </button> <button type="button" class="px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-blue-600 hover:bg-blue-700"> </button></div></div>'),za=w('<div class="fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-y-auto"><!></div></div>');function Za(k,l){Gt(l,!0);const m=()=>ot(zt,"$locale",K),a=()=>ot(Zt,"$_",K),[K,we]=qt();let v=Ne(l,"show",3,!1),d=Ne(l,"onclose",3,()=>{}),E=Ne(l,"onrubricCreated",3,()=>{}),_=!!m(),G=L("input"),T=L(""),q=L(!1),U=L(""),$=L(null),fe=L(""),R=L(""),A=L(""),O=L(""),j=L(!1),be=L(!1),Ge=ur(()=>m()||"en");function ye(){s(G,"input"),s($,null),s(fe,""),s(R,""),s(U,"")}async function We(ne){var ee;const pe=ne.detail.rubric;s(q,!0),s(U,"");try{const ge=await mr(pe);if(ge.success||ge.rubric)Ce(),E()({detail:{rubricId:((ee=ge.rubric)==null?void 0:ee.rubricId)||ge.rubricId}});else throw new Error(ge.error||"Failed to save rubric")}catch(ge){s(U,ge.message||(_?a()("rubrics.ai.saveError",{default:"Failed to save rubric"}):"Failed to save rubric"),!0),s(G,"error")}finally{s(q,!1)}}function Qe(){Ce()}function Ce(){s(G,"input"),s(T,""),s($,null),s(fe,""),s(R,""),s(U,""),s(O,""),s(q,!1),s(be,!1),d()()}function Ye(ne){s($,ne.detail.rubric,!0)}var Pe=at(),P=he(Pe);{var D=ne=>{var pe=za(),ee=t(pe),ge=t(ee);{var dt=ke=>{var _e=Ga(),Ie=t(_e),Ae=t(Ie),Te=t(Ae),$e=t(Te,!0);e(Te);var Oe=o(Te,2),it=t(Oe,!0);e(Oe),e(Ae);var u=o(Ae,2);u.__click=Ce,e(Ie);var p=o(Ie,2),J=t(p),de=t(J,!0);e(J);var te=o(J,2);Ht(te);var W=o(te,2),z=t(W),g=o(z),y=t(g,!0);e(g),e(W),e(p);var f=o(p,2),S=t(f);S.__click=[Ua,be];var I=t(S),B=t(I);e(I);var H=o(I);e(S);var ie=o(S,2);{var se=Y=>{var Z=Ba(),V=t(Z),ce=t(V,!0);e(V);var ue=o(V,2),M=t(ue,!0);e(ue),e(Z),x((me,Le)=>{i(ce,me),i(M,Le)},[()=>_?a()("rubrics.ai.advancedHelp",{default:"Advanced users can view and edit the complete prompt template that will be sent to the LLM."}):"Advanced users can view and edit the complete prompt template that will be sent to the LLM.",()=>_?a()("rubrics.ai.advancedWarning",{default:"Note: Editing the prompt may affect generation quality. Only modify if you understand the rubric JSON structure."}):"Note: Editing the prompt may affect generation quality. Only modify if you understand the rubric JSON structure."]),c(Y,Z)};N(ie,Y=>{r(be)&&Y(se)})}e(f);var re=o(f,2);{var le=Y=>{var Z=Ha(),V=t(Z),ce=t(V,!0);e(V),e(Z),x(()=>i(ce,r(U))),c(Y,Z)};N(re,Y=>{r(U)&&Y(le)})}var Q=o(re,2),ae=t(Q);ae.__click=Ce;var Me=t(ae,!0);e(ae);var Re=o(ae,2);Re.__click=[Ja,T,U,_,a,q,Ge,$,fe,R,A,G,O,j];var je=t(Re);{var Je=Y=>{var Z=Va(),V=o(he(Z),1,!0);x(ce=>i(V,ce),[()=>_?a()("rubrics.ai.generating",{default:"Generating..."}):"Generating..."]),c(Y,Z)},Fe=Y=>{var Z=pr();x(V=>i(Z,`âš¡ ${V??""}`),[()=>_?a()("rubrics.ai.generateButton",{default:"Generate with AI"}):"Generate with AI"]),c(Y,Z)};N(je,Y=>{r(q)?Y(Je):Y(Fe,!1)})}e(Re),e(Q),e(_e),x((Y,Z,V,ce,ue,M,me,Le,Ue)=>{i($e,Y),i(it,Z),i(de,V),F(te,"placeholder",ce),te.disabled=r(q),i(z,`${ue??""}: `),i(y,M),F(B,"d",r(be)?"M19 9l-7 7-7-7":"M9 5l7 7-7 7"),i(H,` ${me??""}`),ae.disabled=r(q),i(Me,Le),Re.disabled=Ue},[()=>_?a()("rubrics.ai.generateTitle",{default:"Generate Rubric with AI"}):"Generate Rubric with AI",()=>_?a()("rubrics.ai.generateDescription",{default:"Describe the rubric you want to create, and AI will generate it for you."}):"Describe the rubric you want to create, and AI will generate it for you.",()=>_?a()("rubrics.ai.promptLabel",{default:"Describe your rubric"}):"Describe your rubric",()=>_?a()("rubrics.ai.promptPlaceholder",{default:"e.g., Create a rubric for evaluating 5-paragraph argumentative essays for 9th grade English students"}):"e.g., Create a rubric for evaluating 5-paragraph argumentative essays for 9th grade English students",()=>_?a()("rubrics.ai.languageNote",{default:"Language"}):"Language",()=>r(Ge).toUpperCase(),()=>_?a()("rubrics.ai.advancedOptions",{default:"Advanced Options"}):"Advanced Options",()=>_?a()("common.cancel",{default:"Cancel"}):"Cancel",()=>r(q)||!r(T).trim()]),Ke(te,()=>r(T),Y=>s(T,Y)),c(ke,_e)},De=ke=>{var _e=at(),Ie=he(_e);{var Ae=$e=>{Oa($e,{get rubricData(){return r($)},get markdown(){return r(fe)},get explanation(){return r(R)},get promptUsed(){return r(A)},get rawResponse(){return r(O)},get allowManualEdit(){return r(j)},onaccept:We,onregenerate:ye,oncancel:Qe,onjsonUpdated:Ye})},Te=$e=>{var Oe=at(),it=he(Oe);{var u=p=>{var J=qa(),de=t(J),te=t(de),W=t(te,!0);e(te);var z=o(te,2);z.__click=Ce,e(de);var g=o(de,2),y=t(g),f=t(y,!0);e(y),e(g);var S=o(g,2);{var I=le=>{var Q=Fa(),ae=t(Q),Me=t(ae,!0);e(ae);var Re=o(ae,2),je=t(Re),Je=t(je,!0);e(je),e(Re),e(Q),x(Fe=>{i(Me,Fe),i(Je,r(O))},[()=>_?a()("rubrics.ai.showRawResponse",{default:"Show Raw AI Response"}):"Show Raw AI Response"]),c(le,Q)};N(S,le=>{r(O)&&le(I)})}var B=o(S,2),H=t(B);H.__click=Ce;var ie=t(H,!0);e(H);var se=o(H,2);se.__click=ye;var re=t(se,!0);e(se),e(B),e(J),x((le,Q,ae)=>{i(W,le),i(f,r(U)),i(ie,Q),i(re,ae)},[()=>_?a()("rubrics.ai.errorTitle",{default:"Generation Failed"}):"Generation Failed",()=>_?a()("common.cancel",{default:"Cancel"}):"Cancel",()=>_?a()("rubrics.ai.tryAgain",{default:"Try Again"}):"Try Again"]),c(p,J)};N(it,p=>{r(G)==="error"&&p(u)},!0)}c($e,Oe)};N(Ie,$e=>{r(G)==="preview"?$e(Ae):$e(Te,!1)},!0)}c(ke,_e)};N(ge,ke=>{r(G)==="input"?ke(dt):ke(De,!1)})}e(ee),e(pe),c(ne,pe)};N(P,ne=>{v()&&ne(D)})}c(k,Pe),Ft(),we()}Vt(["click"]);var Ka=(k,l)=>{s(l,"list"),St(`${Qt}/evaluaitor`,{replaceState:!0})},Wa=(k,l)=>{s(l,"create"),St(`${Qt}/evaluaitor?view=create`,{replaceState:!0})},Qa=w('<div class="mt-6"><div class="bg-white shadow rounded-lg p-4 border border-gray-200"><!></div></div>'),Ya=w('<h1 class="text-3xl font-bold mb-4 text-brand"> </h1> <div class="mb-6 border-b border-gray-200"><nav class="-mb-px flex space-x-8 items-center" aria-label="Tabs"><button> </button> <button> </button></nav></div> <!> <!>',1);function _o(k,l){Gt(l,!0);const m=()=>ot(zt,"$locale",we),a=()=>ot(Mr,"$user",we),K=()=>ot(Zt,"$_",we),[we,v]=qt();let d=!!m(),E=L("list"),_=L(!1),G=null;Wt(()=>{a().isLoggedIn||(window.location.href="/")});function T(P){if(P.detail&&typeof P.detail.rubricId=="string"){const D=P.detail.rubricId;console.log(`Rubric created with ID: ${D}, navigating to view page.`),St(`${Qt}/evaluaitor/${D}`,{replaceState:!0})}else console.error("handleRubricCreated received event without expected detail:",P)}function q(){s(_,!0)}function U(){s(_,!1)}function $(P){if(s(_,!1),P.detail&&P.detail.rubricId){const D=P.detail.rubricId;console.log(`AI-generated rubric created: ${D}, navigating to view page.`),St(`${Qt}/evaluaitor/${D}`,{replaceState:!0})}}cr(()=>{G=Cr.subscribe(P=>{const D=P.url.searchParams.get("view");console.log(`[+page.svelte] URL Params: view=${D}`),D==="create"?r(E)!=="create"&&(console.log("URL indicates 'create' view."),s(E,"create")):r(E)!=="list"&&(console.log("URL indicates 'list' view."),s(E,"list"))})}),$r(()=>{G&&G()});var fe=Ya();Rr(P=>{Sr.title="Evaluaitor - Educational Rubrics"});var R=he(fe),A=t(R,!0);e(R);var O=o(R,2),j=t(O),be=t(j);be.__click=[Ka,E];var Ge=t(be,!0);e(be);var ye=o(be,2);ye.__click=[Wa,E];var We=t(ye,!0);e(ye),e(j),e(O);var Qe=o(O,2);{var Ce=P=>{var D=Qa(),ne=t(D),pe=t(ne);sa(pe,{$$events:{duplicate:ee=>console.log("Duplicate rubric:",ee.detail),delete:ee=>console.log("Delete rubric:",ee.detail),export:ee=>console.log("Export rubric:",ee.detail),toggleVisibility:ee=>console.log("Toggle visibility:",ee.detail)}}),e(ne),e(D),c(P,D)},Ye=P=>{var D=at(),ne=he(D);{var pe=ee=>{xa(ee,{$$events:{formSuccess:T,openAIModal:q}})};N(ne,ee=>{r(E)==="create"&&ee(pe)},!0)}c(P,D)};N(Qe,P=>{r(E)==="list"?P(Ce):P(Ye,!1)})}var Pe=o(Qe,2);Za(Pe,{get show(){return r(_)},onclose:U,onrubricCreated:$}),x((P,D,ne)=>{i(A,P),_t(be,1,`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm rounded-t-md transition-colors duration-150 ${r(E)==="list"?"bg-brand text-white border-brand":"border-transparent text-gray-800 hover:text-gray-900 hover:border-gray-400"}`),ir(be,r(E)==="list"?"background-color: #2271b3; color: white; border-color: #2271b3;":""),i(Ge,D),_t(ye,1,`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm rounded-t-md ${r(E)==="create"?"bg-brand text-white border-brand":"border-transparent text-gray-800 hover:text-gray-900 hover:border-gray-400"}`),ir(ye,r(E)==="create"?"background-color: #2271b3; color: white; border-color: #2271b3;":""),i(We,ne)},[()=>d?K()("evaluaitor.title",{default:"Evaluaitor"}):"Evaluaitor",()=>d?K()("evaluaitor.myRubricsTab",{default:"My Rubrics"}):"My Rubrics",()=>d?K()("evaluaitor.createRubricTab",{default:"Create Rubric"}):"Create Rubric"]),c(k,fe),Ft(),v()}Vt(["click"]);export{_o as component};
