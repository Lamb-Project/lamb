import"../chunks/Bzak7iHL.js";import{d as Ft,p as Dt,s as y,a as da,M as qt,aO as Bt,f,l as Ae,j as t,t as x,c as u,h as Rt,g as e,i as s,m as i,r as a,b as r,k as Ye,e as Za,o as Ie,q as Nt,n as vt,Q as dt,R as ct}from"../chunks/D10uF6KO.js";import{i as h}from"../chunks/B5RjaZpx.js";import{e as va,i as Pa}from"../chunks/BY88_K0J.js";import{s as Xe,a as Fe,r as ye,b as It,c as Tt}from"../chunks/gDFrtnMu.js";import{s as Qa}from"../chunks/BPb77SYP.js";import{b as He,a as pa}from"../chunks/CF2p2rhS.js";import{b as Ma}from"../chunks/DRu2A6f6.js";import{s as Vt,a as ut}from"../chunks/CAofB27F.js";import{p as Gt}from"../chunks/-YgP7Ysb.js";import{g as La}from"../chunks/5D1vQkJ2.js";import{b as ja}from"../chunks/CjgJlaKl.js";import{$ as Yt}from"../chunks/Cct3hKQg.js";import{a as j}from"../chunks/ngrFHoWO.js";import{g as Te}from"../chunks/BVlmaXU-.js";import{u as gt}from"../chunks/DSpOhgIp.js";function Ht(Ve,de){s(de,"dashboard"),La(`${ja}/admin`,{replaceState:!0})}function Jt(Ve,de,_e){s(de,"users"),La(`${ja}/admin?view=users`,{replaceState:!0}),_e()}function Kt(Ve,de,_e){s(de,"organizations"),La(`${ja}/admin?view=organizations`,{replaceState:!0}),_e()}function Wt(Ve,de,_e,d,Je,Ee){s(de,{email:"",name:"",password:"",role:"user",organization_id:null,user_type:"creator"},!0),s(_e,null),s(d,!1),s(Je,!0),Ee()}function Zt(Ve,de,_e,d,Je,Ee){s(de,{slug:"",name:"",admin_user_id:null,signup_enabled:!1,signup_key:"",use_system_baseline:!0,config:{version:"1.0",setups:{default:{name:"Default Setup",providers:{},knowledge_base:{}}},features:{rag_enabled:!0,mcp_enabled:!0,lti_publishing:!0,signup_enabled:!1},limits:{usage:{tokens_per_month:1e6,max_assistants:100,max_assistants_per_user:10,storage_gb:10}}}},!0),s(_e,null),s(d,!1),s(Je,!0),Ee()}async function Qt(Ve,de,_e){var d,Je;try{const Ee=de();if(!Ee)throw new Error("Authentication token not found. Please log in again.");const T=Te("/admin/organizations/system/sync");console.log(`Syncing system organization at: ${T}`);const Oe=await j.post(T,{},{headers:{Authorization:`Bearer ${Ee}`}});console.log("Sync system organization response:",Oe.data),_e(),alert("System organization synced successfully!")}catch(Ee){console.error("Error syncing system organization:",Ee);let T="Failed to sync system organization.";j.isAxiosError(Ee)&&((Je=(d=Ee.response)==null?void 0:d.data)!=null&&Je.detail)?T=Ee.response.data.detail:Ee instanceof Error&&(T=Ee.message),alert(`Error: ${T}`)}}var Xt=f('<div><h1 class="text-2xl font-semibold text-gray-800 mb-6"> </h1> <p class="text-gray-600"> </p></div>'),er=f('<p class="text-center text-gray-500 py-4"> </p>'),ar=f('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-6" role="alert"><strong class="font-bold"> </strong> <span class="block sm:inline"> </span></div> <div class="text-center"><button class="bg-brand text-white py-2 px-4 rounded hover:bg-brand-hover focus:outline-none focus:ring-2 focus:ring-brand focus:ring-opacity-50" style="background-color: #2271b3; color: white;"> </button></div>',1),tr=f('<p class="text-center text-gray-500 py-4"> </p>'),rr=f('<span class="ml-2 px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">System</span>'),sr=f('<div class="text-xs text-gray-500"> </div>'),or=f('<div class="flex items-center"><span class="text-sm font-medium text-gray-900"> </span> <!></div> <!>',1),nr=f('<span class="text-gray-400">No Organization</span>'),ir=vt('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"></path></svg>'),lr=vt('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>'),dr=f('<tr class="hover:bg-gray-50"><td class="px-6 py-4 whitespace-nowrap align-top"><div class="text-sm font-medium text-gray-900"> </div></td><td class="px-6 py-4 whitespace-nowrap align-top"><div class="text-sm text-gray-800"> </div></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 hidden md:table-cell"><span> </span></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 hidden lg:table-cell"><!></td><td class="px-6 py-4 whitespace-nowrap text-sm hidden md:table-cell"><span> </span></td><td class="px-6 py-4 whitespace-nowrap text-sm font-medium"><button class="text-amber-600 hover:text-amber-800 mr-3"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25-2.25v6.75a2.25 2.25 0 002.25 2.25z"></path></svg></button> <button><!></button></td></tr>'),cr=f('<div class="overflow-x-auto shadow-md sm:rounded-lg mb-6 border border-gray-200"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-brand uppercase tracking-wider" style="color: #2271b3;"> </th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-brand uppercase tracking-wider" style="color: #2271b3;"> </th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-brand uppercase tracking-wider hidden md:table-cell" style="color: #2271b3;"> </th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-brand uppercase tracking-wider hidden lg:table-cell" style="color: #2271b3;">Organization</th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-brand uppercase tracking-wider hidden md:table-cell" style="color: #2271b3;">Status</th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-brand uppercase tracking-wider"> </th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table></div>'),ur=f('<div class="flex justify-between items-center mb-6"><h1 class="text-2xl font-semibold text-gray-800"> </h1> <button class="bg-brand text-white py-2 px-4 rounded hover:bg-brand-hover focus:outline-none focus:ring-2 focus:ring-brand focus:ring-opacity-50" style="background-color: #2271b3; color: white;"> </button></div> <!>',1),gr=f('<p class="text-center text-gray-500 py-4"> </p>'),vr=f('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-6" role="alert"><strong class="font-bold"> </strong> <span class="block sm:inline"> </span></div> <div class="text-center"><button class="bg-brand text-white py-2 px-4 rounded hover:bg-brand-hover focus:outline-none focus:ring-2 focus:ring-brand focus:ring-opacity-50" style="background-color: #2271b3; color: white;"> </button></div>',1),pr=f('<p class="text-center text-gray-500 py-4"> </p>'),fr=(Ve,de,_e)=>de(e(_e)),mr=(Ve,de,_e)=>de(e(_e)),br=(Ve,de,_e)=>de(e(_e).slug),_r=f('<button class="text-red-600 hover:text-red-800"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"></path></svg></button>'),xr=f('<tr class="hover:bg-gray-50"><td class="px-6 py-4 whitespace-nowrap align-top"><div class="text-sm font-medium text-gray-900"> </div></td><td class="px-6 py-4 whitespace-nowrap align-top"><div class="text-sm text-gray-800 font-mono"> </div></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 hidden md:table-cell"><span> </span></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 hidden lg:table-cell"><span> </span></td><td class="px-6 py-4 whitespace-nowrap text-sm font-medium"><div class="flex space-x-2"><button class="text-green-600 hover:text-green-800" title="Administer Organization" aria-label="Administer Organization"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg></button> <button class="text-blue-600 hover:text-blue-800"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg></button> <!></div></td></tr>'),hr=f('<div class="overflow-x-auto shadow-md sm:rounded-lg mb-6 border border-gray-200"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-brand uppercase tracking-wider" style="color: #2271b3;"> </th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-brand uppercase tracking-wider" style="color: #2271b3;"> </th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-brand uppercase tracking-wider hidden md:table-cell" style="color: #2271b3;"> </th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-brand uppercase tracking-wider hidden lg:table-cell" style="color: #2271b3;"> </th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-brand uppercase tracking-wider"> </th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table></div>'),yr=f('<div class="flex justify-between items-center mb-6"><h1 class="text-2xl font-semibold text-gray-800"> </h1> <div class="flex space-x-2"><button class="bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-600 focus:ring-opacity-50" aria-label="Sync System Organization">Sync System</button> <button class="bg-brand text-white py-2 px-4 rounded hover:bg-brand-hover focus:outline-none focus:ring-2 focus:ring-brand focus:ring-opacity-50" style="background-color: #2271b3; color: white;"> </button></div></div> <!>',1),wr=f('<div class="mt-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline"> </span></div>'),kr=f('<div class="mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline"> </span></div>'),zr=f('<form class="mt-4"><!> <div class="mb-4 text-left"><label for="email" class="block text-gray-700 text-sm font-bold mb-2"> </label> <input type="email" id="email" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-500 bg-gray-100 leading-tight" disabled readonly=""/></div> <div class="mb-6 text-left"><label for="new_password" class="block text-gray-700 text-sm font-bold mb-2"> </label> <input type="password" id="new_password" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required autocomplete="new-password" minlength="8"/> <p class="text-gray-500 text-xs italic mt-1"> </p></div> <div class="flex items-center justify-between"><button type="button" class="bg-gray-300 hover:bg-gray-400 text-gray-800 py-2 px-4 rounded focus:outline-none focus:shadow-outline"> </button> <button type="submit" class="bg-brand text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline disabled:opacity-50" style="background-color: #2271b3; color: white;"> </button></div></form>'),Ar=f('<div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center"><div class="relative mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white"><div class="mt-3 text-center"><h3 class="text-lg leading-6 font-medium text-gray-900"> </h3> <p class="text-sm text-gray-500 mt-1"> </p> <!></div></div></div>'),Er=f('<div class="mt-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline"> </span></div>'),Ur=f('<div class="mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline"> </span></div>'),Cr=f('<div class="text-gray-500 text-sm">Loading organizations...</div>'),$r=f('<div class="text-red-500 text-sm"> </div>'),Or=f("<option> <!></option>"),Sr=f('<select id="organization" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"><option>Select an organization (optional)</option><!></select>'),Pr=f('<form class="mt-4"><!> <div class="mb-4 text-left"><label for="email" class="block text-gray-700 text-sm font-bold mb-2"> </label> <input type="email" id="email" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required/></div> <div class="mb-4 text-left"><label for="name" class="block text-gray-700 text-sm font-bold mb-2"> </label> <input type="text" id="name" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required/></div> <div class="mb-4 text-left"><label for="password" class="block text-gray-700 text-sm font-bold mb-2"> </label> <input type="password" id="password" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required/></div> <div class="mb-4 text-left"><label for="role" class="block text-gray-700 text-sm font-bold mb-2"> </label> <select id="role" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"><option> </option><option> </option></select></div> <div class="mb-4 text-left"><label for="user_type" class="block text-gray-700 text-sm font-bold mb-2">User Type</label> <select id="user_type" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"><option>Creator (Can create assistants)</option><option>End User (Redirects to Open WebUI)</option></select></div> <div class="mb-6 text-left"><label for="organization" class="block text-gray-700 text-sm font-bold mb-2">Organization</label> <!> <p class="text-gray-500 text-xs italic mt-1">If no organization is selected, the user will be assigned to the system organization by default.</p></div> <div class="flex items-center justify-between"><button type="button" class="bg-gray-300 hover:bg-gray-400 text-gray-800 py-2 px-4 rounded focus:outline-none focus:shadow-outline"> </button> <button type="submit" class="bg-brand text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline disabled:opacity-50" style="background-color: #2271b3; color: white;"> </button></div></form>'),Mr=f('<div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center"><div class="relative mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white"><div class="mt-3 text-center"><h3 class="text-lg leading-6 font-medium text-gray-900"> </h3> <!></div></div></div>'),Lr=f('<div class="mt-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline"> </span></div>'),jr=f('<div class="mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline"> </span></div>'),Fr=f('<div class="text-gray-500 text-sm">Loading system users...</div>'),Dr=f('<div class="text-red-500 text-sm"> </div>'),qr=f("<option> </option>"),Br=f('<select id="admin_user" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required><option>Select a user from system organization...</option><!></select>'),Rr=f('<div><label for="signup_key" class="block text-gray-600 text-sm mb-1">Signup Key *</label> <input type="text" id="signup_key" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" pattern="[a-zA-Z0-9_-]+" title="Only letters, numbers, hyphens, and underscores allowed" minlength="8" maxlength="64"/> <p class="text-gray-500 text-xs italic mt-1">Unique key for users to signup to this organization (8-64 characters)</p></div>'),Nr=f('<form class="mt-4"><!> <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"><div class="text-left"><label for="org_slug" class="block text-gray-700 text-sm font-bold mb-2"> </label> <input type="text" id="org_slug" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required pattern="[a-z0-9-]+" title="Only lowercase letters, numbers, and hyphens allowed"/> <p class="text-gray-500 text-xs italic mt-1">URL-friendly identifier (lowercase, numbers, hyphens only)</p></div> <div class="text-left"><label for="org_name" class="block text-gray-700 text-sm font-bold mb-2"> </label> <input type="text" id="org_name" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required/></div></div> <div class="mb-4 text-left"><label for="admin_user" class="block text-gray-700 text-sm font-bold mb-2">Organization Admin *</label> <!> <p class="text-gray-500 text-xs italic mt-1">Select a user from the system organization to become admin of this organization. <strong>Note:</strong> System admins are not eligible as they must remain in the system organization.</p></div> <div class="mb-4 text-left"><label for="signup_config_section" class="block text-gray-700 text-sm font-bold mb-2">Signup Configuration</label> <div id="signup_config_section" class="mb-3"><label class="flex items-center"><input type="checkbox" class="mr-2"/> <span class="text-sm">Enable organization-specific signup</span></label></div> <!></div> <div class="mb-4 text-left"><label class="flex items-center"><input type="checkbox" class="mr-2"/> <span class="text-sm">Copy system organization configuration as baseline</span></label> <p class="text-gray-500 text-xs italic mt-1">Inherit providers and settings from the system organization</p></div> <div class="mb-4 text-left"><label for="org_features" class="block text-gray-700 text-sm font-bold mb-2"> </label> <div class="grid grid-cols-2 gap-2"><label class="flex items-center"><input type="checkbox" class="mr-2"/> <span class="text-sm">RAG Enabled</span></label> <label class="flex items-center"><input type="checkbox" class="mr-2"/> <span class="text-sm">MCP Enabled</span></label> <label class="flex items-center"><input type="checkbox" class="mr-2"/> <span class="text-sm">LTI Publishing</span></label> <label class="flex items-center"><input type="checkbox" class="mr-2"/> <span class="text-sm">Signup Enabled</span></label></div></div> <div class="mb-4 text-left" style="display: none;"><label for="org_limits" class="block text-gray-700 text-sm font-bold mb-2"> </label> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div><label for="tokens_per_month" class="block text-gray-600 text-xs mb-1">Tokens/Month</label> <input type="number" id="tokens_per_month" class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 text-sm leading-tight focus:outline-none focus:shadow-outline" min="0"/></div> <div><label for="max_assistants" class="block text-gray-600 text-xs mb-1">Max Assistants</label> <input type="number" id="max_assistants" class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 text-sm leading-tight focus:outline-none focus:shadow-outline" min="1"/></div> <div><label for="storage_gb" class="block text-gray-600 text-xs mb-1">Storage (GB)</label> <input type="number" id="storage_gb" class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 text-sm leading-tight focus:outline-none focus:shadow-outline" min="0" step="0.1"/></div></div></div> <div class="flex items-center justify-between"><button type="button" class="bg-gray-300 hover:bg-gray-400 text-gray-800 py-2 px-4 rounded focus:outline-none focus:shadow-outline"> </button> <button type="submit" class="bg-brand text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline disabled:opacity-50" style="background-color: #2271b3; color: white;"> </button></div></form>'),Ir=f('<div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center"><div class="relative mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white"><div class="mt-3"><h3 class="text-lg leading-6 font-medium text-gray-900 text-center"> </h3> <!></div></div></div>'),Tr=f('<div class="text-center py-8"><p class="text-gray-500">Loading configuration...</p></div>'),Vr=f('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><strong class="font-bold">Error:</strong> <span class="block sm:inline"> </span></div>'),Gr=f('<div class="text-xs"><strong>Providers:</strong> </div>'),Yr=f('<div class="bg-white p-3 rounded border"><h5 class="font-medium text-sm text-gray-800"> </h5> <p class="text-xs text-gray-600 mb-1"> </p> <!></div>'),Hr=f('<div class="mt-6"><h4 class="text-sm font-medium text-gray-700 mb-2">Setups Summary:</h4> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"></div></div>'),Jr=f('<div class="flex items-center text-xs"><span></span> <span class="capitalize"> </span></div>'),Kr=f('<div class="mt-4"><h4 class="text-sm font-medium text-gray-700 mb-2">Features:</h4> <div class="grid grid-cols-2 md:grid-cols-4 gap-2"></div></div>'),Wr=f('<div class="mt-4"><h4 class="text-sm font-medium text-gray-700 mb-2">Usage Limits:</h4> <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-xs"><div><strong>Tokens/Month:</strong> </div> <div><strong>Max Assistants:</strong> </div> <div><strong>Storage:</strong> </div></div></div>'),Zr=f('<div class="bg-gray-50 rounded-lg p-4"><h4 class="text-sm font-medium text-gray-700 mb-2">Configuration JSON:</h4> <pre class="bg-white p-4 rounded border text-xs overflow-x-auto"><code> </code></pre> <!> <!> <!></div>'),Qr=f('<div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center"><div class="relative mx-auto p-5 border w-full max-w-4xl shadow-lg rounded-md bg-white max-h-[90vh] overflow-y-auto"><div class="mt-3"><div class="flex justify-between items-center mb-4"><h3 class="text-lg leading-6 font-medium text-gray-900"> </h3> <button class="text-gray-400 hover:text-gray-600" aria-label="Close"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <!> <div class="mt-6 text-center"><button class="bg-gray-300 hover:bg-gray-400 text-gray-800 py-2 px-4 rounded focus:outline-none focus:shadow-outline">Close</button></div></div></div></div>'),Xr=f('<div class="container mx-auto px-4 py-8"><div class="border-b border-gray-200 mb-6"><ul class="flex flex-wrap -mb-px"><li class="mr-2"><button> </button></li> <li class="mr-2"><button> </button></li> <li class="mr-2"><button> </button></li></ul></div> <!></div> <!> <!> <!> <!>',1);function ms(Ve,de){Dt(de,!0);const _e=()=>ut(gt,"$user",Je),d=()=>ut(Yt,"$_",Je),[Je,Ee]=Vt();let T=y("users"),Oe=y(null),Ke=y(da([])),xa=y(!1),ta=y(null),Fa=y(!1),V=y(da({email:"",name:"",password:"",role:"user",organization_id:null,user_type:"creator"})),ha=y(!1),De=y(null),Da=y(!1),ya=y(da([])),wa=y(!1),ra=y(null),ka=y(!1),ea=y(da({email:"",new_password:""})),za=y(!1),qe=y(null),qa=y(!1),Ba=y(""),fa=y(da([])),Aa=y(!1),sa=y(null),Ea=y(!1),b=y(da({slug:"",name:"",admin_user_id:null,signup_enabled:!1,signup_key:"",use_system_baseline:!0,config:{version:"1.0",setups:{default:{name:"Default Setup",providers:{},knowledge_base:{}}},features:{rag_enabled:!0,mcp_enabled:!0,lti_publishing:!0,signup_enabled:!1},limits:{usage:{tokens_per_month:1e6,max_assistants:100,max_assistants_per_user:10,storage_gb:10}}}})),Ua=y(!1),Se=y(null),Ra=y(!1),Ca=y(da([])),$a=y(!1),oa=y(null),Oa=y(!1),ma=y(null),Ce=y(null),Na=y(!1),aa=y(null),Ia=null,Ta=null;function Xa(){s(Fa,!1),s(De,null)}function pt(l,c){s(ea,{email:l,new_password:""},!0),s(Ba,c,!0),s(qe,null),s(qa,!1),s(ka,!0)}function Va(){s(ka,!1),s(qe,null),s(Ba,"")}async function ft(l){var o,g;const c=!l.enabled,v=c?"enable":"disable";if(e(Oe)&&e(Oe).email===l.email&&!c){alert("You cannot disable your own account. Please ask another administrator to disable your account if needed.");return}if(confirm(`Are you sure you want to ${v} ${l.name} (${l.email})?`))try{const n=Re();if(!n)throw new Error("Authentication token not found. Please log in again.");const _=Te(`/admin/users/${l.id}/status`);console.log(`${v==="enable"?"Enabling":"Disabling"} user ${l.email} at: ${_}`);const F=await j.put(_,{enabled:c},{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});console.log(`User ${v} response:`,F.data);const S=e(Ke).findIndex(C=>C.id===l.id);S!==-1&&(e(Ke)[S].enabled=c,s(Ke,[...e(Ke)],!0)),alert(`User ${l.name} has been ${c?"enabled":"disabled"} successfully.`)}catch(n){console.error(`Error ${v}ing user:`,n);let _=`Failed to ${v} user.`;j.isAxiosError(n)&&((g=(o=n.response)==null?void 0:o.data)!=null&&g.detail)?_=n.response.data.detail:n instanceof Error&&(_=n.message),alert(`Error: ${_}`)}}function Ga(){s(Ea,!1),s(Se,null)}function mt(l){s(ma,l,!0),s(Ce,null),s(aa,null),s(Oa,!0),kt(l.slug)}function Ya(){s(Oa,!1),s(ma,null),s(Ce,null),s(aa,null)}function bt(l){La(`${ja}/org-admin?org=${l.slug}`)}async function _t(l){var c,v,o,g;if(l.preventDefault(),!e(V).email||!e(V).name||!e(V).password){s(De,"Please fill in all required fields.");return}if(!e(V).email.includes("@")){s(De,"Please enter a valid email address.");return}s(De,null),s(ha,!0);try{const n=Re();if(!n)throw new Error("Authentication token not found. Please log in again.");const _=new URLSearchParams;_.append("email",e(V).email),_.append("name",e(V).name),_.append("password",e(V).password),_.append("role",e(V).role),_.append("user_type",e(V).user_type),e(V).organization_id&&_.append("organization_id",String(e(V).organization_id));const F=Te("/admin/users/create");console.log(`Creating user at: ${F}`);const S=await j.post(F,_,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/x-www-form-urlencoded"}});if(console.log("Create user response:",S.data),S.data&&S.data.success)s(Da,!0),setTimeout(()=>{Xa(),ba()},1500);else throw new Error(S.data.error||"Failed to create user.")}catch(n){if(console.error("Error creating user:",n),j.isAxiosError(n)&&((v=(c=n.response)==null?void 0:c.data)!=null&&v.error))s(De,n.response.data.error,!0);else if(j.isAxiosError(n)&&((g=(o=n.response)==null?void 0:o.data)!=null&&g.detail))if(Array.isArray(n.response.data.detail)){const _=n.response.data.detail;s(De,_.map(F=>F.msg).join(", "),!0)}else s(De,n.response.data.detail,!0);else n instanceof Error?s(De,n.message,!0):s(De,"An unknown error occurred while creating the user.")}finally{s(ha,!1)}}async function xt(l){var c,v,o,g;if(l.preventDefault(),!e(ea).new_password){s(qe,"Please enter a new password.");return}if(e(ea).new_password.length<8){s(qe,"Password should be at least 8 characters.");return}s(qe,null),s(za,!0);try{const n=Re();if(!n)throw new Error("Authentication token not found. Please log in again.");const _=new URLSearchParams;_.append("email",e(ea).email),_.append("new_password",e(ea).new_password);const F=Te("/admin/users/update-password");console.log(`Changing password at: ${F}`);const S=await j.post(F,_,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/x-www-form-urlencoded"}});if(console.log("Change password response:",S.data),S.data&&S.data.success)s(qa,!0),setTimeout(()=>{Va()},1500);else throw new Error(S.data.error||S.data.message||"Failed to change password.")}catch(n){if(console.error("Error changing password:",n),j.isAxiosError(n)&&((v=(c=n.response)==null?void 0:c.data)!=null&&v.error))s(qe,n.response.data.error,!0);else if(j.isAxiosError(n)&&((g=(o=n.response)==null?void 0:o.data)!=null&&g.detail))if(Array.isArray(n.response.data.detail)){const _=n.response.data.detail;s(qe,_.map(F=>F.msg).join(", "),!0)}else s(qe,n.response.data.detail,!0);else n instanceof Error?s(qe,n.message,!0):s(qe,"An unknown error occurred while changing the password.")}finally{s(za,!1)}}async function ht(l){var c,v;if(l.preventDefault(),!e(b).slug||!e(b).name){s(Se,"Please fill in all required fields.");return}if(!e(b).admin_user_id){s(Se,"Please select an admin user for the organization.");return}if(!/^[a-z0-9-]+$/.test(e(b).slug)){s(Se,"Slug must contain only lowercase letters, numbers, and hyphens.");return}if(e(b).signup_enabled&&(!e(b).signup_key||e(b).signup_key.trim().length<8)){s(Se,"Signup key must be at least 8 characters long when signup is enabled.");return}if(e(b).signup_key&&!/^[a-zA-Z0-9_-]+$/.test(e(b).signup_key)){s(Se,"Signup key can only contain letters, numbers, hyphens, and underscores.");return}s(Se,null),s(Ua,!0);try{const o=Re();if(!o)throw new Error("Authentication token not found. Please log in again.");const g=Te("/admin/organizations/enhanced");console.log(`Creating organization with admin assignment at: ${g}`);const n={slug:e(b).slug,name:e(b).name,admin_user_id:parseInt(e(b).admin_user_id),signup_enabled:e(b).signup_enabled,signup_key:e(b).signup_enabled?e(b).signup_key.trim():null,use_system_baseline:e(b).use_system_baseline};console.log("Organization creation payload:",n);const _=await j.post(g,n,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}});if(console.log("Create organization response:",_.data),_.data)s(Ra,!0),setTimeout(()=>{Ga(),na()},1500);else throw new Error("Failed to create organization.")}catch(o){console.error("Error creating organization:",o),j.isAxiosError(o)&&((v=(c=o.response)==null?void 0:c.data)!=null&&v.detail)?s(Se,o.response.data.detail,!0):o instanceof Error?s(Se,o.message,!0):s(Se,"An unknown error occurred while creating the organization.")}finally{s(Ua,!1)}}function et(l){l.key==="Escape"&&(e(Ea)?Ga():e(Oa)?Ya():e(ka)&&Va())}qt(()=>{console.log("Admin page mounted"),document.addEventListener("keydown",et),Ta=gt.subscribe(l=>{var c;if(s(Oe,l,!0),l.isLoggedIn){console.log("User is logged in:",l.email);const v=(c=l.data)==null?void 0:c.role;v==="admin"?console.log("User has admin role, can access admin features"):console.warn("User doesn't have admin role:",v)}else console.warn("User not logged in, redirecting...")}),Ia=Gt.subscribe(l=>{console.log("Admin page store updated:",l.url.searchParams.toString());const c=l.url.searchParams.get("view");c==="users"?(console.log("URL indicates 'users' view."),s(T,"users"),ba()):c==="organizations"?(console.log("URL indicates 'organizations' view."),s(T,"organizations"),na()):(console.log("URL indicates 'dashboard' view."),s(T,"dashboard"))}),e(T)==="users"?ba():e(T)==="organizations"&&na()}),Bt(()=>{console.log("Admin page unmounting"),document.removeEventListener("keydown",et),Ia&&Ia(),Ta&&Ta()});function Re(){const l=_e();return!l.isLoggedIn||!l.token?(console.error("No authentication token available. User must be logged in."),null):l.token}async function ba(){var l,c,v;if(e(xa)){console.log("Already loading users, skipping duplicate request");return}console.log("Fetching users..."),s(xa,!0),s(ta,null);try{const o=Re();if(!o)throw new Error("Authentication token not found. Please log in again.");const g=Te("/users");console.log(`Fetching users from: ${g}`);const n=await j.get(g,{headers:{Authorization:`Bearer ${o}`}});if(console.log("API Response:",n.data),n.data&&n.data.success)s(Ke,n.data.data||[],!0),console.log(`Fetched ${e(Ke).length} users`);else throw new Error(n.data.error||"Failed to fetch users.")}catch(o){console.error("Error fetching users:",o),j.isAxiosError(o)&&((l=o.response)==null?void 0:l.status)===401?s(ta,"Access denied. Admin privileges required."):j.isAxiosError(o)&&((v=(c=o.response)==null?void 0:c.data)!=null&&v.error)?s(ta,o.response.data.error,!0):o instanceof Error?s(ta,o.message,!0):s(ta,"An unknown error occurred while fetching users."),s(Ke,[],!0)}finally{s(xa,!1)}}async function na(){var l,c,v;if(e(Aa)){console.log("Already loading organizations, skipping duplicate request");return}console.log("Fetching organizations..."),s(Aa,!0),s(sa,null);try{const o=Re();if(!o)throw new Error("Authentication token not found. Please log in again.");const g=Te("/admin/organizations");console.log(`Fetching organizations from: ${g}`);const n=await j.get(g,{headers:{Authorization:`Bearer ${o}`}});if(console.log("Organizations API Response:",n.data),n.data&&Array.isArray(n.data))s(fa,n.data,!0),console.log(`Fetched ${e(fa).length} organizations`);else throw new Error("Invalid response format.")}catch(o){console.error("Error fetching organizations:",o),j.isAxiosError(o)&&((l=o.response)==null?void 0:l.status)===401?s(sa,"Access denied. Admin privileges required."):j.isAxiosError(o)&&((v=(c=o.response)==null?void 0:c.data)!=null&&v.detail)?s(sa,o.response.data.detail,!0):o instanceof Error?s(sa,o.message,!0):s(sa,"An unknown error occurred while fetching organizations."),s(fa,[],!0)}finally{s(Aa,!1)}}async function yt(){var l,c,v;if(e($a)){console.log("Already loading system users, skipping duplicate request");return}console.log("Fetching system organization users..."),s($a,!0),s(oa,null);try{const o=Re();if(!o)throw new Error("Authentication token not found. Please log in again.");const g=Te("/admin/organizations/system/users");console.log(`Fetching system users from: ${g}`);const n=await j.get(g,{headers:{Authorization:`Bearer ${o}`}});if(console.log("System Users API Response:",n.data),n.data&&Array.isArray(n.data))s(Ca,n.data,!0),console.log(`Fetched ${e(Ca).length} system org users`);else throw new Error("Invalid response format.")}catch(o){console.error("Error fetching system org users:",o),j.isAxiosError(o)&&((l=o.response)==null?void 0:l.status)===401?s(oa,"Access denied. Admin privileges required."):j.isAxiosError(o)&&((v=(c=o.response)==null?void 0:c.data)!=null&&v.detail)?s(oa,o.response.data.detail,!0):o instanceof Error?s(oa,o.message,!0):s(oa,"An unknown error occurred while fetching system users."),s(Ca,[],!0)}finally{s($a,!1)}}async function wt(){var l,c,v;if(e(wa)){console.log("Already loading organizations for users, skipping duplicate request");return}console.log("Fetching organizations for user creation..."),s(wa,!0),s(ra,null);try{const o=Re();if(!o)throw new Error("Authentication token not found. Please log in again.");const g=Te("/admin/organizations/list");console.log(`Fetching organizations for users from: ${g}`);const n=await j.get(g,{headers:{Authorization:`Bearer ${o}`}});if(console.log("Organizations for Users API Response:",n.data),n.data&&n.data.success&&Array.isArray(n.data.data))s(ya,n.data.data,!0),console.log(`Fetched ${e(ya).length} organizations for user assignment`);else throw new Error("Invalid response format.")}catch(o){console.error("Error fetching organizations for users:",o),j.isAxiosError(o)&&((l=o.response)==null?void 0:l.status)===401?s(ra,"Access denied. Admin privileges required."):j.isAxiosError(o)&&((v=(c=o.response)==null?void 0:c.data)!=null&&v.detail)?s(ra,o.response.data.detail,!0):o instanceof Error?s(ra,o.message,!0):s(ra,"An unknown error occurred while fetching organizations."),s(ya,[],!0)}finally{s(wa,!1)}}async function kt(l){var c,v;if(l){s(Na,!0),s(aa,null);try{const o=Re();if(!o)throw new Error("Authentication token not found. Please log in again.");const g=Te(`/admin/organizations/${l}/config`);console.log(`Fetching organization config from: ${g}`);const n=await j.get(g,{headers:{Authorization:`Bearer ${o}`}});console.log("Organization config response:",n.data),s(Ce,n.data,!0)}catch(o){console.error("Error fetching organization config:",o),j.isAxiosError(o)&&((v=(c=o.response)==null?void 0:c.data)!=null&&v.detail)?s(aa,o.response.data.detail,!0):o instanceof Error?s(aa,o.message,!0):s(aa,"An unknown error occurred while fetching configuration.")}finally{s(Na,!1)}}}async function zt(l){var c,v;if(confirm(`Are you sure you want to delete organization '${l}'? This action cannot be undone.`))try{const o=Re();if(!o)throw new Error("Authentication token not found. Please log in again.");const g=Te(`/admin/organizations/${l}`);console.log(`Deleting organization at: ${g}`);const n=await j.delete(g,{headers:{Authorization:`Bearer ${o}`}});console.log("Delete organization response:",n.data),na(),alert(`Organization '${l}' deleted successfully!`)}catch(o){console.error("Error deleting organization:",o);let g="Failed to delete organization.";j.isAxiosError(o)&&((v=(c=o.response)==null?void 0:c.data)!=null&&v.detail)?g=o.response.data.detail:o instanceof Error&&(g=o.message),alert(`Error: ${g}`)}}var at=Xr(),Ha=Ae(at),Ja=t(Ha),tt=t(Ja),Ka=t(tt),ca=t(Ka);ca.__click=[Ht,T];var At=t(ca,!0);a(ca),a(Ka);var Wa=r(Ka,2),ua=t(Wa);ua.__click=[Jt,T,ba];var Et=t(ua,!0);a(ua),a(Wa);var rt=r(Wa,2),ga=t(rt);ga.__click=[Kt,T,na];var Ut=t(ga,!0);a(ga),a(rt),a(tt),a(Ja);var Ct=r(Ja,2);{var $t=l=>{var c=Xt(),v=t(c),o=t(v,!0);a(v);var g=r(v,2),n=t(g,!0);a(g),a(c),x((_,F)=>{i(o,_),i(n,F)},[()=>d()("admin.dashboard.title",{default:"Admin Dashboard"}),()=>d()("admin.dashboard.welcome",{default:"Welcome to the administration area. Use the tabs above to navigate."})]),u(l,c)},Ot=l=>{var c=Ye(),v=Ae(c);{var o=n=>{var _=ur(),F=Ae(_),S=t(F),C=t(S,!0);a(S);var $=r(S,2);$.__click=[Wt,V,De,Da,Fa,wt];var O=t($,!0);a($),a(F);var q=r(F,2);{var P=I=>{var G=er(),pe=t(G,!0);a(G),x(X=>i(pe,X),[()=>d()("admin.users.loading",{default:"Loading users..."})]),u(I,G)},te=I=>{var G=Ye(),pe=Ae(G);{var X=ee=>{var D=ar(),E=Ae(D),ae=t(E),fe=t(ae,!0);a(ae);var J=r(ae,2),A=t(J,!0);a(J),a(E);var Y=r(E,2),M=t(Y);M.__click=ba;var H=t(M,!0);a(M),a(Y),x((K,L)=>{i(fe,K),i(A,e(ta)),i(H,L)},[()=>d()("admin.users.errorTitle",{default:"Error:"}),()=>d()("admin.users.retry",{default:"Retry"})]),u(ee,D)},le=ee=>{var D=Ye(),E=Ae(D);{var ae=J=>{var A=tr(),Y=t(A,!0);a(A),x(M=>i(Y,M),[()=>d()("admin.users.noUsers",{default:"No users found."})]),u(J,A)},fe=J=>{var A=cr(),Y=t(A),M=t(Y),H=t(M),K=t(H),L=t(K,!0);a(K);var B=r(K),w=t(B,!0);a(B);var k=r(B),W=t(k,!0);a(k);var Z=r(k,3),xe=t(Z,!0);a(Z),a(H),a(M);var re=r(M);va(re,21,()=>e(Ke),ce=>ce.id,(ce,m,se,R)=>{var we=dr(),ue=t(we),Pe=t(ue),z=t(Pe,!0);a(Pe),a(ue);var N=r(ue),U=t(N),ge=t(U,!0);a(U),a(N);var me=r(N),Q=t(me),he=t(Q,!0);a(Q),a(me);var ve=r(me),We=t(ve);{var Ge=ne=>{var ie=or(),be=Ae(ie),ze=t(be),_a=t(ze,!0);a(ze);var Qe=r(ze,2);{var ia=je=>{var la=rr();u(je,la)};h(Qe,je=>{e(m).organization.is_system&&je(ia)})}a(be);var it=r(be,2);{var lt=je=>{var la=sr(),Sa=t(la,!0);a(la),x(()=>i(Sa,e(m).organization_role)),u(je,la)};h(it,je=>{e(m).organization_role&&e(m).organization_role!=="member"&&je(lt)})}x(()=>i(_a,e(m).organization.name||"-")),u(ne,ie)},Me=ne=>{var ie=nr();u(ne,ie)};h(We,ne=>{e(m).organization?ne(Ge):ne(Me,!1)})}a(ve);var ke=r(ve),Le=t(ke),Ze=t(Le,!0);a(Le),a(ke);var Be=r(ke),Ne=t(Be);Ne.__click=()=>pt(e(m).email,e(m).name);var p=r(Ne,2);p.__click=()=>ft(e(m));var oe=t(p);{var Ue=ne=>{var ie=ir();u(ne,ie)},$e=ne=>{var ie=lr();u(ne,ie)};h(oe,ne=>{e(m).enabled?ne(Ue):ne($e,!1)})}a(p),a(Be),a(we),x((ne,ie)=>{i(z,e(m).name||"-"),i(ge,e(m).email),Xe(Q,1,`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${e(m).role==="admin"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`),i(he,e(m).role),Xe(Le,1,`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${e(m).enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`),i(Ze,e(m).enabled?"Active":"Disabled"),Fe(Ne,"title",ne),Fe(Ne,"aria-label",ie),Xe(p,1,Tt(e(Oe)&&e(Oe).email===e(m).email&&e(m).enabled?"text-gray-400 cursor-not-allowed":"text-blue-600 hover:text-blue-800")),Fe(p,"title",e(Oe)&&e(Oe).email===e(m).email&&e(m).enabled?"You cannot disable your own account":e(m).enabled?"Disable User":"Enable User"),Fe(p,"aria-label",e(Oe)&&e(Oe).email===e(m).email&&e(m).enabled?"You cannot disable your own account":e(m).enabled?"Disable User":"Enable User"),p.disabled=e(Oe)&&e(Oe).email===e(m).email&&e(m).enabled},[()=>d()("admin.users.actions.changePassword",{default:"Change Password"}),()=>d()("admin.users.actions.changePassword",{default:"Change Password"})]),u(ce,we)}),a(re),a(Y),a(A),x((ce,m,se,R)=>{i(L,ce),i(w,m),i(W,se),i(xe,R)},[()=>d()("admin.users.table.name",{default:"Name"}),()=>d()("admin.users.table.email",{default:"Email"}),()=>d()("admin.users.table.role",{default:"Role"}),()=>d()("admin.users.table.actions",{default:"Actions"})]),u(J,A)};h(E,J=>{e(Ke).length===0?J(ae):J(fe,!1)},!0)}u(ee,D)};h(pe,ee=>{e(ta)?ee(X):ee(le,!1)},!0)}u(I,G)};h(q,I=>{e(xa)?I(P):I(te,!1)})}x((I,G,pe)=>{i(C,I),Fe($,"aria-label",G),i(O,pe)},[()=>d()("admin.users.title",{default:"User Management"}),()=>d()("admin.users.actions.create",{default:"Create User"}),()=>d()("admin.users.actions.create",{default:"Create User"})]),u(n,_)},g=n=>{var _=Ye(),F=Ae(_);{var S=C=>{var $=yr(),O=Ae($),q=t(O),P=t(q,!0);a(q);var te=r(q,2),I=t(te);I.__click=[Qt,Re,na];var G=r(I,2);G.__click=[Zt,b,Se,Ra,Ea,yt];var pe=t(G,!0);a(G),a(te),a(O);var X=r(O,2);{var le=D=>{var E=gr(),ae=t(E,!0);a(E),x(fe=>i(ae,fe),[()=>d()("admin.organizations.loading",{default:"Loading organizations..."})]),u(D,E)},ee=D=>{var E=Ye(),ae=Ae(E);{var fe=A=>{var Y=vr(),M=Ae(Y),H=t(M),K=t(H,!0);a(H);var L=r(H,2),B=t(L,!0);a(L),a(M);var w=r(M,2),k=t(w);k.__click=na;var W=t(k,!0);a(k),a(w),x((Z,xe)=>{i(K,Z),i(B,e(sa)),i(W,xe)},[()=>d()("admin.organizations.errorTitle",{default:"Error:"}),()=>d()("admin.organizations.retry",{default:"Retry"})]),u(A,Y)},J=A=>{var Y=Ye(),M=Ae(Y);{var H=L=>{var B=pr(),w=t(B,!0);a(B),x(k=>i(w,k),[()=>d()("admin.organizations.noOrganizations",{default:"No organizations found."})]),u(L,B)},K=L=>{var B=hr(),w=t(B),k=t(w),W=t(k),Z=t(W),xe=t(Z,!0);a(Z);var re=r(Z),ce=t(re,!0);a(re);var m=r(re),se=t(m,!0);a(m);var R=r(m),we=t(R,!0);a(R);var ue=r(R),Pe=t(ue,!0);a(ue),a(W),a(k);var z=r(k);va(z,21,()=>e(fa),N=>N.id,(N,U)=>{var ge=xr(),me=t(ge),Q=t(me),he=t(Q,!0);a(Q),a(me);var ve=r(me),We=t(ve),Ge=t(We,!0);a(We),a(ve);var Me=r(ve),ke=t(Me),Le=t(ke,!0);a(ke),a(Me);var Ze=r(Me),Be=t(Ze),Ne=t(Be,!0);a(Be),a(Ze);var p=r(Ze),oe=t(p),Ue=t(oe);Ue.__click=[fr,bt,U];var $e=r(Ue,2);$e.__click=[mr,mt,U];var ne=r($e,2);{var ie=be=>{var ze=_r();ze.__click=[br,zt,U],x((_a,Qe)=>{Fe(ze,"title",_a),Fe(ze,"aria-label",Qe)},[()=>d()("admin.organizations.actions.delete",{default:"Delete Organization"}),()=>d()("admin.organizations.actions.delete",{default:"Delete Organization"})]),u(be,ze)};h(ne,be=>{e(U).is_system||be(ie)})}a(oe),a(p),a(ge),x((be,ze)=>{i(he,e(U).name||"-"),i(Ge,e(U).slug),Xe(ke,1,`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${e(U).status==="active"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`),i(Le,e(U).status),Xe(Be,1,`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${e(U).is_system?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`),i(Ne,e(U).is_system?"System":"Regular"),Fe($e,"title",be),Fe($e,"aria-label",ze)},[()=>d()("admin.organizations.actions.viewConfig",{default:"View Configuration"}),()=>d()("admin.organizations.actions.viewConfig",{default:"View Configuration"})]),u(N,ge)}),a(z),a(w),a(B),x((N,U,ge,me,Q)=>{i(xe,N),i(ce,U),i(se,ge),i(we,me),i(Pe,Q)},[()=>d()("admin.organizations.table.name",{default:"Name"}),()=>d()("admin.organizations.table.slug",{default:"Slug"}),()=>d()("admin.organizations.table.status",{default:"Status"}),()=>d()("admin.organizations.table.type",{default:"Type"}),()=>d()("admin.organizations.table.actions",{default:"Actions"})]),u(L,B)};h(M,L=>{e(fa).length===0?L(H):L(K,!1)},!0)}u(A,Y)};h(ae,A=>{e(sa)?A(fe):A(J,!1)},!0)}u(D,E)};h(X,D=>{e(Aa)?D(le):D(ee,!1)})}x((D,E,ae)=>{i(P,D),Fe(G,"aria-label",E),i(pe,ae)},[()=>d()("admin.organizations.title",{default:"Organization Management"}),()=>d()("admin.organizations.actions.create",{default:"Create Organization"}),()=>d()("admin.organizations.actions.create",{default:"Create Organization"})]),u(C,$)};h(F,C=>{e(T)==="organizations"&&C(S)},!0)}u(n,_)};h(v,n=>{e(T)==="users"?n(o):n(g,!1)},!0)}u(l,c)};h(Ct,l=>{e(T)==="dashboard"?l($t):l(Ot,!1)})}a(Ha);var st=r(Ha,2);{var St=l=>{var c=Ar(),v=t(c),o=t(v),g=t(o),n=t(g,!0);a(g);var _=r(g,2),F=t(_);a(_);var S=r(_,2);{var C=O=>{var q=wr(),P=t(q),te=t(P,!0);a(P),a(q),x(I=>i(te,I),[()=>d()("admin.users.password.success",{default:"Password changed successfully!"})]),u(O,q)},$=O=>{var q=zr(),P=t(q);{var te=K=>{var L=kr(),B=t(L),w=t(B,!0);a(B),a(L),x(()=>i(w,e(qe))),u(K,L)};h(P,K=>{e(qe)&&K(te)})}var I=r(P,2),G=t(I),pe=t(G,!0);a(G);var X=r(G,2);ye(X),a(I);var le=r(I,2),ee=t(le),D=t(ee);a(ee);var E=r(ee,2);ye(E);var ae=r(E,2),fe=t(ae,!0);a(ae),a(le);var J=r(le,2),A=t(J);A.__click=Va;var Y=t(A,!0);a(A);var M=r(A,2),H=t(M,!0);a(M),a(J),a(q),x((K,L,B,w,k)=>{i(pe,K),It(X,e(ea).email),i(D,`${L??""} *`),i(fe,B),i(Y,w),M.disabled=e(za),i(H,k)},[()=>d()("admin.users.password.email",{default:"Email"}),()=>d()("admin.users.password.newPassword",{default:"New Password"}),()=>d()("admin.users.password.hint",{default:"At least 8 characters recommended"}),()=>d()("admin.users.password.cancel",{default:"Cancel"}),()=>e(za)?d()("admin.users.password.changing",{default:"Changing..."}):d()("admin.users.password.change",{default:"Change Password"})]),Za("submit",q,xt),He(E,()=>e(ea).new_password,K=>e(ea).new_password=K),u(O,q)};h(S,O=>{e(qa)?O(C):O($,!1)})}a(o),a(v),a(c),x((O,q)=>{i(n,O),i(F,`${q??""} ${e(Ba)??""}`)},[()=>d()("admin.users.password.title",{default:"Change Password"}),()=>d()("admin.users.password.subtitle",{default:"Set a new password for"})]),u(l,c)};h(st,l=>{e(ka)&&l(St)})}var ot=r(st,2);{var Pt=l=>{var c=Mr(),v=t(c),o=t(v),g=t(o),n=t(g,!0);a(g);var _=r(g,2);{var F=C=>{var $=Er(),O=t($),q=t(O,!0);a(O),a($),x(P=>i(q,P),[()=>d()("admin.users.create.success",{default:"User created successfully!"})]),u(C,$)},S=C=>{var $=Pr(),O=t($);{var q=z=>{var N=Ur(),U=t(N),ge=t(U,!0);a(U),a(N),x(()=>i(ge,e(De))),u(z,N)};h(O,z=>{e(De)&&z(q)})}var P=r(O,2),te=t(P),I=t(te);a(te);var G=r(te,2);ye(G),a(P);var pe=r(P,2),X=t(pe),le=t(X);a(X);var ee=r(X,2);ye(ee),a(pe);var D=r(pe,2),E=t(D),ae=t(E);a(E);var fe=r(E,2);ye(fe),a(D);var J=r(D,2),A=t(J),Y=t(A,!0);a(A);var M=r(A,2),H=t(M),K=t(H,!0);a(H),H.value=H.__value="user";var L=r(H),B=t(L,!0);a(L),L.value=L.__value="admin",a(M),a(J);var w=r(J,2),k=r(t(w),2),W=t(k);W.value=W.__value="creator";var Z=r(W);Z.value=Z.__value="end_user",a(k),a(w);var xe=r(w,2),re=r(t(xe),2);{var ce=z=>{var N=Cr();u(z,N)},m=z=>{var N=Ye(),U=Ae(N);{var ge=Q=>{var he=$r(),ve=t(he,!0);a(he),x(()=>i(ve,e(ra))),u(Q,he)},me=Q=>{var he=Sr(),ve=t(he);ve.value=(ve.__value=null)??"";var We=r(ve);va(We,17,()=>e(ya),Pa,(Ge,Me)=>{var ke=Or(),Le=t(ke),Ze=r(Le);{var Be=p=>{var oe=Nt("(System)");u(p,oe)};h(Ze,p=>{e(Me).is_system&&p(Be)})}a(ke);var Ne={};x(()=>{i(Le,`${e(Me).name??""} `),Ne!==(Ne=e(Me).id)&&(ke.value=(ke.__value=e(Me).id)??"")}),u(Ge,ke)}),a(he),Ma(he,()=>e(V).organization_id,Ge=>e(V).organization_id=Ge),u(Q,he)};h(U,Q=>{e(ra)?Q(ge):Q(me,!1)},!0)}u(z,N)};h(re,z=>{e(wa)?z(ce):z(m,!1)})}Ie(2),a(xe);var se=r(xe,2),R=t(se);R.__click=Xa;var we=t(R,!0);a(R);var ue=r(R,2),Pe=t(ue,!0);a(ue),a(se),a($),x((z,N,U,ge,me,Q,he,ve)=>{i(I,`${z??""} *`),i(le,`${N??""} *`),i(ae,`${U??""} *`),i(Y,ge),i(K,me),i(B,Q),i(we,he),ue.disabled=e(ha),i(Pe,ve)},[()=>d()("admin.users.create.email",{default:"Email"}),()=>d()("admin.users.create.name",{default:"Name"}),()=>d()("admin.users.create.password",{default:"Password"}),()=>d()("admin.users.create.role",{default:"Role"}),()=>d()("admin.users.create.roleUser",{default:"User"}),()=>d()("admin.users.create.roleAdmin",{default:"Admin"}),()=>d()("admin.users.create.cancel",{default:"Cancel"}),()=>e(ha)?d()("admin.users.create.creating",{default:"Creating..."}):d()("admin.users.create.create",{default:"Create User"})]),Za("submit",$,_t),He(G,()=>e(V).email,z=>e(V).email=z),He(ee,()=>e(V).name,z=>e(V).name=z),He(fe,()=>e(V).password,z=>e(V).password=z),Ma(M,()=>e(V).role,z=>e(V).role=z),Ma(k,()=>e(V).user_type,z=>e(V).user_type=z),u(C,$)};h(_,C=>{e(Da)?C(F):C(S,!1)})}a(o),a(v),a(c),x(C=>i(n,C),[()=>d()("admin.users.create.title",{default:"Create New User"})]),u(l,c)};h(ot,l=>{e(Fa)&&l(Pt)})}var nt=r(ot,2);{var Mt=l=>{var c=Ir(),v=t(c),o=t(v),g=t(o),n=t(g,!0);a(g);var _=r(g,2);{var F=C=>{var $=Lr(),O=t($),q=t(O,!0);a(O),a($),x(P=>i(q,P),[()=>d()("admin.organizations.create.success",{default:"Organization created successfully!"})]),u(C,$)},S=C=>{var $=Nr(),O=t($);{var q=p=>{var oe=jr(),Ue=t(oe),$e=t(Ue,!0);a(Ue),a(oe),x(()=>i($e,e(Se))),u(p,oe)};h(O,p=>{e(Se)&&p(q)})}var P=r(O,2),te=t(P),I=t(te),G=t(I);a(I);var pe=r(I,2);ye(pe),Ie(2),a(te);var X=r(te,2),le=t(X),ee=t(le);a(le);var D=r(le,2);ye(D),a(X),a(P);var E=r(P,2),ae=r(t(E),2);{var fe=p=>{var oe=Fr();u(p,oe)},J=p=>{var oe=Ye(),Ue=Ae(oe);{var $e=ie=>{var be=Dr(),ze=t(be,!0);a(be),x(()=>i(ze,e(oa))),u(ie,be)},ne=ie=>{var be=Br(),ze=t(be);ze.value=(ze.__value=null)??"";var _a=r(ze);va(_a,17,()=>e(Ca).filter(Qe=>Qe.role!=="admin"),Pa,(Qe,ia,it,lt)=>{var je=qr(),la=t(je);a(je);var Sa={};x(()=>{i(la,`${e(ia).name??""} (${e(ia).email??""}) - ${e(ia).role??""}`),Sa!==(Sa=e(ia).id)&&(je.value=(je.__value=e(ia).id)??"")}),u(Qe,je)}),a(be),Ma(be,()=>e(b).admin_user_id,Qe=>e(b).admin_user_id=Qe),u(ie,be)};h(Ue,ie=>{e(oa)?ie($e):ie(ne,!1)},!0)}u(p,oe)};h(ae,p=>{e($a)?p(fe):p(J,!1)})}Ie(2),a(E);var A=r(E,2),Y=r(t(A),2),M=t(Y),H=t(M);ye(H),Ie(2),a(M),a(Y);var K=r(Y,2);{var L=p=>{var oe=Rr(),Ue=r(t(oe),2);ye(Ue),Ie(2),a(oe),x(()=>Ue.required=e(b).signup_enabled),He(Ue,()=>e(b).signup_key,$e=>e(b).signup_key=$e),u(p,oe)};h(K,p=>{e(b).signup_enabled&&p(L)})}a(A);var B=r(A,2),w=t(B),k=t(w);ye(k),Ie(2),a(w),Ie(2),a(B);var W=r(B,2),Z=t(W),xe=t(Z,!0);a(Z);var re=r(Z,2),ce=t(re),m=t(ce);ye(m),Ie(2),a(ce);var se=r(ce,2),R=t(se);ye(R),Ie(2),a(se);var we=r(se,2),ue=t(we);ye(ue),Ie(2),a(we);var Pe=r(we,2),z=t(Pe);ye(z),Ie(2),a(Pe),a(re),a(W);var N=r(W,2),U=t(N),ge=t(U,!0);a(U);var me=r(U,2),Q=t(me),he=r(t(Q),2);ye(he),a(Q);var ve=r(Q,2),We=r(t(ve),2);ye(We),a(ve);var Ge=r(ve,2),Me=r(t(Ge),2);ye(Me),a(Ge),a(me),a(N);var ke=r(N,2),Le=t(ke);Le.__click=Ga;var Ze=t(Le,!0);a(Le);var Be=r(Le,2),Ne=t(Be,!0);a(Be),a(ke),a($),x((p,oe,Ue,$e,ne,ie)=>{i(G,`${p??""} *`),i(ee,`${oe??""} *`),i(xe,Ue),i(ge,$e),i(Ze,ne),Be.disabled=e(Ua),i(Ne,ie)},[()=>d()("admin.organizations.create.slug",{default:"Slug"}),()=>d()("admin.organizations.create.name",{default:"Name"}),()=>d()("admin.organizations.create.features",{default:"Features"}),()=>d()("admin.organizations.create.limits",{default:"Usage Limits"}),()=>d()("admin.organizations.create.cancel",{default:"Cancel"}),()=>e(Ua)?d()("admin.organizations.create.creating",{default:"Creating..."}):d()("admin.organizations.create.create",{default:"Create Organization"})]),Za("submit",$,ht),He(pe,()=>e(b).slug,p=>e(b).slug=p),He(D,()=>e(b).name,p=>e(b).name=p),pa(H,()=>e(b).signup_enabled,p=>e(b).signup_enabled=p),pa(k,()=>e(b).use_system_baseline,p=>e(b).use_system_baseline=p),pa(m,()=>e(b).config.features.rag_enabled,p=>e(b).config.features.rag_enabled=p),pa(R,()=>e(b).config.features.mcp_enabled,p=>e(b).config.features.mcp_enabled=p),pa(ue,()=>e(b).config.features.lti_publishing,p=>e(b).config.features.lti_publishing=p),pa(z,()=>e(b).config.features.signup_enabled,p=>e(b).config.features.signup_enabled=p),He(he,()=>e(b).config.limits.usage.tokens_per_month,p=>e(b).config.limits.usage.tokens_per_month=p),He(We,()=>e(b).config.limits.usage.max_assistants,p=>e(b).config.limits.usage.max_assistants=p),He(Me,()=>e(b).config.limits.usage.storage_gb,p=>e(b).config.limits.usage.storage_gb=p),u(C,$)};h(_,C=>{e(Ra)?C(F):C(S,!1)})}a(o),a(v),a(c),x(C=>i(n,C),[()=>d()("admin.organizations.create.title",{default:"Create New Organization"})]),u(l,c)};h(nt,l=>{e(Ea)&&l(Mt)})}var Lt=r(nt,2);{var jt=l=>{var c=Qr(),v=t(c),o=t(v),g=t(o),n=t(g),_=t(n);a(n);var F=r(n,2);F.__click=Ya,a(g);var S=r(g,2);{var C=P=>{var te=Tr();u(P,te)},$=P=>{var te=Ye(),I=Ae(te);{var G=X=>{var le=Vr(),ee=r(t(le),2),D=t(ee,!0);a(ee),a(le),x(()=>i(D,e(aa))),u(X,le)},pe=X=>{var le=Ye(),ee=Ae(le);{var D=E=>{var ae=Zr(),fe=r(t(ae),2),J=t(fe),A=t(J,!0);a(J),a(fe);var Y=r(fe,2);{var M=w=>{var k=Hr(),W=r(t(k),2);va(W,21,()=>Object.entries(e(Ce).setups),Pa,(Z,xe)=>{var re=dt(()=>ct(e(xe),2));let ce=()=>e(re)[0],m=()=>e(re)[1];var se=Yr(),R=t(se),we=t(R,!0);a(R);var ue=r(R,2),Pe=t(ue,!0);a(ue);var z=r(ue,2);{var N=U=>{var ge=Gr(),me=r(t(ge));a(ge),x(Q=>i(me,` ${Q??""}`),[()=>Object.keys(m().providers).join(", ")||"None"]),u(U,ge)};h(z,U=>{m().providers&&U(N)})}a(se),x(()=>{i(we,m().name||ce()),i(Pe,m().is_default?"(Default)":"")}),u(Z,se)}),a(W),a(k),u(w,k)};h(Y,w=>{e(Ce).setups&&w(M)})}var H=r(Y,2);{var K=w=>{var k=Kr(),W=r(t(k),2);va(W,21,()=>Object.entries(e(Ce).features),Pa,(Z,xe)=>{var re=dt(()=>ct(e(xe),2));let ce=()=>e(re)[0],m=()=>e(re)[1];var se=Jr(),R=t(se),we=r(R,2),ue=t(we,!0);a(we),a(se),x(Pe=>{Xe(R,1,`w-2 h-2 rounded-full mr-2 ${m()?"bg-green-500":"bg-gray-300"}`),i(ue,Pe)},[()=>ce().replace("_"," ")]),u(Z,se)}),a(W),a(k),u(w,k)};h(H,w=>{e(Ce).features&&w(K)})}var L=r(H,2);{var B=w=>{var k=Wr(),W=r(t(k),2),Z=t(W),xe=r(t(Z));a(Z);var re=r(Z,2),ce=r(t(re));a(re);var m=r(re,2),se=r(t(m));a(m),a(W),a(k),x(R=>{i(xe,` ${R??""}`),i(ce,` ${(e(Ce).limits.usage.max_assistants||"Unlimited")??""}`),i(se,` ${(e(Ce).limits.usage.storage_gb||"Unlimited")??""} GB`)},[()=>{var R;return((R=e(Ce).limits.usage.tokens_per_month)==null?void 0:R.toLocaleString())||"Unlimited"}]),u(w,k)};h(L,w=>{e(Ce).limits&&e(Ce).limits.usage&&w(B)})}a(ae),x(w=>i(A,w),[()=>JSON.stringify(e(Ce),null,2)]),u(E,ae)};h(ee,E=>{e(Ce)&&E(D)},!0)}u(X,le)};h(I,X=>{e(aa)?X(G):X(pe,!1)},!0)}u(P,te)};h(S,P=>{e(Na)?P(C):P($,!1)})}var O=r(S,2),q=t(O);q.__click=Ya,a(O),a(o),a(v),a(c),x(()=>i(_,`Configuration: ${e(ma).name??""} (${e(ma).slug??""})`)),u(l,c)};h(Lt,l=>{e(Oa)&&e(ma)&&l(jt)})}x((l,c,v,o,g,n)=>{Xe(ca,1,`inline-block py-2 px-4 text-sm font-medium ${e(T)==="dashboard"?"text-white bg-brand border-brand":"text-gray-500 hover:text-brand border-transparent"} rounded-t-lg border-b-2`),Qa(ca,e(T)==="dashboard"?"background-color: #2271b3; color: white; border-color: #2271b3;":""),Fe(ca,"aria-label",l),i(At,c),Xe(ua,1,`inline-block py-2 px-4 text-sm font-medium ${e(T)==="users"?"text-white bg-brand border-brand":"text-gray-500 hover:text-brand border-transparent"} rounded-t-lg border-b-2`),Qa(ua,e(T)==="users"?"background-color: #2271b3; color: white; border-color: #2271b3;":""),Fe(ua,"aria-label",v),i(Et,o),Xe(ga,1,`inline-block py-2 px-4 text-sm font-medium ${e(T)==="organizations"?"text-white bg-brand border-brand":"text-gray-500 hover:text-brand border-transparent"} rounded-t-lg border-b-2`),Qa(ga,e(T)==="organizations"?"background-color: #2271b3; color: white; border-color: #2271b3;":""),Fe(ga,"aria-label",g),i(Ut,n)},[()=>d()("admin.tabs.dashboard",{default:"Dashboard"}),()=>d()("admin.tabs.dashboard",{default:"Dashboard"}),()=>d()("admin.tabs.users",{default:"User Management"}),()=>d()("admin.tabs.users",{default:"User Management"}),()=>d()("admin.tabs.organizations",{default:"Organizations"}),()=>d()("admin.tabs.organizations",{default:"Organizations"})]),u(Ve,at),Rt(),Ee()}Ft(["click"]);export{ms as component};
