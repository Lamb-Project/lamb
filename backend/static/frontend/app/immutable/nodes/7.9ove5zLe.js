var Fe=u=>{throw TypeError(u)};var We=(u,t,r)=>t.has(u)||Fe("Cannot "+r);var a=(u,t,r)=>(We(u,t,"read from private field"),r?r.call(u):t.get(u)),Ce=(u,t,r)=>t.has(u)?Fe("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(u):t.set(u,r);var $=(u,t,r)=>(We(u,t,"access private method"),r);import"../chunks/Bzak7iHL.js";import{I as Ne,K as lt,s as A,a as Ze,g as e,i as s,aZ as Pe,d as He,p as Be,f as M,j as n,b as p,r as o,t as N,m as U,c as w,o as Xe,Q as et,e as Te,aP as ze,h as Je,u as Oe,aY as ct,l as Ee,k as tt,n as Ge,M as ut,N as vt,$ as ht}from"../chunks/D10uF6KO.js";import{a as Ue,s as rt}from"../chunks/CAofB27F.js";import{p as it}from"../chunks/-YgP7Ysb.js";import{u as bt}from"../chunks/DSpOhgIp.js";import{g as $e}from"../chunks/5D1vQkJ2.js";import{i as B}from"../chunks/B5RjaZpx.js";import{r as Re,s as ke,a as qe}from"../chunks/gDFrtnMu.js";import{e as pt,u as ft,c as mt,g as gt,b as _t}from"../chunks/DUGLaF72.js";import{e as Ae,i as De}from"../chunks/BY88_K0J.js";import{b as pe}from"../chunks/CF2p2rhS.js";import{p as at}from"../chunks/Dpgw__wX.js";import{b as xt}from"../chunks/DRu2A6f6.js";function Ve(u,t,r){Ne(()=>{var i=lt(()=>t(u,r==null?void 0:r())||{});if(i!=null&&i.destroy)return()=>i.destroy()})}var g,Q,q,je,we,I,ge,be,Se;class yt{constructor(){Ce(this,I);Ce(this,g,A(null));Ce(this,Q,A(Ze([])));Ce(this,q,A(-1));Ce(this,je,A(!1));Ce(this,we,A(null))}get rubric(){return e(a(this,g))}get history(){return e(a(this,Q))}get historyIndex(){return e(a(this,q))}get canUndo(){return e(a(this,q))>0}get canRedo(){return e(a(this,q))<e(a(this,Q)).length-1}get loading(){return e(a(this,je))}get error(){return e(a(this,we))}loadRubric(t){var r;s(a(this,g),JSON.parse(JSON.stringify(t)),!0),(r=e(a(this,g)))!=null&&r.criteria&&e(a(this,g)).criteria.forEach(i=>{i.id||(i.id=$(this,I,Se).call(this,"criterion")),i.levels&&i.levels.forEach(l=>{l.id||(l.id=$(this,I,Se).call(this,"level"))})}),s(a(this,Q),[JSON.parse(JSON.stringify(e(a(this,g))))],!0),s(a(this,q),0),s(a(this,we),null)}updateCell(t,r,i,l){if(!e(a(this,g)))return;$(this,I,ge).call(this);const m=(e(a(this,g)).criteria||[]).find(D=>D.id===t);if(!m)return;const S=(m.levels||[]).find(D=>D.id===r);S&&(S[i]=l,$(this,I,be).call(this))}updateCriterion(t,r){if(!e(a(this,g)))return;$(this,I,ge).call(this);const l=(e(a(this,g)).criteria||[]).find(f=>f.id===t);l&&(Object.assign(l,r),$(this,I,be).call(this))}addCriterion(t){e(a(this,g))&&($(this,I,ge).call(this),e(a(this,g)).criteria||(e(a(this,g)).criteria=[]),t.id=$(this,I,Se).call(this,"criterion"),t.levels&&t.levels.forEach(r=>{r.id||(r.id=$(this,I,Se).call(this,"level"))}),e(a(this,g)).criteria.push(t),$(this,I,be).call(this))}removeCriterion(t){if(!e(a(this,g)))return;$(this,I,ge).call(this);const r=e(a(this,g)).criteria||[],i=r.findIndex(l=>l.id===t);i!==-1&&(r.splice(i,1),$(this,I,be).call(this))}addLevel(t){if(!e(a(this,g)))return;$(this,I,ge).call(this);const r=e(a(this,g)).criteria||[],i=$(this,I,Se).call(this,"level");r.forEach(l=>{l.levels||(l.levels=[]),l.levels.push({...t,id:i})}),$(this,I,be).call(this)}removeLevel(t){if(!e(a(this,g)))return;$(this,I,ge).call(this),(e(a(this,g)).criteria||[]).forEach(i=>{i.levels&&(i.levels=i.levels.filter(l=>l.id!==t))}),$(this,I,be).call(this)}updateMetadata(t){e(a(this,g))&&($(this,I,ge).call(this),e(a(this,g)).metadata||(e(a(this,g)).metadata={}),Object.assign(e(a(this,g)).metadata,t),$(this,I,be).call(this))}updateRubric(t){e(a(this,g))&&($(this,I,ge).call(this),Object.assign(e(a(this,g)),t),$(this,I,be).call(this))}replaceRubric(t){s(a(this,g),JSON.parse(JSON.stringify(t)),!0),s(a(this,Q),[JSON.parse(JSON.stringify(t))],!0),s(a(this,q),0),s(a(this,we),null),$(this,I,be).call(this)}toggleVisibility(t){e(a(this,g))&&console.log("Toggling rubric visibility to:",t)}undo(){this.canUndo&&(Pe(a(this,q),-1),s(a(this,g),JSON.parse(JSON.stringify(e(a(this,Q))[e(a(this,q))])),!0),console.log("Undid change, history index:",e(a(this,q))))}redo(){this.canRedo&&(Pe(a(this,q)),s(a(this,g),JSON.parse(JSON.stringify(e(a(this,Q))[e(a(this,q))])),!0),console.log("Redid change, history index:",e(a(this,q))))}getChanges(t){if(!e(a(this,g)))return{};const r={criteria_added:[],criteria_modified:[],criteria_removed:[],other_changes:""},i=e(a(this,g)).criteria||[],l=t.criteria||[];l.forEach(m=>{const k=i.find(S=>S.id===m.id);k?k.name!==m.name&&r.criteria_modified.push(m.name):r.criteria_added.push(m.name)}),i.forEach(m=>{l.find(S=>S.id===m.id)||r.criteria_removed.push(m.name)});const f=[];return e(a(this,g)).title!==t.title&&f.push("title"),e(a(this,g)).description!==t.description&&f.push("description"),JSON.stringify(e(a(this,g)).metadata)!==JSON.stringify(t.metadata)&&f.push("metadata"),f.length>0&&(r.other_changes=`Modified: ${f.join(", ")}`),r}reset(){console.log("Resetting rubric store"),s(a(this,g),null),s(a(this,Q),[],!0),s(a(this,q),-1),s(a(this,je),!1),s(a(this,we),null)}setLoading(t){s(a(this,je),t,!0)}setError(t){s(a(this,we),t,!0)}validate(){var i,l;if(!e(a(this,g)))return{isValid:!1,errors:["No rubric loaded"]};const t=[];(i=e(a(this,g)).title)!=null&&i.trim()||t.push("Title is required"),(l=e(a(this,g)).description)!=null&&l.trim()||t.push("Description is required");const r=e(a(this,g)).criteria||[];return r.length===0&&t.push("At least one criterion is required"),r.forEach((f,m)=>{var S,D;(S=f.name)!=null&&S.trim()||t.push(`Criterion ${m+1}: Name is required`),(D=f.description)!=null&&D.trim()||t.push(`Criterion ${m+1}: Description is required`),(!f.weight||f.weight<=0)&&t.push(`Criterion ${m+1}: Weight must be greater than 0`);const k=f.levels||[];k.length<2&&t.push(`Criterion ${m+1}: At least 2 performance levels required`),k.forEach((T,H)=>{var Y,Z;(Y=T.label)!=null&&Y.trim()||t.push(`Criterion ${m+1}, Level ${H+1}: Label is required`),(Z=T.description)!=null&&Z.trim()||t.push(`Criterion ${m+1}, Level ${H+1}: Description is required`)})}),{isValid:t.length===0,errors:t}}getRubricData(){return e(a(this,g))?JSON.parse(JSON.stringify(e(a(this,g)))):null}}g=new WeakMap,Q=new WeakMap,q=new WeakMap,je=new WeakMap,we=new WeakMap,I=new WeakSet,ge=function(){e(a(this,g))&&(s(a(this,Q),e(a(this,Q)).slice(0,e(a(this,q))+1),!0),e(a(this,Q)).push(JSON.parse(JSON.stringify(e(a(this,g))))),e(a(this,Q)).length>50?e(a(this,Q)).shift():Pe(a(this,q)))},be=function(){e(a(this,g))&&(e(a(this,g)).metadata||(e(a(this,g)).metadata={}),e(a(this,g)).metadata.modifiedAt=new Date().toISOString())},Se=function(t){const r=Date.now(),i=Math.random().toString(36).substring(2,8);return`${t}_${r}_${i}`};const y=new yt;function Qe(u,t,r){u.key==="Enter"&&!u.shiftKey?(u.preventDefault(),t()):u.key==="Escape"&&r()}function Ye(u,t,r){u.key==="Enter"&&(u.ctrlKey||u.metaKey)?(u.preventDefault(),t()):u.key==="Escape"&&r()}var wt=(u,t,r,i)=>t()&&r(e(i).id),kt=M('<button class="ml-2 text-red-400 hover:text-red-600 disabled:opacity-50 disabled:cursor-not-allowed" title="Remove this level"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>'),Ct=M('<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"><div class="flex items-center justify-between"><span> </span> <!></div></th>'),Et=M('<input type="text" class="w-full px-2 py-1 border-2 border-blue-500 rounded text-sm focus:ring-blue-500 focus:border-blue-600 shadow-lg" placeholder="Enter criterion name (Enter to save, Esc to cancel)"/>'),Mt=(u,t,r,i)=>t()&&r(e(i).id,null,"name",e(i).name),St=(u,t,r,i)=>u.key==="Enter"&&t()&&r(e(i).id,null,"name",e(i).name),Rt=M('<div role="button" tabindex="0"> </div>'),jt=M('<textarea rows="2" class="w-full px-2 py-1 border-2 border-blue-500 rounded text-sm focus:ring-blue-500 focus:border-blue-600 shadow-lg" placeholder="Enter criterion description (Ctrl+Enter to save, Esc to cancel)"></textarea>'),It=(u,t,r,i)=>t()&&r(e(i).id,null,"description",e(i).description),Lt=(u,t,r,i)=>u.key==="Enter"&&t()&&r(e(i).id,null,"description",e(i).description),Nt=M('<div role="button" tabindex="0"> </div>'),At=M('<input type="number" min="0" max="100" class="w-16 px-2 py-1 border-2 border-blue-500 rounded text-sm focus:ring-blue-500 focus:border-blue-600 shadow-lg" placeholder="%"/>'),Dt=(u,t,r,i)=>{var l;return t()&&r(e(i).id,null,"weight",(l=e(i).weight)==null?void 0:l.toString())},Ot=(u,t,r,i)=>{var l;return u.key==="Enter"&&t()&&r(e(i).id,null,"weight",(l=e(i).weight)==null?void 0:l.toString())},$t=M('<div role="button" tabindex="0"> </div>'),Bt=M('<textarea rows="3" class="w-full px-2 py-1 border-2 border-blue-500 rounded text-sm focus:ring-blue-500 focus:border-blue-600 shadow-lg" placeholder="Enter level description (Ctrl+Enter to save, Esc to cancel)"></textarea>'),Jt=(u,t,r,i,l)=>{var f;return t()&&e(r)&&i(e(l).id,e(r).id,"description",(f=e(r))==null?void 0:f.description)},Tt=(u,t,r,i,l)=>{var f;return u.key==="Enter"&&t()&&e(r)&&i(e(l).id,e(r).id,"description",(f=e(r))==null?void 0:f.description)},Vt=M('<div role="button" tabindex="0"> </div>'),zt=M('<td class="px-6 py-4"><!></td>'),Ht=(u,t,r,i)=>t()&&r(e(i).id),Gt=M('<button class="text-red-600 hover:text-red-900 disabled:opacity-50 disabled:cursor-not-allowed" title="Remove criterion"><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button>'),Pt=M('<tr class="hover:bg-gray-50"><td class="px-6 py-4"><div class="space-y-2"><!> <!></div></td><td class="px-6 py-4 whitespace-nowrap"><!></td><!><td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium"><!></td></tr>'),qt=M('<div class="px-6 py-4 bg-red-50 border-t border-red-200"><div class="text-sm text-red-700"> </div></div>'),Ut=M('<div class="px-6 py-12 text-center"><svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <h3 class="mt-2 text-sm font-medium text-gray-900">No criteria yet</h3> <p class="mt-1 text-sm text-gray-500">Get started by adding your first criterion.</p> <div class="mt-6"><button class="inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700"><svg class="-ml-1 mr-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg> Add Criterion</button></div></div>'),Kt=M('<div class="bg-white shadow rounded-lg"><div class="px-6 py-4 border-b border-gray-200"><div class="flex justify-between items-center"><h3 class="text-lg font-medium text-gray-900">Rubric Criteria</h3> <div class="flex space-x-2"><button class="inline-flex items-center px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"><svg class="-ml-1 mr-1 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg> Add Criterion</button> <button class="inline-flex items-center px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"><svg class="-ml-1 mr-1 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg> Add Level</button></div></div></div> <div class="overflow-x-auto"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Criterion</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Weight</th><!><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table></div> <!> <!></div>');function Ft(u,t){Be(t,!0);let r=at(t,"isEditMode",3,!1),i=A(null),l=A(""),f=A(!1);function m(x,v,c,d){s(i,{criterionId:x,levelId:v,field:c},!0),s(l,d||"",!0),s(f,!0)}function k(x){setTimeout(()=>{x.focus(),x.select(),setTimeout(()=>{s(f,!1)},100)},10)}function S(){if(!e(i)||e(f))return;const{criterionId:x,levelId:v,field:c}=e(i);if(v)y.updateCell(x,v,c,e(l));else if(c==="name"||c==="description")y.updateCriterion(x,{[c]:e(l)});else if(c==="weight"){const d=parseFloat(e(l));!isNaN(d)&&d>=0&&y.updateCriterion(x,{weight:d})}s(i,null),s(l,""),s(f,!1)}function D(){s(i,null),s(l,"")}function T(){var v,c;const x={name:"New Criterion",description:"Description of the new criterion",weight:10,levels:[]};if(((c=(v=y.rubric)==null?void 0:v.criteria)==null?void 0:c.length)>0){const d=y.rubric.criteria[0];x.levels=d.levels.map(C=>({score:C.score,label:C.label,description:"Description for this level"}))}else x.levels=[{score:4,label:"Exemplary",description:"Exemplary performance"},{score:3,label:"Proficient",description:"Proficient performance"},{score:2,label:"Developing",description:"Developing performance"},{score:1,label:"Beginning",description:"Beginning performance"}];y.addCriterion(x)}function H(x){confirm("Are you sure you want to remove this criterion?")&&y.removeCriterion(x)}function Y(){const x={score:5,label:"Advanced",description:"Advanced performance level"};y.addLevel(x)}function Z(x){confirm("Are you sure you want to remove this performance level from all criteria?")&&y.removeLevel(x)}function le(){var v,c;return(c=(v=y.rubric)==null?void 0:v.criteria)!=null&&c.length?y.rubric.criteria[0].levels||[]:[]}function se(x,v){var c;return((c=x.levels)==null?void 0:c.find(d=>d.score===v))||null}var X=Kt(),O=n(X),F=n(O),W=p(n(F),2),ee=n(W);ee.__click=function(...x){var v;(v=r()?T:null)==null||v.apply(this,x)};var ce=p(ee,2);ce.__click=function(...x){var v;(v=r()?Y:null)==null||v.apply(this,x)},o(W),o(F),o(O);var te=p(O,2),_e=n(te),ue=n(_e),fe=n(ue),ve=p(n(fe),2);Ae(ve,17,le,De,(x,v)=>{var c=Ct(),d=n(c),C=n(d),V=n(C);o(C);var _=p(C,2);{var h=E=>{var j=kt();j.__click=[wt,r,Z,v],N(()=>j.disabled=!r()),w(E,j)};B(_,E=>{le().length>2&&E(h)})}o(d),o(c),N(()=>U(V,`${(e(v).label||"Level")??""} (${(e(v).score||"?")??""})`)),w(x,c)}),Xe(),o(fe),o(ue);var re=p(ue);Ae(re,21,()=>{var x;return((x=y.rubric)==null?void 0:x.criteria)||[]},De,(x,v)=>{var c=Pt(),d=n(c),C=n(d),V=n(C);{var _=L=>{var b=Et();Re(b),b.__keydown=[Qe,S,D],Ne(()=>pe(b,()=>e(l),R=>s(l,R))),Ve(b,R=>k==null?void 0:k(R)),Te("blur",b,S),w(L,b)},h=L=>{var b=Rt();b.__click=[Mt,r,m,v],b.__keydown=[St,r,m,v];var R=n(b,!0);o(b),N(()=>{ke(b,1,`${r()?"cursor-pointer hover:bg-blue-50 hover:border-blue-200 border border-transparent":"cursor-default"} p-1 rounded text-sm font-medium text-gray-900`),U(R,e(v).name||"Unnamed Criterion")}),w(L,b)};B(V,L=>{var b,R,oe;((b=e(i))==null?void 0:b.criterionId)===e(v).id&&((R=e(i))==null?void 0:R.field)==="name"&&!((oe=e(i))!=null&&oe.levelId)?L(_):L(h,!1)})}var E=p(V,2);{var j=L=>{var b=jt();ze(b),b.__keydown=[Ye,S,D],Ne(()=>pe(b,()=>e(l),R=>s(l,R))),Ve(b,R=>k==null?void 0:k(R)),Te("blur",b,S),w(L,b)},G=L=>{var b=Nt();b.__click=[It,r,m,v],b.__keydown=[Lt,r,m,v];var R=n(b,!0);o(b),N(()=>{ke(b,1,`${r()?"cursor-pointer hover:bg-blue-50 hover:border-blue-200 border border-transparent":"cursor-default"} p-1 rounded text-sm text-gray-600`),U(R,e(v).description||"No description")}),w(L,b)};B(E,L=>{var b,R,oe;((b=e(i))==null?void 0:b.criterionId)===e(v).id&&((R=e(i))==null?void 0:R.field)==="description"&&!((oe=e(i))!=null&&oe.levelId)?L(j):L(G,!1)})}o(C),o(d);var P=p(d),ie=n(P);{var ae=L=>{var b=At();Re(b),b.__keydown=[Qe,S,D],Ne(()=>pe(b,()=>e(l),R=>s(l,R))),Ve(b,R=>k==null?void 0:k(R)),Te("blur",b,S),w(L,b)},de=L=>{var b=$t();b.__click=[Dt,r,m,v],b.__keydown=[Ot,r,m,v];var R=n(b);o(b),N(()=>{ke(b,1,`${r()?"cursor-pointer hover:bg-blue-50 hover:border-blue-200 border border-transparent":"cursor-default"} p-1 rounded text-sm text-center font-medium`),U(R,`${(e(v).weight||0)??""}%`)}),w(L,b)};B(ie,L=>{var b,R,oe;((b=e(i))==null?void 0:b.criterionId)===e(v).id&&((R=e(i))==null?void 0:R.field)==="weight"&&!((oe=e(i))!=null&&oe.levelId)?L(ae):L(de,!1)})}o(P);var J=p(P);Ae(J,17,le,De,(L,b)=>{const R=et(()=>se(e(v),e(b).score));var oe=zt(),st=n(oe);{var nt=Me=>{var K=Bt();ze(K),K.__keydown=[Ye,S,D],Ne(()=>pe(K,()=>e(l),ye=>s(l,ye))),Ve(K,ye=>k==null?void 0:k(ye)),Te("blur",K,S),w(Me,K)},dt=Me=>{var K=Vt();K.__click=[Jt,r,R,m,v],K.__keydown=[Tt,r,R,m,v];var ye=n(K,!0);o(K),N(()=>{var Le;ke(K,1,`${r()?"cursor-pointer hover:bg-blue-50 hover:border-blue-200 border border-transparent":"cursor-default"} p-2 rounded text-sm text-gray-700 min-h-[60px]`),U(ye,((Le=e(R))==null?void 0:Le.description)||"No description")}),w(Me,K)};B(st,Me=>{var K,ye,Le,Ke;((K=e(i))==null?void 0:K.criterionId)===e(v).id&&((ye=e(i))==null?void 0:ye.levelId)===((Le=e(R))==null?void 0:Le.id)&&((Ke=e(i))==null?void 0:Ke.field)==="description"?Me(nt):Me(dt,!1)})}o(oe),w(L,oe)});var z=p(J),Ie=n(z);{var ot=L=>{var b=Gt();b.__click=[Ht,r,H,v],N(()=>b.disabled=!r()),w(L,b)};B(Ie,L=>{var b,R;((R=(b=y.rubric)==null?void 0:b.criteria)==null?void 0:R.length)>1&&L(ot)})}o(z),o(c),w(x,c)}),o(re),o(_e),o(te);var me=p(te,2);{var ne=x=>{var v=qt(),c=n(v),d=n(c,!0);o(c),o(v),N(()=>U(d,y.error)),w(x,v)};B(me,x=>{y.error&&x(ne)})}var he=p(me,2);{var xe=x=>{var v=Ut(),c=p(n(v),6),d=n(c);d.__click=T,o(c),o(v),w(x,v)};B(he,x=>{var v,c;(c=(v=y.rubric)==null?void 0:v.criteria)!=null&&c.length||x(xe)})}o(X),N(()=>{ee.disabled=!r(),ce.disabled=!r()}),w(u,X),Je()}He(["click","keydown"]);function Wt(u,t){y.updateRubric({scoringType:e(t)})}function Qt(u,t){y.updateRubric({maxScore:e(t)})}var Yt=M('<select id="scoringType" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"><option>Points</option><option>Percentage</option><option>Holistic</option><option>Single Point</option><option>Checklist</option></select>'),Zt=M('<div class="mt-1 px-3 py-2 bg-gray-50 border border-gray-300 rounded-md text-sm text-gray-900"> </div>'),Xt=M('<input id="maxScore" type="number" min="1" max="1000" placeholder="10" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"/>'),er=M('<div class="mt-1 px-3 py-2 bg-gray-50 border border-gray-300 rounded-md text-sm text-gray-900"> </div>'),tr=M('<div class="bg-red-50 border border-red-200 rounded-md p-4"><div class="text-sm text-red-700"> </div></div>'),rr=M('<div class="bg-white shadow rounded-lg"><div class="px-6 py-4 border-b border-gray-200"><h3 class="text-lg font-medium text-gray-900">Rubric Information</h3></div> <div class="px-8 py-6 space-y-6"><div class="space-y-4"><div><label for="title" class="block text-sm font-medium text-gray-700">Title <span class="text-red-500">*</span></label> <input id="title" type="text" placeholder="Enter rubric title" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-lg" required/></div> <div><label for="description" class="block text-sm font-medium text-gray-700">Description <span class="text-red-500">*</span></label> <textarea id="description" rows="3" placeholder="Describe the purpose and context of this rubric" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" required></textarea></div></div> <div class="pt-4 border-t border-gray-200"><h4 class="text-md font-medium text-gray-900 mb-4">Scoring Configuration</h4> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><label for="scoringType" class="block text-sm font-medium text-gray-700">Scoring Type <span class="text-red-500">*</span></label> <!></div> <div><label for="maxScore" class="block text-sm font-medium text-gray-700">Maximum Score <span class="text-red-500">*</span></label> <!></div></div></div> <div class="pt-4 border-t border-gray-200"><h4 class="text-md font-medium text-gray-900 mb-2">Optional Information</h4> <p class="text-sm text-gray-500 mb-4">These fields are completely optional. Leave blank if not applicable to your rubric.</p> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><label for="subject" class="block text-sm font-medium text-gray-500">Subject <span class="text-xs text-gray-400">(optional)</span></label> <input id="subject" type="text" placeholder="e.g., Mathematics, English, Science" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"/></div> <div><label for="gradeLevel" class="block text-sm font-medium text-gray-500">Grade Level <span class="text-xs text-gray-400">(optional)</span></label> <input id="gradeLevel" type="text" placeholder="e.g., 6-8, 9-12, K-2, Adult Education" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"/></div></div></div> <!></div></div>');function ir(u,t){Be(t,!0);let r=at(t,"isEditMode",3,!1),i=A(""),l=A(""),f=A("points"),m=A(10),k=A(""),S=A("");Oe(()=>{var _,h;y.rubric&&(s(i,y.rubric.title||"",!0),s(l,y.rubric.description||"",!0),s(f,y.rubric.scoringType||"points",!0),s(m,y.rubric.maxScore||10,!0),s(k,((_=y.rubric.metadata)==null?void 0:_.subject)||"",!0),s(S,((h=y.rubric.metadata)==null?void 0:h.gradeLevel)||"",!0))});function D(){y.updateRubric({title:e(i)})}function T(){y.updateRubric({description:e(l)})}function H(){y.updateMetadata({subject:e(k)})}function Y(){y.updateMetadata({gradeLevel:e(S)})}var Z=rr(),le=p(n(Z),2),se=n(le),X=n(se),O=p(n(X),2);Re(O),O.__input=function(..._){var h;(h=r()?D:null)==null||h.apply(this,_)},o(X);var F=p(X,2),W=p(n(F),2);ze(W),W.__input=function(..._){var h;(h=r()?T:null)==null||h.apply(this,_)},o(F),o(se);var ee=p(se,2),ce=p(n(ee),2),te=n(ce),_e=p(n(te),2);{var ue=_=>{var h=Yt();h.__change=[Wt,f];var E=n(h);E.value=E.__value="points";var j=p(E);j.value=j.__value="percentage";var G=p(j);G.value=G.__value="holistic";var P=p(G);P.value=P.__value="single-point";var ie=p(P);ie.value=ie.__value="checklist",o(h),xt(h,()=>e(f),ae=>s(f,ae)),w(_,h)},fe=_=>{var h=Zt(),E=n(h,!0);o(h),N(()=>U(E,e(f)||"points")),w(_,h)};B(_e,_=>{r()?_(ue):_(fe,!1)})}o(te);var ve=p(te,2),re=p(n(ve),2);{var me=_=>{var h=Xt();Re(h),h.__input=[Qt,m],pe(h,()=>e(m),E=>s(m,E)),w(_,h)},ne=_=>{var h=er(),E=n(h,!0);o(h),N(()=>U(E,e(m)||10)),w(_,h)};B(re,_=>{r()?_(me):_(ne,!1)})}o(ve),o(ce),o(ee);var he=p(ee,2),xe=p(n(he),4),x=n(xe),v=p(n(x),2);Re(v),v.__input=function(..._){var h;(h=r()?H:null)==null||h.apply(this,_)},o(x);var c=p(x,2),d=p(n(c),2);Re(d),d.__input=function(..._){var h;(h=r()?Y:null)==null||h.apply(this,_)},o(c),o(xe),o(he);var C=p(he,2);{var V=_=>{var h=tr(),E=n(h),j=n(E,!0);o(E),o(h),N(()=>U(j,y.error)),w(_,h)};B(C,_=>{y.error&&_(V)})}o(le),o(Z),N(()=>{O.readOnly=!r(),W.readOnly=!r(),v.readOnly=!r(),d.readOnly=!r()}),pe(O,()=>e(i),_=>s(i,_)),pe(W,()=>e(l),_=>s(l,_)),pe(v,()=>e(k),_=>s(k,_)),pe(d,()=>e(S),_=>s(S,_)),w(u,Z),Je()}He(["input","change"]);function ar(u,t){u.key==="Enter"&&!u.shiftKey&&(u.preventDefault(),t())}function or(u,t){s(t,[],!0)}function sr(u,t){s(t,!e(t))}var nr=(u,t,r)=>t(e(r)),dr=M('<button class="block w-full text-left px-3 py-2 text-xs bg-gray-50 hover:bg-gray-100 rounded border text-gray-700"> </button>'),lr=M('<div class="text-center py-4"><div class="text-sm text-gray-600 mb-4">Ask me to help you create or modify this rubric. Here are some examples:</div> <div class="space-y-2"></div></div>'),cr=M('<div><div><div class="text-sm whitespace-pre-wrap"> </div> <div class="text-xs opacity-70 mt-1"> </div></div></div>'),ur=M('<div class="flex justify-start"><div class="bg-gray-200 text-gray-800 px-4 py-2 rounded-lg"><div class="flex items-center space-x-2"><div class="animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600"></div> <span class="text-sm">Thinking...</span></div></div></div>'),vr=Ge('<svg class="animate-spin h-4 w-4" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),hr=Ge('<svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg>'),br=M('<button class="px-2 py-1 text-xs text-gray-500 hover:text-gray-700" title="Clear chat">Clear</button>'),pr=M('<div class="flex-1 overflow-y-auto p-4 space-y-4 max-h-96"><!> <!></div> <div class="border-t border-gray-200 p-4"><div class="flex space-x-2"><textarea rows="2" class="flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 resize-none"></textarea> <div class="flex flex-col space-y-2"><button class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"><!></button> <!></div></div> <div class="mt-2 text-xs text-gray-500">Press Enter to send, Shift+Enter for new line</div></div>',1),fr=M('<div class="bg-white shadow rounded-lg h-fit"><div class="px-4 py-3 border-b border-gray-200 flex items-center justify-between"><h3 class="text-sm font-medium text-gray-900 flex items-center"><svg class="mr-2 h-4 w-4 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-4l-4 4-4-4z"></path></svg> AI Assistant</h3> <button class="text-gray-400 hover:text-gray-600"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg></button></div> <!></div>');function mr(u,t){Be(t,!0);const r=ct();let i=A(Ze([])),l=A(""),f=A(!1);function m(O,F){e(i).push({id:Date.now(),role:O,content:F,timestamp:new Date})}async function k(){if(!e(l).trim())return;const O=e(l).trim();s(l,""),m("user",O);try{t.rubricId?r("modify",{prompt:O}):r("generate",{prompt:O})}catch(F){m("assistant",`Error: ${F.message}`)}}const S=["Create a rubric for evaluating 5-paragraph essays in 8th grade English","Make this rubric suitable for 6th graders by simplifying the language","Add a creativity criterion to this rubric","Convert this to a 4-point scale instead of 5-point","Make the descriptions more specific and observable"];function D(O){s(l,O,!0)}var T=fr(),H=n(T),Y=p(n(H),2);Y.__click=[sr,f];var Z=n(Y),le=n(Z);o(Z),o(Y),o(H);var se=p(H,2);{var X=O=>{var F=pr(),W=Ee(F),ee=n(W);{var ce=d=>{var C=lr(),V=p(n(C),2);Ae(V,21,()=>S,De,(_,h)=>{var E=dr();E.__click=[nr,D,h];var j=n(E);o(E),N(()=>U(j,`"${e(h)??""}"`)),w(_,E)}),o(V),o(C),w(d,C)},te=d=>{var C=tt(),V=Ee(C);Ae(V,17,()=>e(i),De,(_,h)=>{var E=cr(),j=n(E),G=n(j),P=n(G,!0);o(G);var ie=p(G,2),ae=n(ie,!0);o(ie),o(j),o(E),N(de=>{ke(E,1,`flex ${e(h).role==="user"?"justify-end":"justify-start"}`),ke(j,1,`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${e(h).role==="user"?"bg-blue-600 text-white":"bg-gray-200 text-gray-800"}`),U(P,e(h).content),U(ae,de)},[()=>e(h).timestamp.toLocaleTimeString()]),w(_,E)}),w(d,C)};B(ee,d=>{e(i).length===0?d(ce):d(te,!1)})}var _e=p(ee,2);{var ue=d=>{var C=ur();w(d,C)};B(_e,d=>{t.aiGenerating&&d(ue)})}o(W);var fe=p(W,2),ve=n(fe),re=n(ve);ze(re),re.__keydown=[ar,k];var me=p(re,2),ne=n(me);ne.__click=k;var he=n(ne);{var xe=d=>{var C=vr();w(d,C)},x=d=>{var C=hr();w(d,C)};B(he,d=>{t.aiGenerating?d(xe):d(x,!1)})}o(ne);var v=p(ne,2);{var c=d=>{var C=br();C.__click=[or,i],w(d,C)};B(v,d=>{e(i).length>0&&d(c)})}o(me),o(ve),Xe(2),o(fe),N(d=>{qe(re,"placeholder",t.rubricId?"Ask me to modify this rubric...":"Describe the rubric you want to create..."),re.disabled=t.aiGenerating,ne.disabled=d},[()=>!e(l).trim()||t.aiGenerating]),pe(re,()=>e(l),d=>s(l,d)),w(O,F)};B(se,O=>{e(f)||O(X)})}o(T),N(()=>{qe(Y,"aria-label",e(f)?"Maximize AI chat":"Minimize AI chat"),qe(le,"d",e(f)?"M19 9l-7 7-7-7":"M5 15l7-7 7 7")}),w(u,T),Je()}He(["click","keydown"]);function gr(u,t){s(t,!0)}function _r(u,t,r){confirm("Discard all changes and exit edit mode?")&&(t(),s(r,!1))}async function xr(u,t,r,i){const l=y.getRubricData();if(!l){s(t,"No rubric data to save");return}const f=y.validate();if(!f.isValid){s(t,`Validation errors: ${f.errors.join(", ")}`);return}try{s(r,!0),s(t,null);const m={...l,rubricId:i.rubricId,metadata:{...l.metadata,modifiedAt:new Date().toISOString()}};await ft(i.rubricId,m),console.log("Rubric saved successfully")}catch(m){s(t,m.message||"Failed to save rubric",!0),console.error("Error saving rubric:",m)}finally{s(r,!1)}}async function yr(u,t,r){const i=y.getRubricData();if(!i){s(t,"No rubric data to save");return}const l=y.validate();if(!l.isValid){s(t,`Validation errors: ${l.errors.join(", ")}`);return}try{s(r,!0),s(t,null);const f={...i,title:`${i.title} (Copy)`,metadata:{...i.metadata,modifiedAt:new Date().toISOString()}},m=await mt(f);$e(`/evaluaitor/${m.rubricId}`)}catch(f){s(t,f.message||"Failed to create new version",!0),console.error("Error creating new version:",f)}finally{s(r,!1)}}function wr(){y.undo()}function kr(){y.redo()}function Cr(){$e("/evaluaitor")}var Er=(u,t)=>s(t,!e(t)),Mr=M('<button class="inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"><svg class="-ml-1 mr-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg> Cancel Edit</button>'),Sr=Ge('<svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> ',1),Rr=Ge('<svg class="-ml-1 mr-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> ',1),jr=M('<button class="inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">Save as New Version</button>'),Ir=M('<button class="p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed" title="Undo"><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"></path></svg></button> <button class="p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed" title="Redo"><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 10H11a8 8 0 00-8 8v2M21 10l-6 6m6-6l-6-6"></path></svg></button> <button class="inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"><svg class="-ml-0.5 mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-4l-4 4-4-4z"></path></svg> AI Assistant</button> <!> <button class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"><!></button> <!>',1),Lr=M('<span class="inline-flex items-center px-3 py-1 rounded-md text-sm font-medium bg-gray-100 text-gray-700 border border-gray-300"><svg class="-ml-0.5 mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg> View Only</span> <button class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700"><svg class="-ml-1 mr-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg> Edit</button>',1),Nr=M('<div class="text-center py-12"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"></div> <p class="mt-4 text-lg text-gray-600">Loading rubric...</p></div>'),Ar=()=>$e("/evaluaitor"),Dr=M('<div class="bg-red-50 border border-red-200 rounded-md p-4 mb-6"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-red-800">Error</h3> <div class="mt-2 text-sm text-red-700"> </div> <div class="mt-4"><button class="bg-red-100 px-3 py-2 rounded-md text-sm font-medium text-red-800 hover:bg-red-200">Back to Rubrics</button></div></div></div></div>'),Or=M('<div class="xl:col-span-1"><!></div>'),$r=M("<div><div><!> <!></div> <!></div>"),Br=M('<div class="min-h-screen bg-gray-50"><div class="bg-white shadow"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="flex justify-between items-center py-4"><div class="flex items-center"><button class="mr-4 p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100" aria-label="Go back"><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button> <div><h1 class="text-xl font-semibold text-gray-900"> </h1> <p class="text-sm text-gray-500"> </p></div></div> <div class="flex items-center space-x-3"><!></div></div></div></div> <div class="max-w-none mx-auto py-6 px-6 lg:px-12"><!></div></div>');function Jr(u,t){Be(t,!0);const r=()=>Ue(it,"$page",i),[i,l]=rt();let f=A(!0),m=A(!1),k=A(null),S=A(!1),D=A(!1),T=A(!1),H=A(!1);Oe(()=>{const c=new URLSearchParams(r().url.search);c.has("edit")&&s(H,c.get("edit")==="true")});async function Y(){if(!t.rubricId){s(k,"No rubric ID provided"),s(f,!1);return}try{s(f,!0);const c=await pt(t.rubricId);y.loadRubric(c.rubric_data)}catch(c){s(k,c.message||"Failed to load rubric",!0),console.error("Error loading rubric:",c)}finally{s(f,!1)}}async function Z(c){try{s(D,!0),s(k,null);const d=await _t(c);y.loadRubric(d.rubric_data),s(T,!0),s(S,!1),console.log("AI generation completed:",d.explanation)}catch(d){s(k,d.message||"Failed to generate rubric with AI",!0),console.error("Error generating rubric:",d)}finally{s(D,!1)}}async function le(c){if(!y.getRubricData()){s(k,"No rubric to modify");return}try{s(D,!0),s(k,null);const C=await gt(t.rubricId,c),V=y.getChanges(C.rubric_data);y.replaceRubric(C.rubric_data),console.log("AI modification completed:",C.explanation),console.log("Changes:",V)}catch(C){s(k,C.message||"Failed to modify rubric with AI",!0),console.error("Error modifying rubric:",C)}finally{s(D,!1)}}ut(()=>{Y()}),Oe(()=>{var c;(c=y.rubric)!=null&&c.title&&(document.title=`${y.rubric.title} - Evaluaitor`)});var se=Br(),X=n(se),O=n(X),F=n(O),W=n(F),ee=n(W);ee.__click=[Cr];var ce=p(ee,2),te=n(ce),_e=n(te,!0);o(te);var ue=p(te,2),fe=n(ue,!0);o(ue),o(ce),o(W);var ve=p(W,2),re=n(ve);{var me=c=>{var d=Ir(),C=Ee(d);C.__click=[wr];var V=p(C,2);V.__click=[kr];var _=p(V,2);_.__click=[Er,S];var h=p(_,2);{var E=J=>{var z=Mr();z.__click=[_r,Y,H],N(()=>z.disabled=e(m)||e(f)),w(J,z)};B(h,J=>{e(T)||J(E)})}var j=p(h,2);j.__click=[xr,k,m,t];var G=n(j);{var P=J=>{var z=Sr(),Ie=p(Ee(z),1,!0);N(()=>U(Ie,e(T)?"Saving...":"Updating...")),w(J,z)},ie=J=>{var z=Rr(),Ie=p(Ee(z),1,!0);N(()=>U(Ie,e(T)?"Save":"Update Rubric")),w(J,z)};B(G,J=>{e(m)?J(P):J(ie,!1)})}o(j);var ae=p(j,2);{var de=J=>{var z=jr();z.__click=[yr,k,m],N(()=>z.disabled=e(m)||e(f)),w(J,z)};B(ae,J=>{e(T)||J(de)})}N(()=>{C.disabled=!y.canUndo,V.disabled=!y.canRedo,j.disabled=e(m)||e(f)}),w(c,d)},ne=c=>{var d=Lr(),C=p(Ee(d),2);C.__click=[gr,H],w(c,d)};B(re,c=>{e(H)||e(T)?c(me):c(ne,!1)})}o(ve),o(F),o(O),o(X);var he=p(X,2),xe=n(he);{var x=c=>{var d=Nr();w(c,d)},v=c=>{var d=tt(),C=Ee(d);{var V=h=>{var E=Dr(),j=n(E),G=p(n(j),2),P=p(n(G),2),ie=n(P,!0);o(P);var ae=p(P,2),de=n(ae);de.__click=[Ar],o(ae),o(G),o(j),o(E),N(()=>U(ie,e(k))),w(h,E)},_=h=>{var E=$r(),j=n(E),G=n(j);ir(G,{get isEditMode(){return e(H)}});var P=p(G,2);Ft(P,{get isEditMode(){return e(H)}}),o(j);var ie=p(j,2);{var ae=de=>{var J=Or(),z=n(J);mr(z,{get rubricId(){return t.rubricId},get aiGenerating(){return e(D)},onGenerate:Z,onModify:le}),o(J),w(de,J)};B(ie,de=>{e(S)&&de(ae)})}o(E),N(()=>{ke(E,1,`grid grid-cols-1 ${e(S)?"xl:grid-cols-4":""} gap-8`),ke(j,1,`${e(S)?"xl:col-span-3":""} space-y-8`)}),w(h,E)};B(C,h=>{e(k)?h(V):h(_,!1)},!0)}w(c,d)};B(xe,c=>{e(f)?c(x):c(v,!1)})}o(he),o(se),N(()=>{var c,d;U(_e,((c=y.rubric)==null?void 0:c.title)||"Loading..."),U(fe,((d=y.rubric)==null?void 0:d.description)||"")}),w(u,se),Je(),l()}He(["click"]);var Tr=M('<div class="min-h-screen bg-gray-50"><div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"><!></div></div>');function ei(u,t){Be(t,!0);const r=()=>Ue(it,"$page",l),i=()=>Ue(bt,"$user",l),[l,f]=rt();let m=et(()=>r().params.rubricId);Oe(()=>{i().isLoggedIn||$e("/")}),Oe(()=>{e(m)||$e("/evaluaitor")});var k=Tr();vt(T=>{ht.title="Rubric Editor - Evaluaitor"});var S=n(k),D=n(S);Jr(D,{get rubricId(){return e(m)}}),o(S),o(k),w(u,k),Je(),f()}export{ei as component};
