const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/9q7li0xI.js","../chunks/D10uF6KO.js","../chunks/BVlmaXU-.js","../chunks/ngrFHoWO.js"])))=>i.map(i=>d[i]);
import{_ as $r}from"../chunks/Dp1pzeXC.js";import"../chunks/Bzak7iHL.js";import{d as Sr,p as Ur,s as b,a as Be,M as Pr,aO as jr,u as Or,g as e,f as n,N as Mr,l as Se,j as a,b as r,t as y,c as o,h as Lr,i as s,$ as Ir,r as t,m as p,o as Ue,k as Ut,n as ar,aP as Dr,e as Wa,Q as $a,q as Jt,R as Sa}from"../chunks/D10uF6KO.js";import{i as g}from"../chunks/B5RjaZpx.js";import{e as Ke,i as tt}from"../chunks/BY88_K0J.js";import{s as Ne,r as Pe,d as Ga,a as ht,c as Br}from"../chunks/gDFrtnMu.js";import{s as Xa}from"../chunks/BPb77SYP.js";import{b as Ye,a as Za}from"../chunks/CF2p2rhS.js";import{b as Ua}from"../chunks/DRu2A6f6.js";import{s as Nr,a as er}from"../chunks/CAofB27F.js";import{p as Tr}from"../chunks/-YgP7Ysb.js";import{g as Kt}from"../chunks/5D1vQkJ2.js";import{b as Yt}from"../chunks/CjgJlaKl.js";import{a as ae}from"../chunks/ngrFHoWO.js";import{u as tr}from"../chunks/DSpOhgIp.js";import{A as qr}from"../chunks/CtuTlJ64.js";function Fr(re,d,u,D,ue,at){e(d).selected_models||(e(d).selected_models={}),e(d).selected_models[e(u)]=[...e(D)],e(d).selected_models={...e(d).selected_models},e(d).default_models||(e(d).default_models={});const M=e(d).default_models[e(u)]||"",je=e(d).selected_models[e(u)]||[];M&&!je.includes(M)?je.length>0?(e(d).default_models[e(u)]=je[0],ue(`Default model auto-corrected for ${e(u)}`)):e(d).default_models[e(u)]="":!M&&je.length>0&&(e(d).default_models[e(u)]=je[0],ue(`Default model set for ${e(u)}`)),e(d).default_models={...e(d).default_models},ue(`Model selection updated for ${e(u)}`),at()}function Rr(re,d,u,D){s(d,[...e(d),...e(u)],!0),s(u,[],!0),s(D,[],!0)}function Vr(re,d,u,D){s(d,[...e(d),...e(u)],!0),s(D,e(D).filter(ue=>!e(u).includes(ue)),!0),s(u,[],!0)}function Jr(re,d,u,D){s(d,[...e(d),...e(u)],!0),s(D,e(D).filter(ue=>!e(u).includes(ue)),!0),s(u,[],!0)}function Kr(re,d,u,D){s(d,[...e(d),...e(u)],!0),s(u,[],!0),s(D,[],!0)}function Yr(re,d,u){s(d,"dashboard"),Kt(`${Yt}/org-admin?view=dashboard`,{replaceState:!0}),u()}function Hr(re,d,u){s(d,"users"),Kt(`${Yt}/org-admin?view=users`,{replaceState:!0}),u()}function Qr(re,d,u){s(d,"assistants"),Kt(`${Yt}/org-admin?view=assistants`,{replaceState:!0}),u()}function Wr(re,d,u){s(d,"settings"),Kt(`${Yt}/org-admin?view=settings`,{replaceState:!0}),u()}function Gr(re,d,u,D){!e(d)&&!e(u)&&D(),s(d,!e(d))}function Xr(re,d,u,D,ue){s(d,{email:"",name:"",password:"",enabled:!0,user_type:"creator"},!0),s(u,null),s(D,!1),s(ue,!0)}async function Zr(re,d,u,D,ue,at,M,je,R,He){var Qe,We;s(d,null),s(u,!1);try{const fe=D();if(!fe)throw new Error("Authentication token not found. Please log in again.");let rt;try{if(rt=JSON.parse(e(ue)||"{}"),rt===null||typeof rt!="object"||Array.isArray(rt))throw new Error("Assistant defaults must be a JSON object.")}catch(Te){throw new Error(`Invalid JSON: ${Te instanceof Error?Te.message:"Parsing error"}`)}let lt=at();if(lt||(await M(),lt=at()),!lt)throw new Error("Unable to resolve organization slug.");const Oe=je(`/organizations/${lt}/assistant-defaults`);await ae.put(Oe,rt,{headers:{Authorization:`Bearer ${fe}`,"Content-Type":"application/json"}}),s(R,rt,!0),s(u,!0),He("Assistant defaults updated")}catch(fe){console.error("Error updating assistant defaults:",fe),fe instanceof Error?s(d,fe.message,!0):ae.isAxiosError(fe)&&((We=(Qe=fe.response)==null?void 0:Qe.data)!=null&&We.detail)?s(d,fe.response.data.detail,!0):s(d,"Failed to update assistant defaults.")}}async function es(re,d,u,D,ue,at){try{const M=d();if(!M)throw new Error("Authentication token not found. Please log in again.");const je=e(u)?D(`/org-admin/settings/signup?org=${e(u)}`):D("/org-admin/settings/signup");await ae.put(je,e(ue),{headers:{Authorization:`Bearer ${M}`,"Content-Type":"application/json"}}),await at()}catch(M){console.error("Error updating signup settings:",M)}}async function ts(re,d,u,D,ue,at,M,je){try{const R=d();if(!R)throw new Error("Authentication token not found. Please log in again.");const He=e(u)?D(`/org-admin/settings/api?org=${e(u)}`):D("/org-admin/settings/api");if(await ae.put(He,e(ue),{headers:{Authorization:`Bearer ${R}`,"Content-Type":"application/json"}}),at(),typeof window<"u")try{const{assistantConfigStore:Qe}=await $r(async()=>{const{assistantConfigStore:We}=await import("../chunks/9q7li0xI.js").then(fe=>fe.c);return{assistantConfigStore:We}},__vite__mapDeps([0,1,2,3]),import.meta.url);Qe.clearCache(),console.log("Cleared assistant capabilities cache after API settings update")}catch(Qe){console.warn("Could not clear capabilities cache:",Qe)}await M(),await je()}catch(R){console.error("Error updating API settings:",R)}}var as=n('<div class="mb-6 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline"> </span></div>'),rs=n('<div class="text-blue-200 text-xs mb-1"><svg class="inline h-3 w-3 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> System Admin View</div>'),ss=n('<div class="mt-4 bg-blue-800 bg-opacity-50 rounded-md p-4"><div class="flex items-center justify-between"><div><h4 class="text-sm font-medium text-blue-100 mb-1">Organization Signup Key</h4> <div class="font-mono text-white text-lg" id="signup-key-display"> </div></div> <button type="button" class="ml-4 px-3 py-1 text-white text-sm rounded-md transition-colors hover:opacity-90" style="background-color: #2271b3;"> </button></div> <p class="text-blue-200 text-xs mt-2">Share this key with users to allow them to sign up for your organization</p></div>'),os=n('<div class="mt-4 bg-yellow-600 bg-opacity-50 rounded-md p-3"><p class="text-yellow-100 text-sm"><svg class="inline h-4 w-4 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg> No signup key configured. Users cannot self-register for this organization.</p></div>'),is=n('<div class="bg-gradient-to-r from-blue-600 to-blue-700 rounded-lg shadow-lg mb-6"><div class="px-6 py-6 text-white"><div class="flex items-center justify-between"><div><h1 class="text-3xl font-bold mb-2"> </h1> <p class="text-blue-100 text-lg">Organization Administration</p></div> <div class="text-right"><!> <div class="text-blue-100 text-sm mb-1">Organization ID</div> <div class="font-mono text-white"> </div></div></div> <!></div></div>'),ns=n('<div class="text-center py-12"><div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div> <p class="mt-2 text-gray-600">Loading dashboard...</p></div>'),ls=n('<span class="text-green-600">✓ APIs Working</span> <div class="text-sm text-gray-500 mt-1"> </div>',1),ds=n('<span class="text-yellow-600">⚠ Partial Setup</span> <div class="text-sm text-gray-500 mt-1"> </div>',1),vs=n('<span class="text-red-600">❌ API Errors</span> <div class="text-sm text-gray-500 mt-1">Check configuration</div>',1),cs=n('<span class="text-gray-600">⚠ Not Configured</span>'),us=n('<span class="text-blue-600"> </span>'),ps=n("<span> </span>"),gs=n('<span class="inline-block px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded"> </span>'),_s=n('<div class="mb-2"><div class="text-xs text-gray-600 mb-1"><strong> </strong> models enabled <!></div> <div class="flex flex-wrap gap-1"><!> <!></div></div>'),ms=n('<div class="text-xs text-gray-500 italic">No models enabled</div>'),bs=n('<div class="bg-gray-50 rounded-lg p-3"><div class="flex items-center justify-between mb-2"><h5 class="font-medium text-gray-900 capitalize"> </h5> <span> </span></div> <!></div>'),fs=n('<div class="mt-6"><h4 class="text-sm font-medium text-gray-900 mb-3">Enabled Models by Connector</h4> <div class="space-y-3"></div></div>'),xs=n('<div class="bg-white overflow-hidden shadow rounded-lg mb-6"><div class="px-4 py-5 sm:p-6"><h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">Organization Statistics</h3> <div class="grid grid-cols-1 gap-5 sm:grid-cols-3"><div class="bg-blue-50 overflow-hidden shadow rounded-lg"><div class="p-5"><div class="flex items-center"><div class="flex-shrink-0"><svg class="h-6 w-6 text-blue-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"></path></svg></div> <div class="ml-5 w-0 flex-1"><dl><dt class="text-sm font-medium text-gray-500 truncate">Total Users</dt> <dd class="text-lg font-medium text-gray-900"> </dd></dl></div></div></div></div> <div class="bg-green-50 overflow-hidden shadow rounded-lg"><div class="p-5"><div class="flex items-center"><div class="flex-shrink-0"><svg class="h-6 w-6 text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div> <div class="ml-5 w-0 flex-1"><dl><dt class="text-sm font-medium text-gray-500 truncate">Active Users</dt> <dd class="text-lg font-medium text-gray-900"> </dd></dl></div></div></div></div> <div class="bg-yellow-50 overflow-hidden shadow rounded-lg"><div class="p-5"><div class="flex items-center"><div class="flex-shrink-0"><svg class="h-6 w-6 text-yellow-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg></div> <div class="ml-5 w-0 flex-1"><dl><dt class="text-sm font-medium text-gray-500 truncate">Configuration</dt> <dd class="text-lg font-medium text-gray-900"><!></dd></dl></div></div></div> <!></div></div></div></div> <div class="bg-white overflow-hidden shadow rounded-lg"><div class="px-4 py-5 sm:p-6"><h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">Quick Settings</h3> <div class="space-y-3"><div class="flex items-center justify-between"><span class="text-sm text-gray-600">Signup Enabled</span> <span> </span></div> <div class="flex items-center justify-between"><span class="text-sm text-gray-600">Signup Key Set</span> <span> </span></div> <div class="flex items-center justify-between"><span class="text-sm text-gray-600">API Configured</span> <span> </span></div></div></div></div>',1),hs=n('<div class="mb-6"><!> <!></div>'),ys=n('<div class="text-xs text-blue-600 mb-1"><svg class="inline h-3 w-3 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> System Admin View</div>'),ws=n('<div class="bg-white border-l-4 border-blue-500 shadow-sm rounded-lg mb-4"><div class="px-4 py-3"><div class="flex items-center justify-between"><div><h1 class="text-xl font-semibold text-gray-900"> </h1> <p class="text-sm text-gray-600">User Management</p></div> <div class="text-right text-sm text-gray-500"><!> </div></div></div></div>'),ks=n('<div class="mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline"> </span></div>'),As=n('<div class="text-center py-12"><div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div> <p class="mt-2 text-gray-600">Loading users...</p></div>'),Cs=ar('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"></path></svg>'),zs=ar('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>'),Es=n('<tr class="hover:bg-gray-50"><td class="px-6 py-4 whitespace-nowrap align-top"><div class="text-sm font-medium text-gray-900"> </div></td><td class="px-6 py-4 whitespace-nowrap align-top"><div class="text-sm text-gray-800"> </div></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800"><span> </span></td><td class="px-6 py-4 whitespace-nowrap text-sm"><span> </span></td><td class="px-6 py-4 whitespace-nowrap text-sm font-medium"><button class="text-amber-600 hover:text-amber-800 mr-3" title="Change Password" aria-label="Change Password"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"></path></svg></button> <button><!></button></td></tr>'),$s=n('<div class="overflow-x-auto shadow-md sm:rounded-lg mb-6 border border-gray-200 svelte-ra63b7"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th scope="col" class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider" style="color: #2271b3;">Name</th><th scope="col" class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider" style="color: #2271b3;">Email</th><th scope="col" class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider" style="color: #2271b3;">Role</th><th scope="col" class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider" style="color: #2271b3;">Status</th><th scope="col" class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider" style="color: #2271b3;">Actions</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table></div>'),Ss=n('<div class="mb-6"><!> <div class="flex justify-between items-center mb-4"><h2 class="text-2xl font-semibold text-gray-800">Manage Users</h2> <button class="text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline hover:opacity-90" style="background-color: #2271b3;">Create User</button></div> <!> <!></div>'),Us=n('<div class="mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-md"> </div>'),Ps=n('<div class="bg-white shadow-sm rounded-lg p-8 text-center"><div class="text-gray-600">Loading assistants...</div></div>'),js=(re,d,u)=>{s(d,""),s(u,"all")},Os=n('<p>No assistants match your search criteria.</p> <button class="mt-4 px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300">Clear Filters</button>',1),Ms=n("<p>No assistants found in your organization.</p>"),Ls=n('<div class="bg-white shadow-sm rounded-lg p-8 text-center"><div class="text-gray-600"><!></div></div>'),Is=n('<span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Published</span>'),Ds=n('<span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">Unpublished</span>'),Bs=(re,d,u)=>d(e(u)),Ns=n('<tr class="hover:bg-gray-50"><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"> </td><td class="px-6 py-4 text-sm text-gray-600 max-w-xs truncate"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600 font-mono text-xs"> </td><td class="px-6 py-4 whitespace-nowrap"><!></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600"> </td><td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium"><button class="px-3 py-1 text-white rounded-md text-xs hover:opacity-90" style="background-color: #2271b3;">Manage Access</button></td></tr>'),Ts=n('<div class="bg-white shadow-sm rounded-lg overflow-hidden"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Owner</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Created</th><th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table></div>'),qs=n('<div class="mb-6"><div class="bg-white shadow-sm rounded-lg p-4 mb-6"><div class="flex justify-between items-center"><div><h2 class="text-xl font-semibold text-gray-800">Organization Assistants</h2> <p class="text-sm text-gray-600 mt-1">View and manage user access to all assistants in your organization</p></div></div></div> <div class="bg-white shadow-sm rounded-lg p-4 mb-4"><div class="flex gap-4 flex-wrap items-center"><div class="flex-1 min-w-[200px]"><input type="text" placeholder="Search assistants..." class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"/></div> <div class="flex items-center gap-2"><label for="filter-published" class="text-sm font-medium text-gray-700">Filter:</label> <select id="filter-published" class="px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"><option>All Assistants</option><option>Published Only</option><option>Unpublished Only</option></select></div> <button class="px-4 py-2 text-white rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:opacity-90" style="background-color: #2271b3;"> </button></div></div> <!> <!></div>'),Fs=n('<div class="text-xs text-blue-600 mb-1"><svg class="inline h-3 w-3 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> System Admin View</div>'),Rs=n('<div class="bg-white border-l-4 border-green-500 shadow-sm rounded-lg mb-4"><div class="px-4 py-3"><div class="flex items-center justify-between"><div><h1 class="text-xl font-semibold text-gray-900"> </h1> <p class="text-sm text-gray-600">Organization Settings</p></div> <div class="text-right text-sm text-gray-500"><!> </div></div></div></div>'),Vs=n('<div class="mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline"> </span></div>'),Js=n('<div class="text-center py-12"><div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div> <p class="mt-2 text-gray-600">Loading settings...</p></div>'),Ks=n('<div><label for="signup-key" class="block text-sm font-medium text-gray-700">Signup Key</label> <input type="text" id="signup-key" class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="Enter unique signup key"/> <p class="mt-1 text-sm text-gray-500">Unique key for users to signup to this organization (8-64 characters)</p></div>'),Ys=n('<span class="text-green-600"> </span>'),Hs=n('<span class="text-blue-600">• <strong> </strong> selected</span> <!>',1),Qs=n('<span class="text-gray-500">• No models selected</span>'),Ws=n('<div class="py-1"> </div>'),Gs=n('<div class="py-1 font-medium"> </div>'),Xs=n('<div class="text-xs text-gray-500"><div class="max-h-20 overflow-y-auto"><!> <!></div></div>'),Zs=n('<div class="text-sm text-gray-600 mb-2"><strong> </strong> models available <!></div> <!>',1),eo=n('<div class="text-sm text-red-600"> </div>'),to=n('<div class="text-xs text-gray-400 mt-2"> </div>'),ao=n('<div class="border rounded-lg p-4"><div class="flex items-center justify-between mb-2"><h4 class="font-medium text-gray-900 capitalize"> </h4> <span> </span></div> <!> <!></div>'),ro=n('<div class="text-center py-8 text-gray-500"><p>No API providers configured</p> <p class="text-sm mt-1">Configure OpenAI or Ollama below to get started</p></div>'),so=n('<div class="bg-white overflow-hidden shadow rounded-lg mb-6"><div class="px-4 py-5 sm:p-6"><h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">API Status Overview</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"></div> <!></div></div>'),oo=(re,d,u)=>e(d).openai_api_key&&u("OpenAI API key updated"),io=(re,d,u,D)=>d(u(),D()),no=n('<span class="inline-block px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded"> </span>'),lo=n('<div class="flex flex-wrap gap-1"></div>'),vo=n('<p class="text-gray-500 text-sm italic">No models enabled</p>'),co=(re,d,u)=>d(`Default model changed for ${u()}`),uo=n("<option> </option>"),po=n('<div class="mt-3"><label class="block text-sm font-medium text-gray-700 mb-2">Default Model</label> <select class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"><option>Select a default model...</option><!></select> <p class="mt-1 text-xs text-gray-500">This model will be used as the default when creating new assistants for this provider.</p></div>'),go=n('<div class="mb-6 border rounded-lg p-4"><div class="flex items-center justify-between mb-3"><h4 class="font-medium text-gray-900 capitalize"> </h4> <button type="button" class="px-3 py-1 text-sm text-white rounded hover:opacity-90" style="background-color: #2271b3;">Manage Models</button></div> <div class="text-sm text-gray-600 mb-2"><strong> </strong> </div> <div class="bg-gray-50 rounded p-3 max-h-32 overflow-y-auto"><!></div> <!></div>'),_o=n('<div class="text-center py-8 text-gray-500"><p>No API providers configured or available.</p></div>'),mo=n('<div class="flex items-center"><span class="inline-block w-1 h-1 bg-yellow-600 rounded-full mr-2"></span> </div>'),bo=n('<div class="mb-4 p-3 bg-yellow-50 border-l-4 border-yellow-400 rounded"><div class="flex items-center"><div class="flex-shrink-0"><svg class="h-5 w-5 text-yellow-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><p class="text-sm text-yellow-700 font-medium">Unsaved Changes</p> <div class="mt-1 text-sm text-yellow-600"></div> <p class="mt-2 text-sm text-yellow-600">Click "Commit Changes" below to save all modifications to the database.</p></div></div></div>'),fo=n('<div class="mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline"> </span></div>'),xo=n('<div class="mb-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline">Assistant defaults saved successfully.</span></div>'),ho=n('<div class="bg-white overflow-hidden shadow rounded-lg mb-6"><div class="px-4 py-5 sm:p-6"><h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">Signup Settings</h3> <div class="space-y-4"><div class="flex items-center"><input id="signup-enabled" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"/> <label for="signup-enabled" class="ml-2 block text-sm text-gray-900">Enable organization-specific signup</label></div> <!> <button class="text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline hover:opacity-90" style="background-color: #2271b3;">Update Signup Settings</button></div></div></div> <!> <div class="bg-white overflow-hidden shadow rounded-lg"><div class="px-4 py-5 sm:p-6"><h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">API Configuration</h3> <div class="space-y-4"><div><label for="openai-key" class="block text-sm font-medium text-gray-700">OpenAI API Key</label> <input type="password" id="openai-key" class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"/> <p class="mt-1 text-sm text-gray-500"><!></p></div> <div><label for="openai-base-url" class="block text-sm font-medium text-gray-700">OpenAI Base URL</label> <input type="url" id="openai-base-url" class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="https://api.openai.com/v1"/> <p class="mt-1 text-sm text-gray-500">Custom OpenAI API endpoint. Leave empty to use default (https://api.openai.com/v1).</p></div> <div><label for="ollama-base-url" class="block text-sm font-medium text-gray-700">Ollama Server URL</label> <input type="url" id="ollama-base-url" class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="http://localhost:11434"/> <p class="mt-1 text-sm text-gray-500">URL of your Ollama server. This can be a local or remote Ollama installation.</p></div> <div><h4 class="block text-sm font-medium text-gray-700 mb-3">Model Selection</h4> <p class="text-sm text-gray-500 mb-4">Configure which models are available to users in your organization</p> <!></div> <!> <button> </button></div></div></div> <div class="bg-white overflow-hidden shadow rounded-lg mt-6"><div class="px-4 py-5 sm:p-6"><h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">Assistant Defaults</h3> <p class="text-sm text-gray-600 mb-4">These values seed the Create/Edit Assistant form for users in this organization. Edit as raw JSON to add or change fields dynamically.</p> <!> <!> <div class="space-y-3"><label for="assistant-defaults-json" class="block text-sm font-medium text-gray-700">assistant_defaults (JSON)</label> <textarea id="assistant-defaults-json" class="font-mono text-sm mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 min-h-[280px]"></textarea> <div class="flex items-center gap-3"><button class="text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline disabled:opacity-50 hover:opacity-90" style="background-color: #2271b3;">Save Assistant Defaults</button> <button class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Reload</button></div> <p class="text-xs text-gray-500">Tip: Fields are dynamic. Unknown keys will be preserved. Ensure the `connector` and `llm` are enabled in this organization.</p></div></div></div>',1),yo=n('<div class="mb-6"><!> <h2 class="text-2xl font-semibold text-gray-800 mb-4">Configuration</h2> <!> <!></div>'),wo=n('<div class="mt-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline">User created successfully!</span></div>'),ko=n('<div class="mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline"> </span></div>'),Ao=n('<form class="mt-4"><!> <div class="mb-4 text-left"><label for="email" class="block text-gray-700 text-sm font-bold mb-2">Email *</label> <input type="email" id="email" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required/></div> <div class="mb-4 text-left"><label for="name" class="block text-gray-700 text-sm font-bold mb-2">Name *</label> <input type="text" id="name" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required/></div> <div class="mb-4 text-left"><label for="password" class="block text-gray-700 text-sm font-bold mb-2">Password *</label> <input type="password" id="password" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required/></div> <div class="mb-4 text-left"><label for="user_type" class="block text-gray-700 text-sm font-bold mb-2">User Type</label> <select id="user_type" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"><option>Creator (Can create assistants)</option><option>End User (Redirects to Open WebUI)</option></select></div> <div class="mb-6 text-left"><div class="flex items-center"><input type="checkbox" id="enabled" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"/> <label for="enabled" class="ml-2 block text-sm text-gray-900">User enabled</label></div></div> <div class="flex items-center justify-between"><button type="button" class="bg-gray-300 hover:bg-gray-400 text-gray-800 py-2 px-4 rounded focus:outline-none focus:shadow-outline">Cancel</button> <button type="submit" class="text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline disabled:opacity-50 hover:opacity-90" style="background-color: #2271b3;"><!></button></div></form>'),Co=n('<div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center"><div class="relative mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white"><div class="mt-3 text-center"><h3 class="text-lg leading-6 font-medium text-gray-900">Create New User</h3> <!></div></div></div>'),zo=n('<div class="mt-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline">Password changed successfully!</span></div>'),Eo=n('<div class="mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline"> </span></div>'),$o=n('<form class="mt-4"><!> <div class="mb-4 text-left"><label for="new-password" class="block text-gray-700 text-sm font-bold mb-2">New Password *</label> <input type="password" id="new-password" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required autocomplete="new-password" minlength="8"/> <p class="text-gray-500 text-xs italic mt-1">At least 8 characters recommended</p></div> <div class="flex items-center justify-between"><button type="button" class="bg-gray-300 hover:bg-gray-400 text-gray-800 py-2 px-4 rounded focus:outline-none focus:shadow-outline">Cancel</button> <button type="submit" class="text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline disabled:opacity-50 hover:opacity-90" style="background-color: #2271b3;"> </button></div></form>'),So=n('<div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center"><div class="relative mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white"><div class="mt-3 text-center"><h3 class="text-lg leading-6 font-medium text-gray-900">Change Password</h3> <p class="text-sm text-gray-500 mt-1"> </p> <!></div></div></div>'),Uo=(re,d,u)=>{re.target.checked?s(d,[...e(d),e(u)],!0):s(d,e(d).filter(D=>D!==e(u)),!0)},Po=n('<label class="flex items-center p-2 hover:bg-gray-50 border-b last:border-b-0"><input type="checkbox" class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"/> <span class="text-sm truncate"> </span></label>'),jo=n('<div class="p-4 text-center text-gray-500 text-sm">No models enabled</div>'),Oo=(re,d,u)=>{re.target.checked?s(d,[...e(d),e(u)],!0):s(d,e(d).filter(D=>D!==e(u)),!0)},Mo=n('<label class="flex items-center p-2 hover:bg-gray-50 border-b last:border-b-0"><input type="checkbox" class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"/> <span class="text-sm truncate"> </span></label>'),Lo=n('<div class="p-4 text-center text-gray-500 text-sm">All models enabled</div>'),Io=n('<div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"><div class="relative top-20 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white"><div class="mt-3"><div class="flex items-center justify-between mb-4"><h3 class="text-lg font-medium text-gray-900 capitalize"> </h3> <button type="button" class="text-gray-400 hover:text-gray-600" aria-label="Close modal"><svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="grid grid-cols-1 md:grid-cols-5 gap-4 h-96"><div class="md:col-span-2 border rounded-lg p-4"><div class="flex items-center justify-between mb-3"><h4 class="font-medium text-gray-900">Enabled Models</h4> <span class="text-sm text-gray-500"> </span></div> <input type="text" placeholder="Search enabled models..." class="w-full mb-3 px-3 py-2 border border-gray-300 rounded-md text-sm"/> <div class="border rounded max-h-64 overflow-y-auto"><!> <!></div></div> <div class="flex flex-col justify-center items-center space-y-2"><button type="button" class="px-3 py-2 text-white rounded disabled:opacity-50 hover:opacity-90" style="background-color: #2271b3;" title="Move all models to enabled">&lt;&lt;</button> <button type="button" class="px-3 py-2 text-white rounded disabled:opacity-50 hover:opacity-90" style="background-color: #2271b3;" title="Move selected models to enabled">&lt;</button> <button type="button" class="px-3 py-2 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50" title="Move selected models to disabled">&gt;</button> <button type="button" class="px-3 py-2 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50" title="Move all models to disabled">&gt;&gt;</button></div> <div class="md:col-span-2 border rounded-lg p-4"><div class="flex items-center justify-between mb-3"><h4 class="font-medium text-gray-900">Available Models</h4> <span class="text-sm text-gray-500"> </span></div> <input type="text" placeholder="Search available models..." class="w-full mb-3 px-3 py-2 border border-gray-300 rounded-md text-sm"/> <div class="border rounded max-h-64 overflow-y-auto"><!> <!></div></div></div> <div class="flex items-center justify-end mt-6 pt-4 border-t space-x-3"><button type="button" class="px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400">Cancel</button> <button type="button" class="px-4 py-2 text-white rounded hover:opacity-90" style="background-color: #2271b3;">Save Changes</button></div></div></div></div>'),Do=n('<div class="min-h-screen bg-gray-50"><nav class="bg-white shadow-sm border-b border-gray-200"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="flex justify-between h-16"><div class="flex"><div class="flex-shrink-0 flex items-center"><h1 class="text-xl font-semibold text-gray-800">Organization Admin</h1></div> <div class="ml-6 flex space-x-8"><button>Dashboard</button> <button>Users</button> <button>Assistants Access</button> <button>Settings</button></div></div> <div class="flex items-center"><span class="text-sm text-gray-600"> </span></div></div></div></nav> <main class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"><div class="px-4 py-6 sm:px-0"><!> <!> <!> <!> <!></div></main></div> <!> <!> <!> <!>',1);function ei(re,d){Ur(d,!0);const u=()=>er(tr,"$user",ue),D=()=>er(Tr,"$page",ue),[ue,at]=Nr();let M=b(null);const je="/creator/admin";let R=b("dashboard"),He=b(null),Qe=b(Be([])),We=b(!1),fe=b(null),rt=b(null),lt=b(!1),Oe=b(""),Te=b("all"),k=b(null),Ht=b(!1),dt=b(Be([])),Qt=b(!1),yt=b(null),va=b(!1),de=b(Be({email:"",name:"",password:"",enabled:!0,user_type:"creator"})),Wt=b(!1),Ge=b(null),Gt=b(!1),ca=b(!1),st=b(Be({user_id:null,user_name:"",user_email:"",new_password:""})),Xt=b(!1),ft=b(null),Zt=b(!1),ea=b(Be({signup_enabled:!1,signup_key:"",signup_key_masked:!1})),qe=b(Be({openai_api_key_set:!1,openai_base_url:"https://api.openai.com/v1",ollama_base_url:"http://localhost:11434",available_models:[],model_limits:{},api_endpoints:{}})),ta=b(!1),wt=b(null),ua=b(null),aa=b(""),ra=b(!1),kt=b(null),pa=b(!1);const rr='{"connector":"openai","llm":"gpt-4o-mini","system_prompt":"..."}';let At=b(Be({signup_enabled:!1,signup_key:""})),ie=b(Be({openai_api_key:"",openai_base_url:"",ollama_base_url:"",available_models:[],model_limits:{},selected_models:{}})),ga=b(!1),_a=b(""),sr=b(Be([])),ot=b(Be([])),vt=b(Be([])),Pt=b(Be([])),jt=b(Be([])),sa=b(""),oa=b(""),ia=b(""),ma=b(!1),pe=b(null),Ot=b(!1),Dt=b(Be([]));function or(i,v){var l;s(_a,i,!0),s(sr,[...v],!0);const c=((l=e(ie).selected_models)==null?void 0:l[i])||[];s(ot,[...c],!0),s(vt,v.filter(_=>!c.includes(_)),!0),s(Pt,[],!0),s(jt,[],!0),s(sa,""),s(oa,""),s(ga,!0)}function ba(){s(ga,!1)}function na(i){e(Dt).includes(i)||s(Dt,[...e(Dt),i],!0),s(Ot,!0)}function ir(){s(Dt,[],!0),s(Ot,!1)}function Xe(){return!e(M)||!e(M).isLoggedIn||!e(M).token?(console.error("No authentication token available. User must be logged in."),null):e(M).token}function _e(i){return`${je}${i}`}async function Bt(){var i,v,c;if(e(Ht)){console.log("Already loading dashboard, skipping duplicate request");return}console.log("Fetching organization dashboard..."),s(Ht,!0),s(He,null);try{const l=Xe();if(!l)throw new Error("Authentication token not found. Please log in again.");const _=e(pe)?_e(`/org-admin/dashboard?org=${e(pe)}`):_e("/org-admin/dashboard");console.log(`Fetching dashboard from: ${_}`);const A=await ae.get(_,{headers:{Authorization:`Bearer ${l}`}});console.log("Dashboard API Response:",A.data),s(k,A.data,!0)}catch(l){console.error("Error fetching dashboard:",l),ae.isAxiosError(l)&&((i=l.response)==null?void 0:i.status)===403?s(He,"Access denied. Organization admin privileges required."):ae.isAxiosError(l)&&((c=(v=l.response)==null?void 0:v.data)!=null&&c.detail)?s(He,l.response.data.detail,!0):l instanceof Error?s(He,l.message,!0):s(He,"An unknown error occurred while fetching dashboard."),s(k,null)}finally{s(Ht,!1)}}async function nr(){try{const i=Xe();if(!i)throw new Error("Authentication token not found");const v=e(pe)?_e(`/org-admin/settings/signup?org=${e(pe)}`):_e("/org-admin/settings/signup"),c=await ae.get(v,{headers:{Authorization:`Bearer ${i}`}});s(ia,c.data.signup_key||"",!0)}catch(i){console.error("Error fetching signup key:",i),s(ia,"")}}async function la(){var i,v,c;if(e(Qt)){console.log("Already loading users, skipping duplicate request");return}console.log("Fetching organization users..."),s(Qt,!0),s(yt,null);try{const l=Xe();if(!l)throw new Error("Authentication token not found. Please log in again.");const _=e(pe)?_e(`/org-admin/users?org=${e(pe)}`):_e("/org-admin/users");console.log(`Fetching users from: ${_}`);const A=await ae.get(_,{headers:{Authorization:`Bearer ${l}`}});console.log("Users API Response:",A.data),s(dt,A.data||[],!0),console.log(`Fetched ${e(dt).length} users`)}catch(l){console.error("Error fetching users:",l),ae.isAxiosError(l)&&((i=l.response)==null?void 0:i.status)===403?s(yt,"Access denied. Organization admin privileges required."):ae.isAxiosError(l)&&((c=(v=l.response)==null?void 0:v.data)!=null&&c.detail)?s(yt,l.response.data.detail,!0):l instanceof Error?s(yt,l.message,!0):s(yt,"An unknown error occurred while fetching users."),s(dt,[],!0)}finally{s(Qt,!1)}}async function lr(i){var l,_;const v=!i.enabled,c=v?"enable":"disable";if(e(M)&&e(M).email===i.email&&!v){alert("You cannot disable your own account. Please ask another administrator to disable your account if needed.");return}if(confirm(`Are you sure you want to ${c} ${i.name} (${i.email})?`))try{const A=Xe();if(!A)throw new Error("Authentication token not found. Please log in again.");const H=_e(`/org-admin/users/${i.id}`);console.log(`${c==="enable"?"Enabling":"Disabling"} user ${i.email} at: ${H}`);const L=await ae.put(H,{enabled:v},{headers:{Authorization:`Bearer ${A}`,"Content-Type":"application/json"}});console.log(`User ${c} response:`,L.data);const P=e(dt).findIndex(h=>h.id===i.id);P!==-1&&(e(dt)[P].enabled=v,s(dt,[...e(dt)],!0)),alert(`User ${i.name} has been ${v?"enabled":"disabled"} successfully.`)}catch(A){console.error(`Error ${c}ing user:`,A);let H=`Failed to ${c} user.`;ae.isAxiosError(A)&&((_=(l=A.response)==null?void 0:l.data)!=null&&_.detail)?H=A.response.data.detail:A instanceof Error&&(H=A.message),alert(`Error: ${H}`)}}function Pa(){s(va,!1),s(Ge,null),s(Gt,!1)}function dr(i){s(st,{user_id:i.id,user_name:i.name,user_email:i.email,new_password:""},!0),s(ft,null),s(Zt,!1),s(ca,!0)}function ja(){s(ca,!1),s(ft,null),s(Zt,!1)}async function vr(i){var v,c;if(i.preventDefault(),!e(st).new_password){s(ft,"Please enter a new password.");return}if(e(st).new_password.length<8){s(ft,"Password should be at least 8 characters.");return}s(ft,null),s(Xt,!0);try{const l=Xe();if(!l)throw new Error("Authentication token not found. Please log in again.");const _=_e(`/org-admin/users/${e(st).user_id}/password`);console.log(`Changing password for user ${e(st).user_email} at: ${_}`);const A=await ae.post(_,{new_password:e(st).new_password},{headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}});console.log("Change password response:",A.data),s(Zt,!0),setTimeout(()=>{ja()},1500)}catch(l){console.error("Error changing password:",l);let _="Failed to change password.";ae.isAxiosError(l)&&((c=(v=l.response)==null?void 0:v.data)!=null&&c.detail)?_=l.response.data.detail:l instanceof Error&&(_=l.message),s(ft,_,!0)}finally{s(Xt,!1)}}async function cr(i){var v,c,l;if(i.preventDefault(),!e(de).email||!e(de).name||!e(de).password){s(Ge,"Please fill in all required fields.");return}if(!e(de).email.includes("@")){s(Ge,"Please enter a valid email address.");return}s(Ge,null),s(Wt,!0);try{const _=Xe();if(!_)throw new Error("Authentication token not found. Please log in again.");const A=_e("/org-admin/users");console.log(`Creating user at: ${A}`);const H=await ae.post(A,{email:e(de).email,name:e(de).name,password:e(de).password,enabled:e(de).enabled,user_type:e(de).user_type},{headers:{Authorization:`Bearer ${_}`,"Content-Type":"application/json"}});console.log("Create user response:",H.data),s(Gt,!0),setTimeout(()=>{Pa(),la()},1500)}catch(_){console.error("Error creating user:",_),ae.isAxiosError(_)&&((v=_.response)==null?void 0:v.status)===403?s(Ge,"Access denied. Organization admin privileges required."):ae.isAxiosError(_)&&((l=(c=_.response)==null?void 0:c.data)!=null&&l.detail)?s(Ge,_.response.data.detail,!0):_ instanceof Error?s(Ge,_.message,!0):s(Ge,"An unknown error occurred while creating user.")}finally{s(Wt,!1)}}async function Nt(){var i,v;if(e(We)){console.log("Already loading assistants, skipping duplicate request");return}s(We,!0),s(fe,null);try{const c={Authorization:`Bearer ${u().token}`,"Content-Type":"application/json"},l=await ae.get(`${je}/org-admin/assistants`,{headers:c});s(Qe,l.data.assistants||[],!0)}catch(c){console.error("Error fetching assistants:",c),s(fe,((v=(i=c.response)==null?void 0:i.data)==null?void 0:v.detail)||"Failed to fetch assistants",!0)}finally{s(We,!1)}}function ur(i){s(rt,i,!0),s(lt,!0)}function pr(){s(lt,!1),s(rt,null)}function gr(){Nt()}function _r(i){return i?new Date(i*1e3).toLocaleDateString():"N/A"}async function Tt(){var i,v,c;if(e(ta)){console.log("Already loading settings, skipping duplicate request");return}console.log("Fetching organization settings..."),s(ta,!0),s(wt,null);try{const l=Xe();if(!l)throw new Error("Authentication token not found. Please log in again.");const _=e(pe)?_e(`/org-admin/settings/signup?org=${e(pe)}`):_e("/org-admin/settings/signup"),A=await ae.get(_,{headers:{Authorization:`Bearer ${l}`}}),H=e(pe)?_e(`/org-admin/settings/api?org=${e(pe)}`):_e("/org-admin/settings/api"),L=await ae.get(H,{headers:{Authorization:`Bearer ${l}`}});if(s(ea,A.data,!0),s(qe,L.data,!0),s(At,{signup_enabled:e(ea).signup_enabled,signup_key:e(ea).signup_key||""},!0),s(ie,{openai_api_key:"",openai_base_url:e(qe).openai_base_url||"https://api.openai.com/v1",ollama_base_url:e(qe).ollama_base_url||"http://localhost:11434",available_models:Array.isArray(e(qe).available_models)?[...e(qe).available_models]:[],model_limits:{...e(qe).model_limits||{}},selected_models:{...e(qe).selected_models||{}},default_models:{...e(qe).default_models||{}}},!0),e(ie).selected_models)for(const[P,h]of Object.entries(e(ie).selected_models))h&&h.length>0&&!e(ie).default_models[P]&&(e(ie).default_models[P]=h[0]);await Oa()}catch(l){console.error("Error fetching settings:",l),ae.isAxiosError(l)&&((i=l.response)==null?void 0:i.status)===403?s(wt,"Access denied. Organization admin privileges required."):ae.isAxiosError(l)&&((c=(v=l.response)==null?void 0:v.data)!=null&&c.detail)?s(wt,l.response.data.detail,!0):l instanceof Error?s(wt,l.message,!0):s(wt,"An unknown error occurred while fetching settings.")}finally{s(ta,!1)}}function mr(){var i,v;return e(pe)?e(pe):((v=(i=e(k))==null?void 0:i.organization)==null?void 0:v.slug)||null}async function Oa(){var i,v;if(!e(ra)){s(ra,!0),s(kt,null),s(pa,!1);try{const c=Xe();if(!c)throw new Error("Authentication token not found. Please log in again.");const l=_e("/assistant/defaults").replace("/admin",""),_=await ae.get(l,{headers:{Authorization:`Bearer ${c}`}});s(ua,_.data||{},!0),s(aa,JSON.stringify(e(ua),null,2),!0)}catch(c){console.error("Error fetching assistant defaults:",c),ae.isAxiosError(c)&&((v=(i=c.response)==null?void 0:i.data)!=null&&v.detail)?s(kt,c.response.data.detail,!0):c instanceof Error?s(kt,c.message,!0):s(kt,"Failed to fetch assistant defaults.")}finally{s(ra,!1)}}}Pr(()=>{if(console.log("Organization admin page mounted"),tr.subscribe(v=>{s(M,v,!0)}),!e(M)||!e(M).isLoggedIn){console.log("User not logged in, redirecting to login"),Kt(`${Yt}/auth`,{replaceState:!0});return}const i=D().url.searchParams.get("view")||"dashboard";s(R,i,!0),s(pe,D().url.searchParams.get("org"),!0),e(R)==="dashboard"?Bt():e(R)==="users"?la():e(R)==="assistants"?Nt():e(R)==="settings"&&Tt()}),jr(()=>{console.log("Organization admin page unmounting")}),Or(()=>{e(R)==="dashboard"&&!e(k)?Bt():e(R)==="users"&&e(dt).length===0?la():e(R)==="assistants"&&e(Qe).length===0?Nt():e(R)==="settings"&&!e(ea)&&Tt()});var Ma=Do();Mr(i=>{Ir.title="Organization Admin - LAMB"});var fa=Se(Ma),xa=a(fa),La=a(xa),Ia=a(La),ha=a(Ia),Da=r(a(ha),2),ya=a(Da);ya.__click=[Yr,R,Bt];var wa=r(ya,2);wa.__click=[Hr,R,la];var ka=r(wa,2);ka.__click=[Qr,R,Nt];var Ba=r(ka,2);Ba.__click=[Wr,R,Tt],t(Da),t(ha);var Na=r(ha,2),Ta=a(Na),br=a(Ta,!0);t(Ta),t(Na),t(Ia),t(La),t(xa);var qa=r(xa,2),Fa=a(qa),Ra=a(Fa);{var fr=i=>{var v=as(),c=a(v),l=a(c,!0);t(c),t(v),y(()=>p(l,e(He))),o(i,v)};g(Ra,i=>{e(He)&&i(fr)})}var Va=r(Ra,2);{var xr=i=>{var v=hs(),c=a(v);{var l=L=>{var P=is(),h=a(P),E=a(h),f=a(E),$=a(f),S=a($,!0);t($),Ue(2),t(f);var B=r(f,2),q=a(B);{var x=T=>{var I=rs();o(T,I)};g(q,T=>{e(pe)&&T(x)})}var Z=r(q,4),z=a(Z,!0);t(Z),t(B),t(E);var C=r(E,2);{var N=T=>{var I=ss(),j=a(I),J=a(j),ee=r(a(J),2),Q=a(ee,!0);t(ee),t(J);var X=r(J,2);X.__click=[Gr,ma,ia,nr];var W=a(X,!0);t(X),t(j),Ue(2),t(I),y(()=>{p(Q,e(ma)?e(ia):"••••••••••••••••"),p(W,e(ma)?"Hide":"Show")}),o(T,I)},V=T=>{var I=os();o(T,I)};g(C,T=>{e(k).settings.signup_key_set?T(N):T(V,!1)})}t(h),t(P),y(()=>{p(S,e(k).organization.name),p(z,e(k).organization.slug)}),o(L,P)};g(c,L=>{e(k)&&L(l)})}var _=r(c,2);{var A=L=>{var P=ns();o(L,P)},H=L=>{var P=Ut(),h=Se(P);{var E=f=>{var $=xs(),S=Se($),B=a(S),q=r(a(B),2),x=a(q),Z=a(x),z=a(Z),C=r(a(z),2),N=a(C),V=r(a(N),2),T=a(V,!0);t(V),t(N),t(C),t(z),t(Z),t(x);var I=r(x,2),j=a(I),J=a(j),ee=r(a(J),2),Q=a(ee),X=r(a(Q),2),W=a(X,!0);t(X),t(Q),t(ee),t(J),t(j),t(I);var w=r(I,2),ne=a(w),ve=a(ne),ke=r(a(ve),2),le=a(ke),K=r(a(le),2),se=a(K);{var Ae=m=>{var U=Ut(),ge=Se(U);{var xe=he=>{var Y=ls(),G=r(Se(Y),2),ye=a(G);t(G),y(()=>p(ye,`${e(k).api_status.summary.total_models??""} models available`)),o(he,Y)},nt=he=>{var Y=Ut(),G=Se(Y);{var ye=O=>{var Fe=ds(),Me=r(Se(Fe),2),Re=a(Me);t(Me),y(()=>p(Re,`${e(k).api_status.summary.working_count??""}/${e(k).api_status.summary.configured_count??""} providers working`)),o(O,Fe)},Ze=O=>{var Fe=Ut(),Me=Se(Fe);{var Re=Le=>{var pt=vs();Ue(2),o(Le,pt)},ut=Le=>{var pt=cs();o(Le,pt)};g(Me,Le=>{e(k).api_status.overall_status==="error"?Le(Re):Le(ut,!1)},!0)}o(O,Fe)};g(G,O=>{e(k).api_status.overall_status==="partial"?O(ye):O(Ze,!1)},!0)}o(he,Y)};g(ge,he=>{e(k).api_status.overall_status==="working"?he(xe):he(nt,!1)})}o(m,U)},oe=m=>{var U=Jt();y(()=>p(U,`${e(k).settings.api_configured?"✓":"⚠"} API Setup`)),o(m,U)};g(se,m=>{e(k).api_status?m(Ae):m(oe,!1)})}t(K),t(le),t(ke),t(ve),t(ne);var me=r(ne,2);{var Ce=m=>{var U=fs(),ge=r(a(U),2);Ke(ge,21,()=>Object.entries(e(k).api_status.providers),tt,(xe,nt)=>{var he=$a(()=>Sa(e(nt),2));let Y=()=>e(he)[0],G=()=>e(he)[1];var ye=bs(),Ze=a(ye),O=a(Ze),Fe=a(O,!0);t(O);var Me=r(O,2),Re=a(Me,!0);t(Me),t(Ze);var ut=r(Ze,2);{var Le=Ve=>{var gt=_s(),Et=a(gt),$t=a(Et),Rt=a($t,!0);t($t);var Ie=r($t,2);{var te=be=>{var we=us(),De=a(we);t(we),y(()=>p(De,`• Default: ${G().default_model??""}`)),o(be,we)};g(Ie,be=>{G().default_model&&be(te)})}t(Et);var F=r(Et,2),ce=a(F);Ke(ce,17,()=>G().enabled_models.slice(0,8),tt,(be,we)=>{var De=ps(),_t=a(De,!0);t(De),y(()=>{Ne(De,1,`inline-block px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded ${e(we)===G().default_model?"ring-2 ring-blue-300":""}`),p(_t,e(we))}),o(be,De)});var Ee=r(ce,2);{var $e=be=>{var we=gs(),De=a(we);t(we),y(()=>p(De,`+${G().enabled_models.length-8} more`)),o(be,we)};g(Ee,be=>{G().enabled_models.length>8&&be($e)})}t(F),t(gt),y(()=>p(Rt,G().enabled_models.length)),o(Ve,gt)},pt=Ve=>{var gt=ms();o(Ve,gt)};g(ut,Ve=>{G().enabled_models&&G().enabled_models.length>0?Ve(Le):Ve(pt,!1)})}t(ye),y(()=>{p(Fe,Y()),Ne(Me,1,`px-2 py-1 text-xs rounded-full ${G().status==="working"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`),p(Re,G().status)}),o(xe,ye)}),t(ge),t(U),o(m,U)};g(me,m=>{e(k).api_status&&Object.keys(e(k).api_status.providers).length>0&&m(Ce)})}t(w),t(q),t(B),t(S);var it=r(S,2),xt=a(it),Ct=r(a(xt),2),ze=a(Ct),ct=r(a(ze),2),da=a(ct,!0);t(ct),t(ze);var qt=r(ze,2),Mt=r(a(qt),2),Lt=a(Mt,!0);t(Mt),t(qt);var Ft=r(qt,2),zt=r(a(Ft),2),Aa=a(zt,!0);t(zt),t(Ft),t(Ct),t(xt),t(it),y(()=>{p(T,e(k).stats.total_users),p(W,e(k).stats.active_users),Ne(ct,1,`text-sm font-medium ${e(k).settings.signup_enabled?"text-green-600":"text-gray-400"}`),p(da,e(k).settings.signup_enabled?"Yes":"No"),Ne(Mt,1,`text-sm font-medium ${e(k).settings.signup_key_set?"text-green-600":"text-gray-400"}`),p(Lt,e(k).settings.signup_key_set?"Yes":"No"),Ne(zt,1,`text-sm font-medium ${e(k).settings.api_configured?"text-green-600":"text-gray-400"}`),p(Aa,e(k).settings.api_configured?"Yes":"No")}),o(f,$)};g(h,f=>{e(k)&&f(E)},!0)}o(L,P)};g(_,L=>{e(Ht)?L(A):L(H,!1)})}t(v),o(i,v)};g(Va,i=>{e(R)==="dashboard"&&i(xr)})}var Ja=r(Va,2);{var hr=i=>{var v=Ss(),c=a(v);{var l=f=>{var $=ws(),S=a($),B=a(S),q=a(B),x=a(q),Z=a(x,!0);t(x),Ue(2),t(q);var z=r(q,2),C=a(z);{var N=T=>{var I=ys();o(T,I)};g(C,T=>{e(pe)&&T(N)})}var V=r(C);t(z),t(B),t(S),t($),y(()=>{p(Z,e(k).organization.name),p(V,` ${e(k).stats.total_users??""} users • ${e(k).stats.active_users??""} active`)}),o(f,$)};g(c,f=>{e(k)&&f(l)})}var _=r(c,2),A=r(a(_),2);A.__click=[Xr,de,Ge,Gt,va],t(_);var H=r(_,2);{var L=f=>{var $=ks(),S=a($),B=a(S,!0);t(S),t($),y(()=>p(B,e(yt))),o(f,$)};g(H,f=>{e(yt)&&f(L)})}var P=r(H,2);{var h=f=>{var $=As();o(f,$)},E=f=>{var $=$s(),S=a($),B=r(a(S));Ke(B,21,()=>e(dt),q=>q.id,(q,x,Z,z)=>{var C=Es(),N=a(C),V=a(N),T=a(V,!0);t(V),t(N);var I=r(N),j=a(I),J=a(j,!0);t(j),t(I);var ee=r(I),Q=a(ee),X=a(Q,!0);t(Q),t(ee);var W=r(ee),w=a(W),ne=a(w,!0);t(w),t(W);var ve=r(W),ke=a(ve);ke.__click=()=>dr(e(x));var le=r(ke,2);le.__click=()=>lr(e(x));var K=a(le);{var se=oe=>{var me=Cs();o(oe,me)},Ae=oe=>{var me=zs();o(oe,me)};g(K,oe=>{e(x).enabled?oe(se):oe(Ae,!1)})}t(le),t(ve),t(C),y(()=>{p(T,e(x).name||"-"),p(J,e(x).email),Ne(Q,1,`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${e(x).role==="admin"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`),p(X,e(x).role),Ne(w,1,`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${e(x).enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`),p(ne,e(x).enabled?"Active":"Disabled"),Ne(le,1,Br(e(M)&&e(M).email===e(x).email&&e(x).enabled?"text-gray-400 cursor-not-allowed":"hover:opacity-80")),Xa(le,e(M)&&e(M).email===e(x).email&&e(x).enabled?"":"color: #2271b3;"),ht(le,"title",e(M)&&e(M).email===e(x).email&&e(x).enabled?"You cannot disable your own account":e(x).enabled?"Disable User":"Enable User"),ht(le,"aria-label",e(M)&&e(M).email===e(x).email&&e(x).enabled?"You cannot disable your own account":e(x).enabled?"Disable User":"Enable User"),le.disabled=e(M)&&e(M).email===e(x).email&&e(x).enabled}),o(q,C)}),t(B),t(S),t($),o(f,$)};g(P,f=>{e(Qt)?f(h):f(E,!1)})}t(v),o(i,v)};g(Ja,i=>{e(R)==="users"&&i(hr)})}var Ka=r(Ja,2);{var yr=i=>{var v=qs(),c=r(a(v),2),l=a(c),_=a(l),A=a(_);Pe(A),t(_);var H=r(_,2),L=r(a(H),2),P=a(L);P.value=P.__value="all";var h=r(P);h.value=h.__value="published";var E=r(h);E.value=E.__value="unpublished",t(L),t(H);var f=r(H,2);f.__click=Nt;var $=a(f,!0);t(f),t(l),t(c);var S=r(c,2);{var B=z=>{var C=Us(),N=a(C,!0);t(C),y(()=>p(N,e(fe))),o(z,C)};g(S,z=>{e(fe)&&z(B)})}var q=r(S,2);{var x=z=>{var C=Ps();o(z,C)},Z=z=>{var C=Ut(),N=Se(C);{var V=I=>{var j=Ls(),J=a(j),ee=a(J);{var Q=W=>{var w=Os(),ne=r(Se(w),2);ne.__click=[js,Oe,Te],o(W,w)},X=W=>{var w=Ms();o(W,w)};g(ee,W=>{e(Oe)||e(Te)!=="all"?W(Q):W(X,!1)})}t(J),t(j),o(I,j)},T=I=>{var j=Ts(),J=a(j),ee=r(a(J));Ke(ee,21,()=>e(Qe).filter(Q=>{const X=!e(Oe)||Q.name.toLowerCase().includes(e(Oe).toLowerCase())||Q.owner.toLowerCase().includes(e(Oe).toLowerCase())||Q.description&&Q.description.toLowerCase().includes(e(Oe).toLowerCase()),W=e(Te)==="all"||e(Te)==="published"&&Q.published||e(Te)==="unpublished"&&!Q.published;return X&&W}),tt,(Q,X)=>{var W=Ns(),w=a(W),ne=a(w,!0);t(w);var ve=r(w),ke=a(ve,!0);t(ve);var le=r(ve),K=a(le,!0);t(le);var se=r(le),Ae=a(se);{var oe=ze=>{var ct=Is();o(ze,ct)},me=ze=>{var ct=Ds();o(ze,ct)};g(Ae,ze=>{e(X).published?ze(oe):ze(me,!1)})}t(se);var Ce=r(se),it=a(Ce,!0);t(Ce);var xt=r(Ce),Ct=a(xt);Ct.__click=[Bs,ur,X],t(xt),t(W),y(ze=>{p(ne,e(X).name),p(ke,e(X).description||"—"),p(K,e(X).owner),p(it,ze)},[()=>_r(e(X).created_at)]),o(Q,W)}),t(ee),t(J),t(j),o(I,j)};g(N,I=>{e(Qe).filter(j=>{const J=!e(Oe)||j.name.toLowerCase().includes(e(Oe).toLowerCase())||j.owner.toLowerCase().includes(e(Oe).toLowerCase())||j.description&&j.description.toLowerCase().includes(e(Oe).toLowerCase()),ee=e(Te)==="all"||e(Te)==="published"&&j.published||e(Te)==="unpublished"&&!j.published;return J&&ee}).length===0?I(V):I(T,!1)})}o(z,C)};g(q,z=>{e(We)?z(x):z(Z,!1)})}t(v),y(()=>{f.disabled=e(We),p($,e(We)?"Loading...":"Refresh")}),Ye(A,()=>e(Oe),z=>s(Oe,z)),Ua(L,()=>e(Te),z=>s(Te,z)),o(i,v)};g(Ka,i=>{e(R)==="assistants"&&i(yr)})}var wr=r(Ka,2);{var kr=i=>{var v=yo(),c=a(v);{var l=h=>{var E=Rs(),f=a(E),$=a(f),S=a($),B=a(S),q=a(B,!0);t(B),Ue(2),t(S);var x=r(S,2),Z=a(x);{var z=N=>{var V=Fs();o(N,V)};g(Z,N=>{e(pe)&&N(z)})}var C=r(Z);t(x),t($),t(f),t(E),y(()=>{p(q,e(k).organization.name),p(C,` ID: ${e(k).organization.slug??""}`)}),o(h,E)};g(c,h=>{e(k)&&h(l)})}var _=r(c,4);{var A=h=>{var E=Vs(),f=a(E),$=a(f,!0);t(f),t(E),y(()=>p($,e(wt))),o(h,E)};g(_,h=>{e(wt)&&h(A)})}var H=r(_,2);{var L=h=>{var E=Js();o(h,E)},P=h=>{var E=ho(),f=Se(E),$=a(f),S=r(a($),2),B=a(S),q=a(B);Pe(q),Ue(2),t(B);var x=r(B,2);{var Z=m=>{var U=Ks(),ge=r(a(U),2);Pe(ge),Ue(2),t(U),Ye(ge,()=>e(At).signup_key,xe=>e(At).signup_key=xe),o(m,U)};g(x,m=>{e(At).signup_enabled&&m(Z)})}var z=r(x,2);z.__click=[es,Xe,pe,_e,At,Tt],t(S),t($),t(f);var C=r(f,2);{var N=m=>{var U=so(),ge=a(U),xe=r(a(ge),2);Ke(xe,21,()=>Object.entries(e(k).api_status.providers),tt,(Y,G)=>{var ye=$a(()=>Sa(e(G),2));let Ze=()=>e(ye)[0],O=()=>e(ye)[1];var Fe=ao(),Me=a(Fe),Re=a(Me),ut=a(Re,!0);t(Re);var Le=r(Re,2),pt=a(Le,!0);t(Le),t(Me);var Ve=r(Me,2);{var gt=Ie=>{var te=Zs(),F=Se(te),ce=a(F),Ee=a(ce,!0);t(ce);var $e=r(ce,2);{var be=Je=>{var et=Hs(),It=Se(et),Vt=r(a(It)),Ca=a(Vt,!0);t(Vt),Ue(),t(It);var za=r(It,2);{var St=mt=>{var bt=Ys(),Ea=a(bt);t(bt),y(()=>p(Ea,`• Default: ${O().default_model??""}`)),o(mt,bt)};g(za,mt=>{O().default_model&&mt(St)})}y(()=>p(Ca,O().enabled_models.length)),o(Je,et)},we=Je=>{var et=Qs();o(Je,et)};g($e,Je=>{O().enabled_models&&O().enabled_models.length>0?Je(be):Je(we,!1)})}t(F);var De=r(F,2);{var _t=Je=>{var et=Xs(),It=a(et),Vt=a(It);Ke(Vt,17,()=>O().models.slice(0,10),tt,(St,mt)=>{var bt=Ws(),Ea=a(bt,!0);t(bt),y(()=>p(Ea,e(mt))),o(St,bt)});var Ca=r(Vt,2);{var za=St=>{var mt=Gs(),bt=a(mt);t(mt),y(()=>p(bt,`...and ${O().models.length-10} more`)),o(St,mt)};g(Ca,St=>{O().models.length>10&&St(za)})}t(It),t(et),o(Je,et)};g(De,Je=>{O().models&&O().models.length>0&&Je(_t)})}y(()=>p(Ee,O().model_count)),o(Ie,te)},Et=Ie=>{var te=Ut(),F=Se(te);{var ce=Ee=>{var $e=eo(),be=a($e,!0);t($e),y(()=>p(be,O().error)),o(Ee,$e)};g(F,Ee=>{O().error&&Ee(ce)},!0)}o(Ie,te)};g(Ve,Ie=>{O().status==="working"?Ie(gt):Ie(Et,!1)})}var $t=r(Ve,2);{var Rt=Ie=>{var te=to(),F=a(te,!0);t(te),y(()=>p(F,O().api_base)),o(Ie,te)};g($t,Ie=>{O().api_base&&Ie(Rt)})}t(Fe),y(()=>{p(ut,Ze()),Ne(Le,1,`px-2 py-1 text-xs rounded-full ${O().status==="working"?"bg-green-100 text-green-800":O().status==="error"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`),p(pt,O().status)}),o(Y,Fe)}),t(xe);var nt=r(xe,2);{var he=Y=>{var G=ro();o(Y,G)};g(nt,Y=>{Object.keys(e(k).api_status.providers).length===0&&Y(he)})}t(ge),t(U),o(m,U)};g(C,m=>{e(k)&&e(k).api_status&&m(N)})}var V=r(C,2),T=a(V),I=r(a(T),2),j=a(I),J=r(a(j),2);Pe(J),J.__input=[oo,ie,na];var ee=r(J,2),Q=a(ee);{var X=m=>{var U=Jt("API key is currently set. Enter a new key to replace it.");o(m,U)},W=m=>{var U=Jt("Enter your OpenAI API key to enable AI features.");o(m,U)};g(Q,m=>{e(qe).openai_api_key_set?m(X):m(W,!1)})}t(ee),t(j);var w=r(j,2),ne=r(a(w),2);Pe(ne),Ue(2),t(w);var ve=r(w,2),ke=r(a(ve),2);Pe(ke),Ue(2),t(ve);var le=r(ve,2),K=r(a(le),4);{var se=m=>{var U=Ut(),ge=Se(U);Ke(ge,17,()=>Object.entries(e(qe).available_models),tt,(xe,nt)=>{var he=$a(()=>Sa(e(nt),2));let Y=()=>e(he)[0],G=()=>e(he)[1];var ye=go(),Ze=a(ye),O=a(Ze),Fe=a(O,!0);t(O);var Me=r(O,2);Me.__click=[io,or,Y,G],t(Ze);var Re=r(Ze,2),ut=a(Re),Le=a(ut,!0);t(ut);var pt=r(ut);t(Re);var Ve=r(Re,2),gt=a(Ve);{var Et=te=>{var F=lo();Ke(F,21,()=>e(ie).selected_models[Y()],tt,(ce,Ee)=>{var $e=no(),be=a($e,!0);t($e),y(()=>p(be,e(Ee))),o(ce,$e)}),t(F),o(te,F)},$t=te=>{var F=vo();o(te,F)};g(gt,te=>{var F,ce;((ce=(F=e(ie).selected_models)==null?void 0:F[Y()])==null?void 0:ce.length)>0?te(Et):te($t,!1)})}t(Ve);var Rt=r(Ve,2);{var Ie=te=>{var F=po(),ce=a(F),Ee=r(ce,2);Ee.__change=[co,na,Y];var $e=a(Ee);$e.value=$e.__value="";var be=r($e);Ke(be,17,()=>e(ie).selected_models[Y()],tt,(we,De)=>{var _t=uo(),Je=a(_t,!0);t(_t);var et={};y(()=>{p(Je,e(De)),et!==(et=e(De))&&(_t.value=(_t.__value=e(De))??"")}),o(we,_t)}),t(Ee),Ue(2),t(F),y(()=>{ht(ce,"for",`default-model-${Y()??""}`),ht(Ee,"id",`default-model-${Y()??""}`)}),Ua(Ee,()=>e(ie).default_models[Y()],we=>e(ie).default_models[Y()]=we),o(te,F)};g(Rt,te=>{var F,ce;((ce=(F=e(ie).selected_models)==null?void 0:F[Y()])==null?void 0:ce.length)>0&&te(Ie)})}t(ye),y(()=>{var te,F;p(Fe,Y()),p(Le,((F=(te=e(ie).selected_models)==null?void 0:te[Y()])==null?void 0:F.length)||0),p(pt,` of ${G().length??""} models enabled`)}),o(xe,ye)}),o(m,U)},Ae=m=>{var U=_o();o(m,U)};g(K,m=>{e(qe).available_models&&Object.keys(e(qe).available_models).length>0?m(se):m(Ae,!1)})}t(le);var oe=r(le,2);{var me=m=>{var U=bo(),ge=a(U),xe=r(a(ge),2),nt=r(a(xe),2);Ke(nt,21,()=>e(Dt),tt,(he,Y)=>{var G=mo(),ye=r(a(G));t(G),y(()=>p(ye,` ${e(Y)??""}`)),o(he,G)}),t(nt),Ue(2),t(xe),t(ge),t(U),o(m,U)};g(oe,m=>{e(Ot)&&m(me)})}var Ce=r(oe,2);Ce.__click=[ts,Xe,pe,_e,ie,ir,Tt,Bt];var it=a(Ce,!0);t(Ce),t(I),t(T),t(V);var xt=r(V,2),Ct=a(xt),ze=r(a(Ct),4);{var ct=m=>{var U=fo(),ge=a(U),xe=a(ge,!0);t(ge),t(U),y(()=>p(xe,e(kt))),o(m,U)};g(ze,m=>{e(kt)&&m(ct)})}var da=r(ze,2);{var qt=m=>{var U=xo();o(m,U)};g(da,m=>{e(pa)&&m(qt)})}var Mt=r(da,2),Lt=r(a(Mt),2);Dr(Lt),ht(Lt,"placeholder",rr);var Ft=r(Lt,2),zt=a(Ft);zt.__click=[Zr,kt,pa,Xe,aa,mr,Bt,_e,ua,na];var Aa=r(zt,2);Aa.__click=Oa,t(Ft),Ue(2),t(Mt),t(Ct),t(xt),y(()=>{ht(J,"placeholder",e(qe).openai_api_key_set?"••••••••••••••••":"Enter OpenAI API key"),Ne(Ce,1,`text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition-all duration-200 hover:opacity-90 ${e(Ot)?"ring-2 ring-green-300":""}`),Xa(Ce,`background-color: ${e(Ot)?"#16a34a":"#2271b3"};`),p(it,e(Ot)?"💾 Commit Changes":"Update API Settings"),zt.disabled=e(ra)}),Za(q,()=>e(At).signup_enabled,m=>e(At).signup_enabled=m),Ye(J,()=>e(ie).openai_api_key,m=>e(ie).openai_api_key=m),Ye(ne,()=>e(ie).openai_base_url,m=>e(ie).openai_base_url=m),Ye(ke,()=>e(ie).ollama_base_url,m=>e(ie).ollama_base_url=m),Ye(Lt,()=>e(aa),m=>s(aa,m)),o(h,E)};g(H,h=>{e(ta)?h(L):h(P,!1)})}t(v),o(i,v)};g(wr,i=>{e(R)==="settings"&&i(kr)})}t(Fa),t(qa),t(fa);var Ya=r(fa,2);{var Ar=i=>{var v=Co(),c=a(v),l=a(c),_=r(a(l),2);{var A=L=>{var P=wo();o(L,P)},H=L=>{var P=Ao(),h=a(P);{var E=w=>{var ne=ko(),ve=a(ne),ke=a(ve,!0);t(ve),t(ne),y(()=>p(ke,e(Ge))),o(w,ne)};g(h,w=>{e(Ge)&&w(E)})}var f=r(h,2),$=r(a(f),2);Pe($),t(f);var S=r(f,2),B=r(a(S),2);Pe(B),t(S);var q=r(S,2),x=r(a(q),2);Pe(x),t(q);var Z=r(q,2),z=r(a(Z),2),C=a(z);C.value=C.__value="creator";var N=r(C);N.value=N.__value="end_user",t(z),t(Z);var V=r(Z,2),T=a(V),I=a(T);Pe(I),Ue(2),t(T),t(V);var j=r(V,2),J=a(j);J.__click=Pa;var ee=r(J,2),Q=a(ee);{var X=w=>{var ne=Jt("Creating...");o(w,ne)},W=w=>{var ne=Jt("Create User");o(w,ne)};g(Q,w=>{e(Wt)?w(X):w(W,!1)})}t(ee),t(j),t(P),y(()=>ee.disabled=e(Wt)),Wa("submit",P,cr),Ye($,()=>e(de).email,w=>e(de).email=w),Ye(B,()=>e(de).name,w=>e(de).name=w),Ye(x,()=>e(de).password,w=>e(de).password=w),Ua(z,()=>e(de).user_type,w=>e(de).user_type=w),Za(I,()=>e(de).enabled,w=>e(de).enabled=w),o(L,P)};g(_,L=>{e(Gt)?L(A):L(H,!1)})}t(l),t(c),t(v),o(i,v)};g(Ya,i=>{e(va)&&i(Ar)})}var Ha=r(Ya,2);{var Cr=i=>{var v=So(),c=a(v),l=a(c),_=r(a(l),2),A=a(_);t(_);var H=r(_,2);{var L=h=>{var E=zo();o(h,E)},P=h=>{var E=$o(),f=a(E);{var $=C=>{var N=Eo(),V=a(N),T=a(V,!0);t(V),t(N),y(()=>p(T,e(ft))),o(C,N)};g(f,C=>{e(ft)&&C($)})}var S=r(f,2),B=r(a(S),2);Pe(B),Ue(2),t(S);var q=r(S,2),x=a(q);x.__click=ja;var Z=r(x,2),z=a(Z,!0);t(Z),t(q),t(E),y(()=>{Z.disabled=e(Xt),p(z,e(Xt)?"Changing...":"Change Password")}),Wa("submit",E,vr),Ye(B,()=>e(st).new_password,C=>e(st).new_password=C),o(h,E)};g(H,h=>{e(Zt)?h(L):h(P,!1)})}t(l),t(c),t(v),y(()=>p(A,`Set a new password for ${e(st).user_name??""} (${e(st).user_email??""})`)),o(i,v)};g(Ha,i=>{e(ca)&&i(Cr)})}var Qa=r(Ha,2);{var zr=i=>{var v=Io(),c=a(v),l=a(c),_=a(l),A=a(_),H=a(A);t(A);var L=r(A,2);L.__click=ba,t(_);var P=r(_,2),h=a(P),E=a(h),f=r(a(E),2),$=a(f);t(f),t(E);var S=r(E,2);Pe(S);var B=r(S,2),q=a(B);Ke(q,17,()=>e(ot).filter(K=>K.toLowerCase().includes(e(sa).toLowerCase())),tt,(K,se)=>{var Ae=Po(),oe=a(Ae);Pe(oe),oe.__change=[Uo,Pt,se];var me=r(oe,2),Ce=a(me,!0);t(me),t(Ae),y(it=>{Ga(oe,it),ht(me,"title",e(se)),p(Ce,e(se))},[()=>e(Pt).includes(e(se))]),o(K,Ae)});var x=r(q,2);{var Z=K=>{var se=jo();o(K,se)};g(x,K=>{e(ot).length===0&&K(Z)})}t(B),t(h);var z=r(h,2),C=a(z);C.__click=[Rr,ot,vt,jt];var N=r(C,2);N.__click=[Vr,ot,jt,vt];var V=r(N,2);V.__click=[Jr,vt,Pt,ot];var T=r(V,2);T.__click=[Kr,vt,ot,Pt],t(z);var I=r(z,2),j=a(I),J=r(a(j),2),ee=a(J);t(J),t(j);var Q=r(j,2);Pe(Q);var X=r(Q,2),W=a(X);Ke(W,17,()=>e(vt).filter(K=>K.toLowerCase().includes(e(oa).toLowerCase())),tt,(K,se)=>{var Ae=Mo(),oe=a(Ae);Pe(oe),oe.__change=[Oo,jt,se];var me=r(oe,2),Ce=a(me,!0);t(me),t(Ae),y(it=>{Ga(oe,it),ht(me,"title",e(se)),p(Ce,e(se))},[()=>e(jt).includes(e(se))]),o(K,Ae)});var w=r(W,2);{var ne=K=>{var se=Lo();o(K,se)};g(w,K=>{e(vt).length===0&&K(ne)})}t(X),t(I),t(P);var ve=r(P,2),ke=a(ve);ke.__click=ba;var le=r(ke,2);le.__click=[Fr,ie,_a,ot,na,ba],t(ve),t(l),t(c),t(v),y(()=>{p(H,`Manage ${e(_a)??""} Models`),p($,`(${e(ot).length??""})`),C.disabled=e(vt).length===0,N.disabled=e(jt).length===0,V.disabled=e(Pt).length===0,T.disabled=e(ot).length===0,p(ee,`(${e(vt).length??""})`)}),Ye(S,()=>e(sa),K=>s(sa,K)),Ye(Q,()=>e(oa),K=>s(oa,K)),o(i,v)};g(Qa,i=>{e(ga)&&i(zr)})}var Er=r(Qa,2);qr(Er,{get assistant(){return e(rt)},get show(){return e(lt)},set show(i){s(lt,i,!0)},$$events:{close:pr,updated:gr}}),y(()=>{var i;Ne(ya,1,`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors duration-200 ${e(R)==="dashboard"?"border-[#2271b3] text-[#2271b3]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`),Ne(wa,1,`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors duration-200 ${e(R)==="users"?"border-[#2271b3] text-[#2271b3]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`),Ne(ka,1,`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors duration-200 ${e(R)==="assistants"?"border-[#2271b3] text-[#2271b3]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`),Ne(Ba,1,`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors duration-200 ${e(R)==="settings"?"border-[#2271b3] text-[#2271b3]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`),p(br,((i=e(M))==null?void 0:i.email)||"Organization Admin")}),o(re,Ma),Lr(),at()}Sr(["click","input","change"]);export{ei as component};
