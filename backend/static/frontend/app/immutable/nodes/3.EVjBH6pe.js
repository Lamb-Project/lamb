import{d as Pt,t as p,b as v,s as i,e as Ja,f as Mt,n as lt}from"../chunks/DbBWcICI.js";import{p as Lt,j as w,k as na,A as jt,ab as Ft,w as ua,o as t,t as x,n as Dt,m as e,q as r,r as a,l as s,v as De}from"../chunks/DMsokd5p.js";import{i as y}from"../chunks/MBI0PpQy.js";import{e as ga,i as Oa}from"../chunks/D6e1hy_S.js";import{s as Te,a as Ee,r as be,b as qt,c as Bt}from"../chunks/gPkShxx4.js";import{s as Ka}from"../chunks/CG3iaoFh.js";import{b as Re,a as va}from"../chunks/CFRbuANL.js";import{b as Za}from"../chunks/BVQ_Nsm3.js";import{s as Nt,a as nt}from"../chunks/BsHaMxS4.js";import{p as Rt}from"../chunks/3ElTuAwM.js";import{g as $a,b as Sa}from"../chunks/DlJa0Cru.js";import{$ as It}from"../chunks/B9q8dB_t.js";import{a as L}from"../chunks/t--hEgTQ.js";import{g as qe}from"../chunks/BWNE5xtz.js";import{u as it}from"../chunks/CmzVOFLo.js";function Tt(Be,de){r(de,"dashboard"),$a(`${Sa}/admin`,{replaceState:!0})}function Vt(Be,de,ge){r(de,"users"),$a(`${Sa}/admin?view=users`,{replaceState:!0}),ge()}function Gt(Be,de,ge){r(de,"organizations"),$a(`${Sa}/admin?view=organizations`,{replaceState:!0}),ge()}function Yt(Be,de,ge,Ve,Ge,l){r(de,{email:"",name:"",password:"",role:"user",organization_id:null},!0),r(ge,null),r(Ve,!1),r(Ge,!0),l()}function Ht(Be,de,ge,Ve,Ge,l){r(de,{slug:"",name:"",admin_user_id:null,signup_enabled:!1,signup_key:"",use_system_baseline:!0,config:{version:"1.0",setups:{default:{name:"Default Setup",providers:{},knowledge_base:{}}},features:{rag_enabled:!0,mcp_enabled:!0,lti_publishing:!0,signup_enabled:!1},limits:{usage:{tokens_per_month:1e6,max_assistants:100,max_assistants_per_user:10,storage_gb:10}}}},!0),r(ge,null),r(Ve,!1),r(Ge,!0),l()}async function Jt(Be,de,ge){var Ve,Ge;try{const l=de();if(!l)throw new Error("Authentication token not found. Please log in again.");const K=qe("/admin/organizations/system/sync");console.log(`Syncing system organization at: ${K}`);const ke=await L.post(K,{},{headers:{Authorization:`Bearer ${l}`}});console.log("Sync system organization response:",ke.data),ge(),alert("System organization synced successfully!")}catch(l){console.error("Error syncing system organization:",l);let K="Failed to sync system organization.";L.isAxiosError(l)&&((Ge=(Ve=l.response)==null?void 0:Ve.data)!=null&&Ge.detail)?K=l.response.data.detail:l instanceof Error&&(K=l.message),alert(`Error: ${K}`)}}var Kt=p('<div><h1 class="text-2xl font-semibold text-gray-800 mb-6"> </h1> <p class="text-gray-600"> </p></div>'),Zt=p('<p class="text-center text-gray-500 py-4"> </p>'),Wt=p('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-6" role="alert"><strong class="font-bold"> </strong> <span class="block sm:inline"> </span></div> <div class="text-center"><button class="bg-brand text-white py-2 px-4 rounded hover:bg-brand-hover focus:outline-none focus:ring-2 focus:ring-brand focus:ring-opacity-50" style="background-color: #2271b3; color: white;"> </button></div>',1),Qt=p('<p class="text-center text-gray-500 py-4"> </p>'),Xt=p('<span class="ml-2 px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">System</span>'),er=p('<div class="text-xs text-gray-500"> </div>'),ar=p('<div class="flex items-center"><span class="text-sm font-medium text-gray-900"> </span> <!></div> <!>',1),tr=p('<span class="text-gray-400">No Organization</span>'),rr=lt('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"></path></svg>'),sr=lt('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>'),or=p('<tr class="hover:bg-gray-50"><td class="px-6 py-4 whitespace-nowrap align-top"><div class="text-sm font-medium text-gray-900"> </div></td><td class="px-6 py-4 whitespace-nowrap align-top"><div class="text-sm text-gray-800"> </div></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 hidden md:table-cell"><span> </span></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 hidden lg:table-cell"><!></td><td class="px-6 py-4 whitespace-nowrap text-sm hidden md:table-cell"><span> </span></td><td class="px-6 py-4 whitespace-nowrap text-sm font-medium"><button class="text-amber-600 hover:text-amber-800 mr-3"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25-2.25v6.75a2.25 2.25 0 002.25 2.25z"></path></svg></button> <button><!></button></td></tr>'),nr=p('<div class="overflow-x-auto shadow-md sm:rounded-lg mb-6 border border-gray-200"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-brand uppercase tracking-wider" style="color: #2271b3;"> </th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-brand uppercase tracking-wider" style="color: #2271b3;"> </th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-brand uppercase tracking-wider hidden md:table-cell" style="color: #2271b3;"> </th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-brand uppercase tracking-wider hidden lg:table-cell" style="color: #2271b3;">Organization</th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-brand uppercase tracking-wider hidden md:table-cell" style="color: #2271b3;">Status</th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-brand uppercase tracking-wider"> </th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table></div>'),ir=p('<div class="flex justify-between items-center mb-6"><h1 class="text-2xl font-semibold text-gray-800"> </h1> <button class="bg-brand text-white py-2 px-4 rounded hover:bg-brand-hover focus:outline-none focus:ring-2 focus:ring-brand focus:ring-opacity-50" style="background-color: #2271b3; color: white;"> </button></div> <!>',1),lr=p('<p class="text-center text-gray-500 py-4"> </p>'),dr=p('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-6" role="alert"><strong class="font-bold"> </strong> <span class="block sm:inline"> </span></div> <div class="text-center"><button class="bg-brand text-white py-2 px-4 rounded hover:bg-brand-hover focus:outline-none focus:ring-2 focus:ring-brand focus:ring-opacity-50" style="background-color: #2271b3; color: white;"> </button></div>',1),cr=p('<p class="text-center text-gray-500 py-4"> </p>'),ur=(Be,de,ge)=>de(e(ge)),gr=(Be,de,ge)=>de(e(ge)),vr=(Be,de,ge)=>de(e(ge).slug),pr=p('<button class="text-red-600 hover:text-red-800"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"></path></svg></button>'),fr=p('<tr class="hover:bg-gray-50"><td class="px-6 py-4 whitespace-nowrap align-top"><div class="text-sm font-medium text-gray-900"> </div></td><td class="px-6 py-4 whitespace-nowrap align-top"><div class="text-sm text-gray-800 font-mono"> </div></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 hidden md:table-cell"><span> </span></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 hidden lg:table-cell"><span> </span></td><td class="px-6 py-4 whitespace-nowrap text-sm font-medium"><div class="flex space-x-2"><button class="text-green-600 hover:text-green-800" title="Administer Organization" aria-label="Administer Organization"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg></button> <button class="text-blue-600 hover:text-blue-800"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg></button> <!></div></td></tr>'),mr=p('<div class="overflow-x-auto shadow-md sm:rounded-lg mb-6 border border-gray-200"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-brand uppercase tracking-wider" style="color: #2271b3;"> </th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-brand uppercase tracking-wider" style="color: #2271b3;"> </th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-brand uppercase tracking-wider hidden md:table-cell" style="color: #2271b3;"> </th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-brand uppercase tracking-wider hidden lg:table-cell" style="color: #2271b3;"> </th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-brand uppercase tracking-wider"> </th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table></div>'),br=p('<div class="flex justify-between items-center mb-6"><h1 class="text-2xl font-semibold text-gray-800"> </h1> <div class="flex space-x-2"><button class="bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-600 focus:ring-opacity-50" aria-label="Sync System Organization">Sync System</button> <button class="bg-brand text-white py-2 px-4 rounded hover:bg-brand-hover focus:outline-none focus:ring-2 focus:ring-brand focus:ring-opacity-50" style="background-color: #2271b3; color: white;"> </button></div></div> <!>',1),_r=p('<div class="mt-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline"> </span></div>'),xr=p('<div class="mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline"> </span></div>'),hr=p('<form class="mt-4"><!> <div class="mb-4 text-left"><label for="email" class="block text-gray-700 text-sm font-bold mb-2"> </label> <input type="email" id="email" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-500 bg-gray-100 leading-tight" disabled readonly=""></div> <div class="mb-6 text-left"><label for="new_password" class="block text-gray-700 text-sm font-bold mb-2"> </label> <input type="password" id="new_password" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required autocomplete="new-password" minlength="8"> <p class="text-gray-500 text-xs italic mt-1"> </p></div> <div class="flex items-center justify-between"><button type="button" class="bg-gray-300 hover:bg-gray-400 text-gray-800 py-2 px-4 rounded focus:outline-none focus:shadow-outline"> </button> <button type="submit" class="bg-brand text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline disabled:opacity-50" style="background-color: #2271b3; color: white;"> </button></div></form>'),yr=p('<div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center"><div class="relative mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white"><div class="mt-3 text-center"><h3 class="text-lg leading-6 font-medium text-gray-900"> </h3> <p class="text-sm text-gray-500 mt-1"> </p> <!></div></div></div>'),wr=p('<div class="mt-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline"> </span></div>'),kr=p('<div class="mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline"> </span></div>'),zr=p('<div class="text-gray-500 text-sm">Loading organizations...</div>'),Ar=p('<div class="text-red-500 text-sm"> </div>'),Er=p("<option> <!></option>"),Ur=p('<select id="organization" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"><option>Select an organization (optional)</option><!></select>'),Cr=p('<form class="mt-4"><!> <div class="mb-4 text-left"><label for="email" class="block text-gray-700 text-sm font-bold mb-2"> </label> <input type="email" id="email" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required></div> <div class="mb-4 text-left"><label for="name" class="block text-gray-700 text-sm font-bold mb-2"> </label> <input type="text" id="name" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required></div> <div class="mb-4 text-left"><label for="password" class="block text-gray-700 text-sm font-bold mb-2"> </label> <input type="password" id="password" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required></div> <div class="mb-4 text-left"><label for="role" class="block text-gray-700 text-sm font-bold mb-2"> </label> <select id="role" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"><option> </option><option> </option></select></div> <div class="mb-6 text-left"><label for="organization" class="block text-gray-700 text-sm font-bold mb-2">Organization</label> <!> <p class="text-gray-500 text-xs italic mt-1">If no organization is selected, the user will be assigned to the system organization by default.</p></div> <div class="flex items-center justify-between"><button type="button" class="bg-gray-300 hover:bg-gray-400 text-gray-800 py-2 px-4 rounded focus:outline-none focus:shadow-outline"> </button> <button type="submit" class="bg-brand text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline disabled:opacity-50" style="background-color: #2271b3; color: white;"> </button></div></form>'),Or=p('<div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center"><div class="relative mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white"><div class="mt-3 text-center"><h3 class="text-lg leading-6 font-medium text-gray-900"> </h3> <!></div></div></div>'),$r=p('<div class="mt-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline"> </span></div>'),Sr=p('<div class="mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline"> </span></div>'),Pr=p('<div class="text-gray-500 text-sm">Loading system users...</div>'),Mr=p('<div class="text-red-500 text-sm"> </div>'),Lr=p("<option> </option>"),jr=p('<select id="admin_user" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required><option>Select a user from system organization...</option><!></select>'),Fr=p('<div><label for="signup_key" class="block text-gray-600 text-sm mb-1">Signup Key *</label> <input type="text" id="signup_key" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" pattern="[a-zA-Z0-9_-]+" title="Only letters, numbers, hyphens, and underscores allowed" minlength="8" maxlength="64"> <p class="text-gray-500 text-xs italic mt-1">Unique key for users to signup to this organization (8-64 characters)</p></div>'),Dr=p('<form class="mt-4"><!> <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"><div class="text-left"><label for="org_slug" class="block text-gray-700 text-sm font-bold mb-2"> </label> <input type="text" id="org_slug" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required pattern="[a-z0-9-]+" title="Only lowercase letters, numbers, and hyphens allowed"> <p class="text-gray-500 text-xs italic mt-1">URL-friendly identifier (lowercase, numbers, hyphens only)</p></div> <div class="text-left"><label for="org_name" class="block text-gray-700 text-sm font-bold mb-2"> </label> <input type="text" id="org_name" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required></div></div> <div class="mb-4 text-left"><label for="admin_user" class="block text-gray-700 text-sm font-bold mb-2">Organization Admin *</label> <!> <p class="text-gray-500 text-xs italic mt-1">Select a user from the system organization to become admin of this organization. <strong>Note:</strong> System admins are not eligible as they must remain in the system organization.</p></div> <div class="mb-4 text-left"><label for="signup_config_section" class="block text-gray-700 text-sm font-bold mb-2">Signup Configuration</label> <div id="signup_config_section" class="mb-3"><label class="flex items-center"><input type="checkbox" class="mr-2"> <span class="text-sm">Enable organization-specific signup</span></label></div> <!></div> <div class="mb-4 text-left"><label class="flex items-center"><input type="checkbox" class="mr-2"> <span class="text-sm">Copy system organization configuration as baseline</span></label> <p class="text-gray-500 text-xs italic mt-1">Inherit providers and settings from the system organization</p></div> <div class="mb-4 text-left"><label for="org_features" class="block text-gray-700 text-sm font-bold mb-2"> </label> <div class="grid grid-cols-2 gap-2"><label class="flex items-center"><input type="checkbox" class="mr-2"> <span class="text-sm">RAG Enabled</span></label> <label class="flex items-center"><input type="checkbox" class="mr-2"> <span class="text-sm">MCP Enabled</span></label> <label class="flex items-center"><input type="checkbox" class="mr-2"> <span class="text-sm">LTI Publishing</span></label> <label class="flex items-center"><input type="checkbox" class="mr-2"> <span class="text-sm">Signup Enabled</span></label></div></div> <div class="mb-4 text-left"><label for="org_limits" class="block text-gray-700 text-sm font-bold mb-2"> </label> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div><label for="tokens_per_month" class="block text-gray-600 text-xs mb-1">Tokens/Month</label> <input type="number" id="tokens_per_month" class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 text-sm leading-tight focus:outline-none focus:shadow-outline" min="0"></div> <div><label for="max_assistants" class="block text-gray-600 text-xs mb-1">Max Assistants</label> <input type="number" id="max_assistants" class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 text-sm leading-tight focus:outline-none focus:shadow-outline" min="1"></div> <div><label for="storage_gb" class="block text-gray-600 text-xs mb-1">Storage (GB)</label> <input type="number" id="storage_gb" class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 text-sm leading-tight focus:outline-none focus:shadow-outline" min="0" step="0.1"></div></div></div> <div class="flex items-center justify-between"><button type="button" class="bg-gray-300 hover:bg-gray-400 text-gray-800 py-2 px-4 rounded focus:outline-none focus:shadow-outline"> </button> <button type="submit" class="bg-brand text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline disabled:opacity-50" style="background-color: #2271b3; color: white;"> </button></div></form>'),qr=p('<div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center"><div class="relative mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white"><div class="mt-3"><h3 class="text-lg leading-6 font-medium text-gray-900 text-center"> </h3> <!></div></div></div>'),Br=p('<div class="text-center py-8"><p class="text-gray-500">Loading configuration...</p></div>'),Nr=p('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><strong class="font-bold">Error:</strong> <span class="block sm:inline"> </span></div>'),Rr=p('<div class="text-xs"><strong>Providers:</strong> </div>'),Ir=p('<div class="bg-white p-3 rounded border"><h5 class="font-medium text-sm text-gray-800"> </h5> <p class="text-xs text-gray-600 mb-1"> </p> <!></div>'),Tr=p('<div class="mt-6"><h4 class="text-sm font-medium text-gray-700 mb-2">Setups Summary:</h4> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"></div></div>'),Vr=p('<div class="flex items-center text-xs"><span></span> <span class="capitalize"> </span></div>'),Gr=p('<div class="mt-4"><h4 class="text-sm font-medium text-gray-700 mb-2">Features:</h4> <div class="grid grid-cols-2 md:grid-cols-4 gap-2"></div></div>'),Yr=p('<div class="mt-4"><h4 class="text-sm font-medium text-gray-700 mb-2">Usage Limits:</h4> <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-xs"><div><strong>Tokens/Month:</strong> </div> <div><strong>Max Assistants:</strong> </div> <div><strong>Storage:</strong> </div></div></div>'),Hr=p('<div class="bg-gray-50 rounded-lg p-4"><h4 class="text-sm font-medium text-gray-700 mb-2">Configuration JSON:</h4> <pre class="bg-white p-4 rounded border text-xs overflow-x-auto"><code> </code></pre> <!> <!> <!></div>'),Jr=p('<div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center"><div class="relative mx-auto p-5 border w-full max-w-4xl shadow-lg rounded-md bg-white max-h-[90vh] overflow-y-auto"><div class="mt-3"><div class="flex justify-between items-center mb-4"><h3 class="text-lg leading-6 font-medium text-gray-900"> </h3> <button class="text-gray-400 hover:text-gray-600" aria-label="Close"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <!> <div class="mt-6 text-center"><button class="bg-gray-300 hover:bg-gray-400 text-gray-800 py-2 px-4 rounded focus:outline-none focus:shadow-outline">Close</button></div></div></div></div>'),Kr=p('<div class="container mx-auto px-4 py-8"><div class="border-b border-gray-200 mb-6"><ul class="flex flex-wrap -mb-px"><li class="mr-2"><button> </button></li> <li class="mr-2"><button> </button></li> <li class="mr-2"><button> </button></li></ul></div> <!></div> <!> <!> <!> <!>',1);function us(Be,de){Lt(de,!0);const[ge,Ve]=Nt(),Ge=()=>nt(it,"$user",ge),l=()=>nt(It,"$_",ge);let K=w("users"),ke=w(null),Ie=w(na([])),ba=w(!1),We=w(null),Pa=w(!1),oe=w(na({email:"",name:"",password:"",role:"user",organization_id:null})),_a=w(!1),Ue=w(null),Ma=w(!1),xa=w(na([])),ha=w(!1),Qe=w(null),ya=w(!1),Ye=w(na({email:"",new_password:""})),wa=w(!1),Ce=w(null),La=w(!1),ja=w(""),pa=w(na([])),ka=w(!1),Xe=w(null),za=w(!1),f=w(na({slug:"",name:"",admin_user_id:null,signup_enabled:!1,signup_key:"",use_system_baseline:!0,config:{version:"1.0",setups:{default:{name:"Default Setup",providers:{},knowledge_base:{}}},features:{rag_enabled:!0,mcp_enabled:!0,lti_publishing:!0,signup_enabled:!1},limits:{usage:{tokens_per_month:1e6,max_assistants:100,max_assistants_per_user:10,storage_gb:10}}}})),Aa=w(!1),ze=w(null),Fa=w(!1),Ea=w(na([])),Ua=w(!1),ea=w(null),Ca=w(!1),fa=w(null),_e=w(null),Da=w(!1),He=w(null),qa=null,Ba=null;function Wa(){r(Pa,!1),r(Ue,null)}function dt(d,c){r(Ye,{email:d,new_password:""},!0),r(ja,c,!0),r(Ce,null),r(La,!1),r(ya,!0)}function Na(){r(ya,!1),r(Ce,null),r(ja,"")}async function ct(d){var o,u;const c=!d.enabled,g=c?"enable":"disable";if(e(ke)&&e(ke).email===d.email&&!c){alert("You cannot disable your own account. Please ask another administrator to disable your account if needed.");return}if(confirm(`Are you sure you want to ${g} ${d.name} (${d.email})?`))try{const n=Me();if(!n)throw new Error("Authentication token not found. Please log in again.");const b=qe(`/admin/users/${d.id}/status`);console.log(`${g==="enable"?"Enabling":"Disabling"} user ${d.email} at: ${b}`);const U=await L.put(b,{enabled:c},{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});console.log(`User ${g} response:`,U.data);const j=e(Ie).findIndex(z=>z.id===d.id);j!==-1&&(e(Ie)[j].enabled=c,r(Ie,[...e(Ie)],!0)),alert(`User ${d.name} has been ${c?"enabled":"disabled"} successfully.`)}catch(n){console.error(`Error ${g}ing user:`,n);let b=`Failed to ${g} user.`;L.isAxiosError(n)&&((u=(o=n.response)==null?void 0:o.data)!=null&&u.detail)?b=n.response.data.detail:n instanceof Error&&(b=n.message),alert(`Error: ${b}`)}}function Ra(){r(za,!1),r(ze,null)}function ut(d){r(fa,d,!0),r(_e,null),r(He,null),r(Ca,!0),_t(d.slug)}function Ia(){r(Ca,!1),r(fa,null),r(_e,null),r(He,null)}function gt(d){$a(`${Sa}/org-admin?org=${d.slug}`)}async function vt(d){var c,g,o,u;if(d.preventDefault(),!e(oe).email||!e(oe).name||!e(oe).password){r(Ue,"Please fill in all required fields.");return}if(!e(oe).email.includes("@")){r(Ue,"Please enter a valid email address.");return}r(Ue,null),r(_a,!0);try{const n=Me();if(!n)throw new Error("Authentication token not found. Please log in again.");const b=new URLSearchParams;b.append("email",e(oe).email),b.append("name",e(oe).name),b.append("password",e(oe).password),b.append("role",e(oe).role),e(oe).organization_id&&b.append("organization_id",String(e(oe).organization_id));const U=qe("/admin/users/create");console.log(`Creating user at: ${U}`);const j=await L.post(U,b,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/x-www-form-urlencoded"}});if(console.log("Create user response:",j.data),j.data&&j.data.success)r(Ma,!0),setTimeout(()=>{Wa(),ma()},1500);else throw new Error(j.data.error||"Failed to create user.")}catch(n){if(console.error("Error creating user:",n),L.isAxiosError(n)&&((g=(c=n.response)==null?void 0:c.data)!=null&&g.error))r(Ue,n.response.data.error,!0);else if(L.isAxiosError(n)&&((u=(o=n.response)==null?void 0:o.data)!=null&&u.detail))if(Array.isArray(n.response.data.detail)){const b=n.response.data.detail;r(Ue,b.map(U=>U.msg).join(", "),!0)}else r(Ue,n.response.data.detail,!0);else n instanceof Error?r(Ue,n.message,!0):r(Ue,"An unknown error occurred while creating the user.")}finally{r(_a,!1)}}async function pt(d){var c,g,o,u;if(d.preventDefault(),!e(Ye).new_password){r(Ce,"Please enter a new password.");return}if(e(Ye).new_password.length<8){r(Ce,"Password should be at least 8 characters.");return}r(Ce,null),r(wa,!0);try{const n=Me();if(!n)throw new Error("Authentication token not found. Please log in again.");const b=new URLSearchParams;b.append("email",e(Ye).email),b.append("new_password",e(Ye).new_password);const U=qe("/admin/users/update-password");console.log(`Changing password at: ${U}`);const j=await L.post(U,b,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/x-www-form-urlencoded"}});if(console.log("Change password response:",j.data),j.data&&j.data.success)r(La,!0),setTimeout(()=>{Na()},1500);else throw new Error(j.data.error||j.data.message||"Failed to change password.")}catch(n){if(console.error("Error changing password:",n),L.isAxiosError(n)&&((g=(c=n.response)==null?void 0:c.data)!=null&&g.error))r(Ce,n.response.data.error,!0);else if(L.isAxiosError(n)&&((u=(o=n.response)==null?void 0:o.data)!=null&&u.detail))if(Array.isArray(n.response.data.detail)){const b=n.response.data.detail;r(Ce,b.map(U=>U.msg).join(", "),!0)}else r(Ce,n.response.data.detail,!0);else n instanceof Error?r(Ce,n.message,!0):r(Ce,"An unknown error occurred while changing the password.")}finally{r(wa,!1)}}async function ft(d){var c,g;if(d.preventDefault(),!e(f).slug||!e(f).name){r(ze,"Please fill in all required fields.");return}if(!e(f).admin_user_id){r(ze,"Please select an admin user for the organization.");return}if(!/^[a-z0-9-]+$/.test(e(f).slug)){r(ze,"Slug must contain only lowercase letters, numbers, and hyphens.");return}if(e(f).signup_enabled&&(!e(f).signup_key||e(f).signup_key.trim().length<8)){r(ze,"Signup key must be at least 8 characters long when signup is enabled.");return}if(e(f).signup_key&&!/^[a-zA-Z0-9_-]+$/.test(e(f).signup_key)){r(ze,"Signup key can only contain letters, numbers, hyphens, and underscores.");return}r(ze,null),r(Aa,!0);try{const o=Me();if(!o)throw new Error("Authentication token not found. Please log in again.");const u=qe("/admin/organizations/enhanced");console.log(`Creating organization with admin assignment at: ${u}`);const n={slug:e(f).slug,name:e(f).name,admin_user_id:parseInt(e(f).admin_user_id),signup_enabled:e(f).signup_enabled,signup_key:e(f).signup_enabled?e(f).signup_key.trim():null,use_system_baseline:e(f).use_system_baseline};console.log("Organization creation payload:",n);const b=await L.post(u,n,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}});if(console.log("Create organization response:",b.data),b.data)r(Fa,!0),setTimeout(()=>{Ra(),aa()},1500);else throw new Error("Failed to create organization.")}catch(o){console.error("Error creating organization:",o),L.isAxiosError(o)&&((g=(c=o.response)==null?void 0:c.data)!=null&&g.detail)?r(ze,o.response.data.detail,!0):o instanceof Error?r(ze,o.message,!0):r(ze,"An unknown error occurred while creating the organization.")}finally{r(Aa,!1)}}function Qa(d){d.key==="Escape"&&(e(za)?Ra():e(Ca)?Ia():e(ya)&&Na())}jt(()=>{console.log("Admin page mounted"),document.addEventListener("keydown",Qa),Ba=it.subscribe(d=>{var c;if(r(ke,d,!0),d.isLoggedIn){console.log("User is logged in:",d.email);const g=(c=d.data)==null?void 0:c.role;g==="admin"?console.log("User has admin role, can access admin features"):console.warn("User doesn't have admin role:",g)}else console.warn("User not logged in, redirecting...")}),qa=Rt.subscribe(d=>{console.log("Admin page store updated:",d.url.searchParams.toString());const c=d.url.searchParams.get("view");c==="users"?(console.log("URL indicates 'users' view."),r(K,"users"),ma()):c==="organizations"?(console.log("URL indicates 'organizations' view."),r(K,"organizations"),aa()):(console.log("URL indicates 'dashboard' view."),r(K,"dashboard"))}),e(K)==="users"?ma():e(K)==="organizations"&&aa()}),Ft(()=>{console.log("Admin page unmounting"),document.removeEventListener("keydown",Qa),qa&&qa(),Ba&&Ba()});function Me(){const d=Ge();return!d.isLoggedIn||!d.token?(console.error("No authentication token available. User must be logged in."),null):d.token}async function ma(){var d,c,g;if(e(ba)){console.log("Already loading users, skipping duplicate request");return}console.log("Fetching users..."),r(ba,!0),r(We,null);try{const o=Me();if(!o)throw new Error("Authentication token not found. Please log in again.");const u=qe("/users");console.log(`Fetching users from: ${u}`);const n=await L.get(u,{headers:{Authorization:`Bearer ${o}`}});if(console.log("API Response:",n.data),n.data&&n.data.success)r(Ie,n.data.data||[],!0),console.log(`Fetched ${e(Ie).length} users`);else throw new Error(n.data.error||"Failed to fetch users.")}catch(o){console.error("Error fetching users:",o),L.isAxiosError(o)&&((d=o.response)==null?void 0:d.status)===401?r(We,"Access denied. Admin privileges required."):L.isAxiosError(o)&&((g=(c=o.response)==null?void 0:c.data)!=null&&g.error)?r(We,o.response.data.error,!0):o instanceof Error?r(We,o.message,!0):r(We,"An unknown error occurred while fetching users."),r(Ie,[],!0)}finally{r(ba,!1)}}async function aa(){var d,c,g;if(e(ka)){console.log("Already loading organizations, skipping duplicate request");return}console.log("Fetching organizations..."),r(ka,!0),r(Xe,null);try{const o=Me();if(!o)throw new Error("Authentication token not found. Please log in again.");const u=qe("/admin/organizations");console.log(`Fetching organizations from: ${u}`);const n=await L.get(u,{headers:{Authorization:`Bearer ${o}`}});if(console.log("Organizations API Response:",n.data),n.data&&Array.isArray(n.data))r(pa,n.data,!0),console.log(`Fetched ${e(pa).length} organizations`);else throw new Error("Invalid response format.")}catch(o){console.error("Error fetching organizations:",o),L.isAxiosError(o)&&((d=o.response)==null?void 0:d.status)===401?r(Xe,"Access denied. Admin privileges required."):L.isAxiosError(o)&&((g=(c=o.response)==null?void 0:c.data)!=null&&g.detail)?r(Xe,o.response.data.detail,!0):o instanceof Error?r(Xe,o.message,!0):r(Xe,"An unknown error occurred while fetching organizations."),r(pa,[],!0)}finally{r(ka,!1)}}async function mt(){var d,c,g;if(e(Ua)){console.log("Already loading system users, skipping duplicate request");return}console.log("Fetching system organization users..."),r(Ua,!0),r(ea,null);try{const o=Me();if(!o)throw new Error("Authentication token not found. Please log in again.");const u=qe("/admin/organizations/system/users");console.log(`Fetching system users from: ${u}`);const n=await L.get(u,{headers:{Authorization:`Bearer ${o}`}});if(console.log("System Users API Response:",n.data),n.data&&Array.isArray(n.data))r(Ea,n.data,!0),console.log(`Fetched ${e(Ea).length} system org users`);else throw new Error("Invalid response format.")}catch(o){console.error("Error fetching system org users:",o),L.isAxiosError(o)&&((d=o.response)==null?void 0:d.status)===401?r(ea,"Access denied. Admin privileges required."):L.isAxiosError(o)&&((g=(c=o.response)==null?void 0:c.data)!=null&&g.detail)?r(ea,o.response.data.detail,!0):o instanceof Error?r(ea,o.message,!0):r(ea,"An unknown error occurred while fetching system users."),r(Ea,[],!0)}finally{r(Ua,!1)}}async function bt(){var d,c,g;if(e(ha)){console.log("Already loading organizations for users, skipping duplicate request");return}console.log("Fetching organizations for user creation..."),r(ha,!0),r(Qe,null);try{const o=Me();if(!o)throw new Error("Authentication token not found. Please log in again.");const u=qe("/admin/organizations/list");console.log(`Fetching organizations for users from: ${u}`);const n=await L.get(u,{headers:{Authorization:`Bearer ${o}`}});if(console.log("Organizations for Users API Response:",n.data),n.data&&n.data.success&&Array.isArray(n.data.data))r(xa,n.data.data,!0),console.log(`Fetched ${e(xa).length} organizations for user assignment`);else throw new Error("Invalid response format.")}catch(o){console.error("Error fetching organizations for users:",o),L.isAxiosError(o)&&((d=o.response)==null?void 0:d.status)===401?r(Qe,"Access denied. Admin privileges required."):L.isAxiosError(o)&&((g=(c=o.response)==null?void 0:c.data)!=null&&g.detail)?r(Qe,o.response.data.detail,!0):o instanceof Error?r(Qe,o.message,!0):r(Qe,"An unknown error occurred while fetching organizations."),r(xa,[],!0)}finally{r(ha,!1)}}async function _t(d){var c,g;if(d){r(Da,!0),r(He,null);try{const o=Me();if(!o)throw new Error("Authentication token not found. Please log in again.");const u=qe(`/admin/organizations/${d}/config`);console.log(`Fetching organization config from: ${u}`);const n=await L.get(u,{headers:{Authorization:`Bearer ${o}`}});console.log("Organization config response:",n.data),r(_e,n.data,!0)}catch(o){console.error("Error fetching organization config:",o),L.isAxiosError(o)&&((g=(c=o.response)==null?void 0:c.data)!=null&&g.detail)?r(He,o.response.data.detail,!0):o instanceof Error?r(He,o.message,!0):r(He,"An unknown error occurred while fetching configuration.")}finally{r(Da,!1)}}}async function xt(d){var c,g;if(confirm(`Are you sure you want to delete organization '${d}'? This action cannot be undone.`))try{const o=Me();if(!o)throw new Error("Authentication token not found. Please log in again.");const u=qe(`/admin/organizations/${d}`);console.log(`Deleting organization at: ${u}`);const n=await L.delete(u,{headers:{Authorization:`Bearer ${o}`}});console.log("Delete organization response:",n.data),aa(),alert(`Organization '${d}' deleted successfully!`)}catch(o){console.error("Error deleting organization:",o);let u="Failed to delete organization.";L.isAxiosError(o)&&((g=(c=o.response)==null?void 0:c.data)!=null&&g.detail)?u=o.response.data.detail:o instanceof Error&&(u=o.message),alert(`Error: ${u}`)}}var Xa=Kr(),Ta=ua(Xa),Va=t(Ta),et=t(Va),Ga=t(et),ia=t(Ga);ia.__click=[Tt,K];var ht=t(ia,!0);a(ia),a(Ga);var Ya=s(Ga,2),la=t(Ya);la.__click=[Vt,K,ma];var yt=t(la,!0);a(la),a(Ya);var at=s(Ya,2),da=t(at);da.__click=[Gt,K,aa];var wt=t(da,!0);a(da),a(at),a(et),a(Va);var kt=s(Va,2);{var zt=d=>{var c=Kt(),g=t(c),o=t(g,!0);a(g);var u=s(g,2),n=t(u,!0);a(u),a(c),x((b,U)=>{i(o,b),i(n,U)},[()=>l()("admin.dashboard.title",{default:"Admin Dashboard"}),()=>l()("admin.dashboard.welcome",{default:"Welcome to the administration area. Use the tabs above to navigate."})]),v(d,c)},At=(d,c)=>{{var g=u=>{var n=ir(),b=ua(n),U=t(b),j=t(U,!0);a(U);var z=s(U,2);z.__click=[Yt,oe,Ue,Ma,Pa,bt];var F=t(z,!0);a(z),a(b);var D=s(b,2);{var V=O=>{var X=Zt(),ve=t(X,!0);a(X),x(ne=>i(ve,ne),[()=>l()("admin.users.loading",{default:"Loading users..."})]),v(O,X)},C=(O,X)=>{{var ve=Z=>{var $=Wt(),S=ua($),W=t(S),P=t(W,!0);a(W);var q=s(W,2),le=t(q,!0);a(q),a(S);var I=s(S,2),B=t(I);B.__click=ma;var G=t(B,!0);a(B),a(I),x((N,Y)=>{i(P,N),i(le,e(We)),i(G,Y)},[()=>l()("admin.users.errorTitle",{default:"Error:"}),()=>l()("admin.users.retry",{default:"Retry"})]),v(Z,$)},ne=(Z,$)=>{{var S=P=>{var q=Qt(),le=t(q,!0);a(q),x(I=>i(le,I),[()=>l()("admin.users.noUsers",{default:"No users found."})]),v(P,q)},W=P=>{var q=nr(),le=t(q),I=t(le),B=t(I),G=t(B),N=t(G,!0);a(G);var Y=s(G),Q=t(Y,!0);a(Y);var h=s(Y),E=t(h,!0);a(h);var T=s(h,3),se=t(T,!0);a(T),a(B),a(I);var pe=s(I);ga(pe,21,()=>e(Ie),ee=>ee.id,(ee,m,H,ce)=>{var ae=or(),me=t(ae),k=t(me),te=t(k,!0);a(k),a(me);var M=s(me),ie=t(M),re=t(ie,!0);a(ie),a(M);var J=s(M),ue=t(J),Le=t(ue,!0);a(ue),a(J);var Ae=s(J),Oe=t(Ae);{var xe=A=>{var R=ar(),fe=ua(R),ye=t(fe),we=t(ye,!0);a(ye);var ta=s(ye,2);{var Ha=Ze=>{var ca=Xt();v(Ze,ca)};y(ta,Ze=>{e(m).organization.is_system&&Ze(Ha)})}a(fe);var ra=s(fe,2);{var sa=Ze=>{var ca=er(),oa=t(ca,!0);a(ca),x(()=>i(oa,e(m).organization_role)),v(Ze,ca)};y(ra,Ze=>{e(m).organization_role&&e(m).organization_role!=="member"&&Ze(sa)})}x(()=>i(we,e(m).organization.name||"-")),v(A,R)},$e=A=>{var R=tr();v(A,R)};y(Oe,A=>{e(m).organization?A(xe):A($e,!1)})}a(Ae);var je=s(Ae),Se=t(je),Ne=t(Se,!0);a(Se),a(je);var Fe=s(je),he=t(Fe);he.__click=()=>dt(e(m).email,e(m).name);var Pe=s(he,2);Pe.__click=()=>ct(e(m));var Je=t(Pe);{var Ke=A=>{var R=rr();v(A,R)},_=A=>{var R=sr();v(A,R)};y(Je,A=>{e(m).enabled?A(Ke):A(_,!1)})}a(Pe),a(Fe),a(ae),x((A,R)=>{i(te,e(m).name||"-"),i(re,e(m).email),Te(ue,1,`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${e(m).role==="admin"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`),i(Le,e(m).role),Te(Se,1,`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${e(m).enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`),i(Ne,e(m).enabled?"Active":"Disabled"),Ee(he,"title",A),Ee(he,"aria-label",R),Te(Pe,1,Bt(e(ke)&&e(ke).email===e(m).email&&e(m).enabled?"text-gray-400 cursor-not-allowed":"text-blue-600 hover:text-blue-800")),Ee(Pe,"title",e(ke)&&e(ke).email===e(m).email&&e(m).enabled?"You cannot disable your own account":e(m).enabled?"Disable User":"Enable User"),Ee(Pe,"aria-label",e(ke)&&e(ke).email===e(m).email&&e(m).enabled?"You cannot disable your own account":e(m).enabled?"Disable User":"Enable User"),Pe.disabled=e(ke)&&e(ke).email===e(m).email&&e(m).enabled},[()=>l()("admin.users.actions.changePassword",{default:"Change Password"}),()=>l()("admin.users.actions.changePassword",{default:"Change Password"})]),v(ee,ae)}),a(pe),a(le),a(q),x((ee,m,H,ce)=>{i(N,ee),i(Q,m),i(E,H),i(se,ce)},[()=>l()("admin.users.table.name",{default:"Name"}),()=>l()("admin.users.table.email",{default:"Email"}),()=>l()("admin.users.table.role",{default:"Role"}),()=>l()("admin.users.table.actions",{default:"Actions"})]),v(P,q)};y(Z,P=>{e(Ie).length===0?P(S):P(W,!1)},$)}};y(O,Z=>{e(We)?Z(ve):Z(ne,!1)},X)}};y(D,O=>{e(ba)?O(V):O(C,!1)})}x((O,X,ve)=>{i(j,O),Ee(z,"aria-label",X),i(F,ve)},[()=>l()("admin.users.title",{default:"User Management"}),()=>l()("admin.users.actions.create",{default:"Create User"}),()=>l()("admin.users.actions.create",{default:"Create User"})]),v(u,n)},o=(u,n)=>{{var b=U=>{var j=br(),z=ua(j),F=t(z),D=t(F,!0);a(F);var V=s(F,2),C=t(V);C.__click=[Jt,Me,aa];var O=s(C,2);O.__click=[Ht,f,ze,Fa,za,mt];var X=t(O,!0);a(O),a(V),a(z);var ve=s(z,2);{var ne=$=>{var S=lr(),W=t(S,!0);a(S),x(P=>i(W,P),[()=>l()("admin.organizations.loading",{default:"Loading organizations..."})]),v($,S)},Z=($,S)=>{{var W=q=>{var le=dr(),I=ua(le),B=t(I),G=t(B,!0);a(B);var N=s(B,2),Y=t(N,!0);a(N),a(I);var Q=s(I,2),h=t(Q);h.__click=aa;var E=t(h,!0);a(h),a(Q),x((T,se)=>{i(G,T),i(Y,e(Xe)),i(E,se)},[()=>l()("admin.organizations.errorTitle",{default:"Error:"}),()=>l()("admin.organizations.retry",{default:"Retry"})]),v(q,le)},P=(q,le)=>{{var I=G=>{var N=cr(),Y=t(N,!0);a(N),x(Q=>i(Y,Q),[()=>l()("admin.organizations.noOrganizations",{default:"No organizations found."})]),v(G,N)},B=G=>{var N=mr(),Y=t(N),Q=t(Y),h=t(Q),E=t(h),T=t(E,!0);a(E);var se=s(E),pe=t(se,!0);a(se);var ee=s(se),m=t(ee,!0);a(ee);var H=s(ee),ce=t(H,!0);a(H);var ae=s(H),me=t(ae,!0);a(ae),a(h),a(Q);var k=s(Q);ga(k,21,()=>e(pa),te=>te.id,(te,M)=>{var ie=fr(),re=t(ie),J=t(re),ue=t(J,!0);a(J),a(re);var Le=s(re),Ae=t(Le),Oe=t(Ae,!0);a(Ae),a(Le);var xe=s(Le),$e=t(xe),je=t($e,!0);a($e),a(xe);var Se=s(xe),Ne=t(Se),Fe=t(Ne,!0);a(Ne),a(Se);var he=s(Se),Pe=t(he),Je=t(Pe);Je.__click=[ur,gt,M];var Ke=s(Je,2);Ke.__click=[gr,ut,M];var _=s(Ke,2);{var A=R=>{var fe=pr();fe.__click=[vr,xt,M],x((ye,we)=>{Ee(fe,"title",ye),Ee(fe,"aria-label",we)},[()=>l()("admin.organizations.actions.delete",{default:"Delete Organization"}),()=>l()("admin.organizations.actions.delete",{default:"Delete Organization"})]),v(R,fe)};y(_,R=>{e(M).is_system||R(A)})}a(Pe),a(he),a(ie),x((R,fe)=>{i(ue,e(M).name||"-"),i(Oe,e(M).slug),Te($e,1,`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${e(M).status==="active"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`),i(je,e(M).status),Te(Ne,1,`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${e(M).is_system?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`),i(Fe,e(M).is_system?"System":"Regular"),Ee(Ke,"title",R),Ee(Ke,"aria-label",fe)},[()=>l()("admin.organizations.actions.viewConfig",{default:"View Configuration"}),()=>l()("admin.organizations.actions.viewConfig",{default:"View Configuration"})]),v(te,ie)}),a(k),a(Y),a(N),x((te,M,ie,re,J)=>{i(T,te),i(pe,M),i(m,ie),i(ce,re),i(me,J)},[()=>l()("admin.organizations.table.name",{default:"Name"}),()=>l()("admin.organizations.table.slug",{default:"Slug"}),()=>l()("admin.organizations.table.status",{default:"Status"}),()=>l()("admin.organizations.table.type",{default:"Type"}),()=>l()("admin.organizations.table.actions",{default:"Actions"})]),v(G,N)};y(q,G=>{e(pa).length===0?G(I):G(B,!1)},le)}};y($,q=>{e(Xe)?q(W):q(P,!1)},S)}};y(ve,$=>{e(ka)?$(ne):$(Z,!1)})}x(($,S,W)=>{i(D,$),Ee(O,"aria-label",S),i(X,W)},[()=>l()("admin.organizations.title",{default:"Organization Management"}),()=>l()("admin.organizations.actions.create",{default:"Create Organization"}),()=>l()("admin.organizations.actions.create",{default:"Create Organization"})]),v(U,j)};y(u,U=>{e(K)==="organizations"&&U(b)},n)}};y(d,u=>{e(K)==="users"?u(g):u(o,!1)},c)}};y(kt,d=>{e(K)==="dashboard"?d(zt):d(At,!1)})}a(Ta);var tt=s(Ta,2);{var Et=d=>{var c=yr(),g=t(c),o=t(g),u=t(o),n=t(u,!0);a(u);var b=s(u,2),U=t(b);a(b);var j=s(b,2);{var z=D=>{var V=_r(),C=t(V),O=t(C,!0);a(C),a(V),x(X=>i(O,X),[()=>l()("admin.users.password.success",{default:"Password changed successfully!"})]),v(D,V)},F=D=>{var V=hr(),C=t(V);{var O=Q=>{var h=xr(),E=t(h),T=t(E,!0);a(E),a(h),x(()=>i(T,e(Ce))),v(Q,h)};y(C,Q=>{e(Ce)&&Q(O)})}var X=s(C,2),ve=t(X),ne=t(ve,!0);a(ve);var Z=s(ve,2);be(Z),a(X);var $=s(X,2),S=t($),W=t(S);a(S);var P=s(S,2);be(P);var q=s(P,2),le=t(q,!0);a(q),a($);var I=s($,2),B=t(I);B.__click=Na;var G=t(B,!0);a(B);var N=s(B,2),Y=t(N,!0);a(N),a(I),a(V),x((Q,h,E,T,se)=>{i(ne,Q),qt(Z,e(Ye).email),i(W,`${h??""} *`),i(le,E),i(G,T),N.disabled=e(wa),i(Y,se)},[()=>l()("admin.users.password.email",{default:"Email"}),()=>l()("admin.users.password.newPassword",{default:"New Password"}),()=>l()("admin.users.password.hint",{default:"At least 8 characters recommended"}),()=>l()("admin.users.password.cancel",{default:"Cancel"}),()=>e(wa)?l()("admin.users.password.changing",{default:"Changing..."}):l()("admin.users.password.change",{default:"Change Password"})]),Ja("submit",V,pt),Re(P,()=>e(Ye).new_password,Q=>e(Ye).new_password=Q),v(D,V)};y(j,D=>{e(La)?D(z):D(F,!1)})}a(o),a(g),a(c),x((D,V)=>{i(n,D),i(U,`${V??""} ${e(ja)??""}`)},[()=>l()("admin.users.password.title",{default:"Change Password"}),()=>l()("admin.users.password.subtitle",{default:"Set a new password for"})]),v(d,c)};y(tt,d=>{e(ya)&&d(Et)})}var rt=s(tt,2);{var Ut=d=>{var c=Or(),g=t(c),o=t(g),u=t(o),n=t(u,!0);a(u);var b=s(u,2);{var U=z=>{var F=wr(),D=t(F),V=t(D,!0);a(D),a(F),x(C=>i(V,C),[()=>l()("admin.users.create.success",{default:"User created successfully!"})]),v(z,F)},j=z=>{var F=Cr(),D=t(F);{var V=k=>{var te=kr(),M=t(te),ie=t(M,!0);a(M),a(te),x(()=>i(ie,e(Ue))),v(k,te)};y(D,k=>{e(Ue)&&k(V)})}var C=s(D,2),O=t(C),X=t(O);a(O);var ve=s(O,2);be(ve),a(C);var ne=s(C,2),Z=t(ne),$=t(Z);a(Z);var S=s(Z,2);be(S),a(ne);var W=s(ne,2),P=t(W),q=t(P);a(P);var le=s(P,2);be(le),a(W);var I=s(W,2),B=t(I),G=t(B,!0);a(B);var N=s(B,2),Y=t(N);Y.value=Y.__value="user";var Q=t(Y,!0);a(Y);var h=s(Y);h.value=h.__value="admin";var E=t(h,!0);a(h),a(N),a(I);var T=s(I,2),se=s(t(T),2);{var pe=k=>{var te=zr();v(k,te)},ee=(k,te)=>{{var M=re=>{var J=Ar(),ue=t(J,!0);a(J),x(()=>i(ue,e(Qe))),v(re,J)},ie=re=>{var J=Ur(),ue=t(J);ue.value=(ue.__value=null)??"";var Le=s(ue);ga(Le,17,()=>e(xa),Oa,(Ae,Oe)=>{var xe=Er(),$e={},je=t(xe),Se=s(je);{var Ne=Fe=>{var he=Mt("(System)");v(Fe,he)};y(Se,Fe=>{e(Oe).is_system&&Fe(Ne)})}a(xe),x(()=>{$e!==($e=e(Oe).id)&&(xe.value=(xe.__value=e(Oe).id)??""),i(je,`${e(Oe).name??""} `)}),v(Ae,xe)}),a(J),Za(J,()=>e(oe).organization_id,Ae=>e(oe).organization_id=Ae),v(re,J)};y(k,re=>{e(Qe)?re(M):re(ie,!1)},te)}};y(se,k=>{e(ha)?k(pe):k(ee,!1)})}De(2),a(T);var m=s(T,2),H=t(m);H.__click=Wa;var ce=t(H,!0);a(H);var ae=s(H,2),me=t(ae,!0);a(ae),a(m),a(F),x((k,te,M,ie,re,J,ue,Le)=>{i(X,`${k??""} *`),i($,`${te??""} *`),i(q,`${M??""} *`),i(G,ie),i(Q,re),i(E,J),i(ce,ue),ae.disabled=e(_a),i(me,Le)},[()=>l()("admin.users.create.email",{default:"Email"}),()=>l()("admin.users.create.name",{default:"Name"}),()=>l()("admin.users.create.password",{default:"Password"}),()=>l()("admin.users.create.role",{default:"Role"}),()=>l()("admin.users.create.roleUser",{default:"User"}),()=>l()("admin.users.create.roleAdmin",{default:"Admin"}),()=>l()("admin.users.create.cancel",{default:"Cancel"}),()=>e(_a)?l()("admin.users.create.creating",{default:"Creating..."}):l()("admin.users.create.create",{default:"Create User"})]),Ja("submit",F,vt),Re(ve,()=>e(oe).email,k=>e(oe).email=k),Re(S,()=>e(oe).name,k=>e(oe).name=k),Re(le,()=>e(oe).password,k=>e(oe).password=k),Za(N,()=>e(oe).role,k=>e(oe).role=k),v(z,F)};y(b,z=>{e(Ma)?z(U):z(j,!1)})}a(o),a(g),a(c),x(z=>i(n,z),[()=>l()("admin.users.create.title",{default:"Create New User"})]),v(d,c)};y(rt,d=>{e(Pa)&&d(Ut)})}var st=s(rt,2);{var Ct=d=>{var c=qr(),g=t(c),o=t(g),u=t(o),n=t(u,!0);a(u);var b=s(u,2);{var U=z=>{var F=$r(),D=t(F),V=t(D,!0);a(D),a(F),x(C=>i(V,C),[()=>l()("admin.organizations.create.success",{default:"Organization created successfully!"})]),v(z,F)},j=z=>{var F=Dr(),D=t(F);{var V=_=>{var A=Sr(),R=t(A),fe=t(R,!0);a(R),a(A),x(()=>i(fe,e(ze))),v(_,A)};y(D,_=>{e(ze)&&_(V)})}var C=s(D,2),O=t(C),X=t(O),ve=t(X);a(X);var ne=s(X,2);be(ne),De(2),a(O);var Z=s(O,2),$=t(Z),S=t($);a($);var W=s($,2);be(W),a(Z),a(C);var P=s(C,2),q=s(t(P),2);{var le=_=>{var A=Pr();v(_,A)},I=(_,A)=>{{var R=ye=>{var we=Mr(),ta=t(we,!0);a(we),x(()=>i(ta,e(ea))),v(ye,we)},fe=ye=>{var we=jr(),ta=t(we);ta.value=(ta.__value=null)??"";var Ha=s(ta);ga(Ha,17,()=>e(Ea).filter(ra=>ra.role!=="admin"),Oa,(ra,sa,Ze,ca)=>{var oa=Lr(),ot={},St=t(oa);a(oa),x(()=>{ot!==(ot=e(sa).id)&&(oa.value=(oa.__value=e(sa).id)??""),i(St,`${e(sa).name??""} (${e(sa).email??""}) - ${e(sa).role??""}`)}),v(ra,oa)}),a(we),Za(we,()=>e(f).admin_user_id,ra=>e(f).admin_user_id=ra),v(ye,we)};y(_,ye=>{e(ea)?ye(R):ye(fe,!1)},A)}};y(q,_=>{e(Ua)?_(le):_(I,!1)})}De(2),a(P);var B=s(P,2),G=s(t(B),2),N=t(G),Y=t(N);be(Y),De(2),a(N),a(G);var Q=s(G,2);{var h=_=>{var A=Fr(),R=s(t(A),2);be(R),De(2),a(A),x(()=>R.required=e(f).signup_enabled),Re(R,()=>e(f).signup_key,fe=>e(f).signup_key=fe),v(_,A)};y(Q,_=>{e(f).signup_enabled&&_(h)})}a(B);var E=s(B,2),T=t(E),se=t(T);be(se),De(2),a(T),De(2),a(E);var pe=s(E,2),ee=t(pe),m=t(ee,!0);a(ee);var H=s(ee,2),ce=t(H),ae=t(ce);be(ae),De(2),a(ce);var me=s(ce,2),k=t(me);be(k),De(2),a(me);var te=s(me,2),M=t(te);be(M),De(2),a(te);var ie=s(te,2),re=t(ie);be(re),De(2),a(ie),a(H),a(pe);var J=s(pe,2),ue=t(J),Le=t(ue,!0);a(ue);var Ae=s(ue,2),Oe=t(Ae),xe=s(t(Oe),2);be(xe),a(Oe);var $e=s(Oe,2),je=s(t($e),2);be(je),a($e);var Se=s($e,2),Ne=s(t(Se),2);be(Ne),a(Se),a(Ae),a(J);var Fe=s(J,2),he=t(Fe);he.__click=Ra;var Pe=t(he,!0);a(he);var Je=s(he,2),Ke=t(Je,!0);a(Je),a(Fe),a(F),x((_,A,R,fe,ye,we)=>{i(ve,`${_??""} *`),i(S,`${A??""} *`),i(m,R),i(Le,fe),i(Pe,ye),Je.disabled=e(Aa),i(Ke,we)},[()=>l()("admin.organizations.create.slug",{default:"Slug"}),()=>l()("admin.organizations.create.name",{default:"Name"}),()=>l()("admin.organizations.create.features",{default:"Features"}),()=>l()("admin.organizations.create.limits",{default:"Usage Limits"}),()=>l()("admin.organizations.create.cancel",{default:"Cancel"}),()=>e(Aa)?l()("admin.organizations.create.creating",{default:"Creating..."}):l()("admin.organizations.create.create",{default:"Create Organization"})]),Ja("submit",F,ft),Re(ne,()=>e(f).slug,_=>e(f).slug=_),Re(W,()=>e(f).name,_=>e(f).name=_),va(Y,()=>e(f).signup_enabled,_=>e(f).signup_enabled=_),va(se,()=>e(f).use_system_baseline,_=>e(f).use_system_baseline=_),va(ae,()=>e(f).config.features.rag_enabled,_=>e(f).config.features.rag_enabled=_),va(k,()=>e(f).config.features.mcp_enabled,_=>e(f).config.features.mcp_enabled=_),va(M,()=>e(f).config.features.lti_publishing,_=>e(f).config.features.lti_publishing=_),va(re,()=>e(f).config.features.signup_enabled,_=>e(f).config.features.signup_enabled=_),Re(xe,()=>e(f).config.limits.usage.tokens_per_month,_=>e(f).config.limits.usage.tokens_per_month=_),Re(je,()=>e(f).config.limits.usage.max_assistants,_=>e(f).config.limits.usage.max_assistants=_),Re(Ne,()=>e(f).config.limits.usage.storage_gb,_=>e(f).config.limits.usage.storage_gb=_),v(z,F)};y(b,z=>{e(Fa)?z(U):z(j,!1)})}a(o),a(g),a(c),x(z=>i(n,z),[()=>l()("admin.organizations.create.title",{default:"Create New Organization"})]),v(d,c)};y(st,d=>{e(za)&&d(Ct)})}var Ot=s(st,2);{var $t=d=>{var c=Jr(),g=t(c),o=t(g),u=t(o),n=t(u),b=t(n);a(n);var U=s(n,2);U.__click=Ia,a(u);var j=s(u,2);{var z=C=>{var O=Br();v(C,O)},F=(C,O)=>{{var X=ne=>{var Z=Nr(),$=s(t(Z),2),S=t($,!0);a($),a(Z),x(()=>i(S,e(He))),v(ne,Z)},ve=(ne,Z)=>{{var $=S=>{var W=Hr(),P=s(t(W),2),q=t(P),le=t(q,!0);a(q),a(P);var I=s(P,2);{var B=h=>{var E=Tr(),T=s(t(E),2);ga(T,21,()=>Object.entries(e(_e).setups),Oa,(se,pe)=>{let ee=()=>e(pe)[0],m=()=>e(pe)[1];var H=Ir(),ce=t(H),ae=t(ce,!0);a(ce);var me=s(ce,2),k=t(me,!0);a(me);var te=s(me,2);{var M=ie=>{var re=Rr(),J=s(t(re));a(re),x(ue=>i(J,` ${ue??""}`),[()=>Object.keys(m().providers).join(", ")||"None"]),v(ie,re)};y(te,ie=>{m().providers&&ie(M)})}a(H),x(()=>{i(ae,m().name||ee()),i(k,m().is_default?"(Default)":"")}),v(se,H)}),a(T),a(E),v(h,E)};y(I,h=>{e(_e).setups&&h(B)})}var G=s(I,2);{var N=h=>{var E=Gr(),T=s(t(E),2);ga(T,21,()=>Object.entries(e(_e).features),Oa,(se,pe)=>{let ee=()=>e(pe)[0],m=()=>e(pe)[1];var H=Vr(),ce=t(H),ae=s(ce,2),me=t(ae,!0);a(ae),a(H),x(k=>{Te(ce,1,`w-2 h-2 rounded-full mr-2 ${m()?"bg-green-500":"bg-gray-300"}`),i(me,k)},[()=>ee().replace("_"," ")]),v(se,H)}),a(T),a(E),v(h,E)};y(G,h=>{e(_e).features&&h(N)})}var Y=s(G,2);{var Q=h=>{var E=Yr(),T=s(t(E),2),se=t(T),pe=s(t(se));a(se);var ee=s(se,2),m=s(t(ee));a(ee);var H=s(ee,2),ce=s(t(H));a(H),a(T),a(E),x(ae=>{i(pe,` ${ae??""}`),i(m,` ${e(_e).limits.usage.max_assistants||"Unlimited"}`),i(ce,` ${e(_e).limits.usage.storage_gb||"Unlimited"} GB`)},[()=>{var ae;return((ae=e(_e).limits.usage.tokens_per_month)==null?void 0:ae.toLocaleString())||"Unlimited"}]),v(h,E)};y(Y,h=>{e(_e).limits&&e(_e).limits.usage&&h(Q)})}a(W),x(h=>i(le,h),[()=>JSON.stringify(e(_e),null,2)]),v(S,W)};y(ne,S=>{e(_e)&&S($)},Z)}};y(C,ne=>{e(He)?ne(X):ne(ve,!1)},O)}};y(j,C=>{e(Da)?C(z):C(F,!1)})}var D=s(j,2),V=t(D);V.__click=Ia,a(D),a(o),a(g),a(c),x(()=>i(b,`Configuration: ${e(fa).name??""} (${e(fa).slug??""})`)),v(d,c)};y(Ot,d=>{e(Ca)&&e(fa)&&d($t)})}x((d,c,g,o,u,n)=>{Te(ia,1,`inline-block py-2 px-4 text-sm font-medium ${e(K)==="dashboard"?"text-white bg-brand border-brand":"text-gray-500 hover:text-brand border-transparent"} rounded-t-lg border-b-2`),Ka(ia,e(K)==="dashboard"?"background-color: #2271b3; color: white; border-color: #2271b3;":""),Ee(ia,"aria-label",d),i(ht,c),Te(la,1,`inline-block py-2 px-4 text-sm font-medium ${e(K)==="users"?"text-white bg-brand border-brand":"text-gray-500 hover:text-brand border-transparent"} rounded-t-lg border-b-2`),Ka(la,e(K)==="users"?"background-color: #2271b3; color: white; border-color: #2271b3;":""),Ee(la,"aria-label",g),i(yt,o),Te(da,1,`inline-block py-2 px-4 text-sm font-medium ${e(K)==="organizations"?"text-white bg-brand border-brand":"text-gray-500 hover:text-brand border-transparent"} rounded-t-lg border-b-2`),Ka(da,e(K)==="organizations"?"background-color: #2271b3; color: white; border-color: #2271b3;":""),Ee(da,"aria-label",u),i(wt,n)},[()=>l()("admin.tabs.dashboard",{default:"Dashboard"}),()=>l()("admin.tabs.dashboard",{default:"Dashboard"}),()=>l()("admin.tabs.users",{default:"User Management"}),()=>l()("admin.tabs.users",{default:"User Management"}),()=>l()("admin.tabs.organizations",{default:"Organizations"}),()=>l()("admin.tabs.organizations",{default:"Organizations"})]),v(Be,Xa),Dt(),Ve()}Pt(["click"]);export{us as component};
