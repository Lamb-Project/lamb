import{E as r}from"./DMsokd5p.js";function m(o){const l=localStorage.getItem(o);try{return l?JSON.parse(l):null}catch(t){return console.error(`Error parsing localStorage item "${o}":`,t),localStorage.removeItem(o),null}}const a={token:localStorage.getItem("userToken"),name:localStorage.getItem("userName"),email:localStorage.getItem("userEmail"),owiUrl:localStorage.getItem("OWI_url"),data:m("userData")},n=()=>{const{subscribe:o,set:l,update:t}=r({isLoggedIn:!!a.token,...a});return{subscribe:o,login:e=>{localStorage.setItem("userToken",e.token),localStorage.setItem("userName",e.name),localStorage.setItem("userEmail",e.email),e.launch_url&&localStorage.setItem("OWI_url",e.launch_url),localStorage.setItem("userData",JSON.stringify(e)),l({isLoggedIn:!0,token:e.token,name:e.name,email:e.email,owiUrl:e.launch_url||null,data:e})},logout:()=>{console.log("Logging out: Clearing user and cache data from localStorage"),localStorage.removeItem("userToken"),localStorage.removeItem("userName"),localStorage.removeItem("userEmail"),localStorage.removeItem("OWI_url"),localStorage.removeItem("userData"),localStorage.removeItem("lamb_assistant_capabilities"),localStorage.removeItem("lamb_assistant_defaults"),l({isLoggedIn:!1,token:null,name:null,email:null,owiUrl:null,data:null})}}},s=n();export{s as u};
