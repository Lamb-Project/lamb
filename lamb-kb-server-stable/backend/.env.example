# API key for authentication
LAMB_API_KEY=0p3n-w3bu!

# Default embeddings model configuration
# These variables are used when 'default' is specified in collection creation

# Embeddings model to use
EMBEDDINGS_MODEL=nomic-embed-text

# Vendor/provider of embeddings ('ollama', 'local', 'openai')
EMBEDDINGS_VENDOR=ollama

# API endpoint for Ollama (required for Ollama embeddings)
EMBEDDINGS_ENDPOINT=http://localhost:11434/api/embeddings

# API key (if required by the vendor, e.g., for OpenAI)
EMBEDDINGS_APIKEY=

# URL of the home page
HOME_URL=https://yourdomain.com/kb/

# For OpenAI embedding models:
# EMBEDDINGS_MODEL=text-embedding-3-small
# EMBEDDINGS_VENDOR=openai
# EMBEDDINGS_APIKEY=your-openai-key-here

# Firecrawl configuration for URL ingestion plugin
# For self-hosted Firecrawl instance running on the host machine
# Use host.docker.internal to access services on the host from inside Docker
FIRECRAWL_API_URL=http://host.docker.internal:3002
# For cloud Firecrawl service, uncomment and set your API key:
# FIRECRAWL_API_URL=https://api.firecrawl.dev
# FIRECRAWL_API_KEY=your-firecrawl-api-key-here

# Logging
# LAMB KB webapp-specific log level (falls back to GLOBAL_LOG_LEVEL if unset)
LAMB_KB_LOG_LEVEL=WARNING

# Plugin governance (temporary quick control)
# Values: DISABLE | SIMPLIFIED | ADVANCED
# Note: ENABLE is accepted as a backward-compatible alias for ADVANCED.
#
# Ingestion plugins
PLUGIN_SIMPLE_INGEST=ADVANCED
PLUGIN_MARKITDOWN_INGEST=ADVANCED
PLUGIN_MARKITDOWN_PLUS_INGEST=ADVANCED
PLUGIN_HIERARCHICAL_INGEST=ADVANCED
PLUGIN_MARKITDOWN_HIERARCHICAL_INGEST=ADVANCED
PLUGIN_MOCKAI_JSON_INGEST=ADVANCED
PLUGIN_YOUTUBE_TRANSCRIPT_INGEST=ADVANCED
PLUGIN_URL_INGEST=ADVANCED
#
# Query plugins
PLUGIN_SIMPLE_QUERY=ADVANCED
PLUGIN_PARENT_CHILD_QUERY=ADVANCED

# ═══════════════════════════════════════════════════════════════════════════════
# CONCURRENCY CONTROL FOR BACKGROUND INGESTION TASKS
# ═══════════════════════════════════════════════════════════════════════════════
# Maximum number of concurrent ingestion tasks to prevent ChromaDB/SQLite lock contention
# IMPORTANT: Reduced from 10 to 3 due to Firecrawl timeout issues under load
# Lower values = more stable but slower throughput
# Higher values = more throughput but risk of stuck jobs
# Safe range: 2-5 (default: 3)
MAX_CONCURRENT_INGESTION_TASKS=3

# Maximum time (seconds) a single ingestion task is allowed to run
# If exceeded, task is marked as FAILED to prevent permanently stuck jobs
# This catches tasks waiting indefinitely for Firecrawl response
# Default: 360 seconds (6 minutes) = 300s Firecrawl timeout + 60s overhead
INGESTION_TASK_TIMEOUT_SECONDS=360